<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.124">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-11-12">

<title>Blog - Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cheinchi" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Data Science</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 12, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="探索性数据分析" class="level2">
<h2 class="anchored" data-anchor-id="探索性数据分析">探索性数据分析</h2>
<p>可视化和数据转换的方法实现探索数据，统计学家称为是一个探索性数据分析(exploratory data analysis,EDA) 同时这是一个循环可迭代的问题： - 对数据提出问题 - 对数据进行可视化 - 使用上一个步骤的结果来精炼问题，并提出新问题。</p>
<section id="准备工作" class="level3">
<h3 class="anchored" data-anchor-id="准备工作">准备工作</h3>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"nycflights13"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>EDA本质是一个创造的过程，问题的质量在于问题的数量。定义几个变量： - 变量 - 值 - 观测 - 表格数据</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> diamonds)<span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>cut))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>diamonds<span class="sc">%&gt;%</span><span class="fu">count</span>(cut)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 2</caption>
<thead>
<tr class="header">
<th scope="col">cut</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Fair</td>
<td>1610</td>
</tr>
<tr class="even">
<td>Good</td>
<td>4906</td>
</tr>
<tr class="odd">
<td>Very Good</td>
<td>12082</td>
</tr>
<tr class="even">
<td>Premium</td>
<td>13791</td>
</tr>
<tr class="odd">
<td>Ideal</td>
<td>21551</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>通过<code>dplyr::count()</code>手动计算结果。</p>
<p>使用<code>binwidth</code>参数设定直方图中的间隔的宽度，参数是用x轴变量的单位来衡量的。使用直方图时候，试验不同的宽度对于其的影响。</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(flights,month<span class="sc">==</span><span class="dv">1</span>,day<span class="sc">==</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 842 × 19</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>517</td>
<td>515</td>
<td>2</td>
<td>830</td>
<td>819</td>
<td>11</td>
<td>UA</td>
<td>1545</td>
<td>N14228</td>
<td>EWR</td>
<td>IAH</td>
<td>227</td>
<td>1400</td>
<td>5</td>
<td>15</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>533</td>
<td>529</td>
<td>4</td>
<td>850</td>
<td>830</td>
<td>20</td>
<td>UA</td>
<td>1714</td>
<td>N24211</td>
<td>LGA</td>
<td>IAH</td>
<td>227</td>
<td>1416</td>
<td>5</td>
<td>29</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>542</td>
<td>540</td>
<td>2</td>
<td>923</td>
<td>850</td>
<td>33</td>
<td>AA</td>
<td>1141</td>
<td>N619AA</td>
<td>JFK</td>
<td>MIA</td>
<td>160</td>
<td>1089</td>
<td>5</td>
<td>40</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>544</td>
<td>545</td>
<td>-1</td>
<td>1004</td>
<td>1022</td>
<td>-18</td>
<td>B6</td>
<td>725</td>
<td>N804JB</td>
<td>JFK</td>
<td>BQN</td>
<td>183</td>
<td>1576</td>
<td>5</td>
<td>45</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>600</td>
<td>-6</td>
<td>812</td>
<td>837</td>
<td>-25</td>
<td>DL</td>
<td>461</td>
<td>N668DN</td>
<td>LGA</td>
<td>ATL</td>
<td>116</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>558</td>
<td>-4</td>
<td>740</td>
<td>728</td>
<td>12</td>
<td>UA</td>
<td>1696</td>
<td>N39463</td>
<td>EWR</td>
<td>ORD</td>
<td>150</td>
<td>719</td>
<td>5</td>
<td>58</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>555</td>
<td>600</td>
<td>-5</td>
<td>913</td>
<td>854</td>
<td>19</td>
<td>B6</td>
<td>507</td>
<td>N516JB</td>
<td>EWR</td>
<td>FLL</td>
<td>158</td>
<td>1065</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>709</td>
<td>723</td>
<td>-14</td>
<td>EV</td>
<td>5708</td>
<td>N829AS</td>
<td>LGA</td>
<td>IAD</td>
<td>53</td>
<td>229</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>838</td>
<td>846</td>
<td>-8</td>
<td>B6</td>
<td>79</td>
<td>N593JB</td>
<td>JFK</td>
<td>MCO</td>
<td>140</td>
<td>944</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>753</td>
<td>745</td>
<td>8</td>
<td>AA</td>
<td>301</td>
<td>N3ALAA</td>
<td>LGA</td>
<td>ORD</td>
<td>138</td>
<td>733</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>849</td>
<td>851</td>
<td>-2</td>
<td>B6</td>
<td>49</td>
<td>N793JB</td>
<td>JFK</td>
<td>PBI</td>
<td>149</td>
<td>1028</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>853</td>
<td>856</td>
<td>-3</td>
<td>B6</td>
<td>71</td>
<td>N657JB</td>
<td>JFK</td>
<td>TPA</td>
<td>158</td>
<td>1005</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>924</td>
<td>917</td>
<td>7</td>
<td>UA</td>
<td>194</td>
<td>N29129</td>
<td>JFK</td>
<td>LAX</td>
<td>345</td>
<td>2475</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>923</td>
<td>937</td>
<td>-14</td>
<td>UA</td>
<td>1124</td>
<td>N53441</td>
<td>EWR</td>
<td>SFO</td>
<td>361</td>
<td>2565</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>941</td>
<td>910</td>
<td>31</td>
<td>AA</td>
<td>707</td>
<td>N3DUAA</td>
<td>LGA</td>
<td>DFW</td>
<td>257</td>
<td>1389</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>559</td>
<td>0</td>
<td>702</td>
<td>706</td>
<td>-4</td>
<td>B6</td>
<td>1806</td>
<td>N708JB</td>
<td>JFK</td>
<td>BOS</td>
<td>44</td>
<td>187</td>
<td>5</td>
<td>59</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>854</td>
<td>902</td>
<td>-8</td>
<td>UA</td>
<td>1187</td>
<td>N76515</td>
<td>EWR</td>
<td>LAS</td>
<td>337</td>
<td>2227</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>851</td>
<td>858</td>
<td>-7</td>
<td>B6</td>
<td>371</td>
<td>N595JB</td>
<td>LGA</td>
<td>FLL</td>
<td>152</td>
<td>1076</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>837</td>
<td>825</td>
<td>12</td>
<td>MQ</td>
<td>4650</td>
<td>N542MQ</td>
<td>LGA</td>
<td>ATL</td>
<td>134</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>601</td>
<td>600</td>
<td>1</td>
<td>844</td>
<td>850</td>
<td>-6</td>
<td>B6</td>
<td>343</td>
<td>N644JB</td>
<td>EWR</td>
<td>PBI</td>
<td>147</td>
<td>1023</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>610</td>
<td>-8</td>
<td>812</td>
<td>820</td>
<td>-8</td>
<td>DL</td>
<td>1919</td>
<td>N971DL</td>
<td>LGA</td>
<td>MSP</td>
<td>170</td>
<td>1020</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>605</td>
<td>-3</td>
<td>821</td>
<td>805</td>
<td>16</td>
<td>MQ</td>
<td>4401</td>
<td>N730MQ</td>
<td>LGA</td>
<td>DTW</td>
<td>105</td>
<td>502</td>
<td>6</td>
<td>5</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>858</td>
<td>910</td>
<td>-12</td>
<td>AA</td>
<td>1895</td>
<td>N633AA</td>
<td>EWR</td>
<td>MIA</td>
<td>152</td>
<td>1085</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>837</td>
<td>845</td>
<td>-8</td>
<td>DL</td>
<td>1743</td>
<td>N3739P</td>
<td>JFK</td>
<td>ATL</td>
<td>128</td>
<td>760</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>607</td>
<td>607</td>
<td>0</td>
<td>858</td>
<td>915</td>
<td>-17</td>
<td>UA</td>
<td>1077</td>
<td>N53442</td>
<td>EWR</td>
<td>MIA</td>
<td>157</td>
<td>1085</td>
<td>6</td>
<td>7</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>608</td>
<td>600</td>
<td>8</td>
<td>807</td>
<td>735</td>
<td>32</td>
<td>MQ</td>
<td>3768</td>
<td>N9EAMQ</td>
<td>EWR</td>
<td>ORD</td>
<td>139</td>
<td>719</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>611</td>
<td>600</td>
<td>11</td>
<td>945</td>
<td>931</td>
<td>14</td>
<td>UA</td>
<td>303</td>
<td>N532UA</td>
<td>JFK</td>
<td>SFO</td>
<td>366</td>
<td>2586</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>613</td>
<td>610</td>
<td>3</td>
<td>925</td>
<td>921</td>
<td>4</td>
<td>B6</td>
<td>135</td>
<td>N635JB</td>
<td>JFK</td>
<td>RSW</td>
<td>175</td>
<td>1074</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>1039</td>
<td>1100</td>
<td>-21</td>
<td>B6</td>
<td>709</td>
<td>N794JB</td>
<td>JFK</td>
<td>SJU</td>
<td>182</td>
<td>1598</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>833</td>
<td>842</td>
<td>-9</td>
<td>DL</td>
<td>575</td>
<td>N326NB</td>
<td>EWR</td>
<td>ATL</td>
<td>120</td>
<td>746</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2140</td>
<td>2135</td>
<td>5</td>
<td>210</td>
<td>224</td>
<td>-14</td>
<td>B6</td>
<td>701</td>
<td>N284JB</td>
<td>JFK</td>
<td>SJU</td>
<td>189</td>
<td>1598</td>
<td>21</td>
<td>35</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2157</td>
<td>2155</td>
<td>2</td>
<td>43</td>
<td>41</td>
<td>2</td>
<td>B6</td>
<td>43</td>
<td>N537JB</td>
<td>JFK</td>
<td>MCO</td>
<td>140</td>
<td>944</td>
<td>21</td>
<td>55</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2158</td>
<td>2200</td>
<td>-2</td>
<td>2254</td>
<td>2307</td>
<td>-13</td>
<td>EV</td>
<td>4103</td>
<td>N14998</td>
<td>EWR</td>
<td>BWI</td>
<td>36</td>
<td>169</td>
<td>22</td>
<td>0</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2205</td>
<td>1720</td>
<td>285</td>
<td>46</td>
<td>2040</td>
<td>246</td>
<td>AA</td>
<td>1999</td>
<td>N5DNAA</td>
<td>EWR</td>
<td>MIA</td>
<td>146</td>
<td>1085</td>
<td>17</td>
<td>20</td>
<td>2013-01-01 17:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2209</td>
<td>2145</td>
<td>24</td>
<td>58</td>
<td>37</td>
<td>21</td>
<td>B6</td>
<td>35</td>
<td>N608JB</td>
<td>JFK</td>
<td>PBI</td>
<td>143</td>
<td>1028</td>
<td>21</td>
<td>45</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2209</td>
<td>2155</td>
<td>14</td>
<td>2400</td>
<td>2337</td>
<td>23</td>
<td>B6</td>
<td>1109</td>
<td>N216JB</td>
<td>JFK</td>
<td>RDU</td>
<td>86</td>
<td>427</td>
<td>21</td>
<td>55</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2211</td>
<td>2145</td>
<td>26</td>
<td>2339</td>
<td>2311</td>
<td>28</td>
<td>B6</td>
<td>104</td>
<td>N228JB</td>
<td>JFK</td>
<td>BUF</td>
<td>64</td>
<td>301</td>
<td>21</td>
<td>45</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2217</td>
<td>2229</td>
<td>-12</td>
<td>249</td>
<td>315</td>
<td>-26</td>
<td>B6</td>
<td>713</td>
<td>N547JB</td>
<td>JFK</td>
<td>SJU</td>
<td>191</td>
<td>1598</td>
<td>22</td>
<td>29</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2217</td>
<td>2130</td>
<td>47</td>
<td>140</td>
<td>27</td>
<td>73</td>
<td>B6</td>
<td>21</td>
<td>N516JB</td>
<td>JFK</td>
<td>TPA</td>
<td>163</td>
<td>1005</td>
<td>21</td>
<td>30</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2221</td>
<td>2000</td>
<td>141</td>
<td>2331</td>
<td>2124</td>
<td>127</td>
<td>EV</td>
<td>4462</td>
<td>N13566</td>
<td>EWR</td>
<td>BUF</td>
<td>56</td>
<td>282</td>
<td>20</td>
<td>0</td>
<td>2013-01-01 20:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2224</td>
<td>2200</td>
<td>24</td>
<td>2324</td>
<td>2316</td>
<td>8</td>
<td>EV</td>
<td>4206</td>
<td>N16561</td>
<td>EWR</td>
<td>PWM</td>
<td>47</td>
<td>284</td>
<td>22</td>
<td>0</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2229</td>
<td>2159</td>
<td>30</td>
<td>149</td>
<td>100</td>
<td>49</td>
<td>B6</td>
<td>11</td>
<td>N531JB</td>
<td>JFK</td>
<td>FLL</td>
<td>153</td>
<td>1069</td>
<td>21</td>
<td>59</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2240</td>
<td>2245</td>
<td>-5</td>
<td>2340</td>
<td>2356</td>
<td>-16</td>
<td>B6</td>
<td>608</td>
<td>N279JB</td>
<td>JFK</td>
<td>PWM</td>
<td>44</td>
<td>273</td>
<td>22</td>
<td>45</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2250</td>
<td>2255</td>
<td>-5</td>
<td>2352</td>
<td>2359</td>
<td>-7</td>
<td>B6</td>
<td>1018</td>
<td>N521JB</td>
<td>JFK</td>
<td>BOS</td>
<td>37</td>
<td>187</td>
<td>22</td>
<td>55</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2302</td>
<td>2200</td>
<td>62</td>
<td>2342</td>
<td>2253</td>
<td>49</td>
<td>EV</td>
<td>4276</td>
<td>N13903</td>
<td>EWR</td>
<td>BDL</td>
<td>24</td>
<td>116</td>
<td>22</td>
<td>0</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2306</td>
<td>2245</td>
<td>21</td>
<td>28</td>
<td>5</td>
<td>23</td>
<td>B6</td>
<td>30</td>
<td>N281JB</td>
<td>JFK</td>
<td>ROC</td>
<td>59</td>
<td>264</td>
<td>22</td>
<td>45</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2307</td>
<td>2245</td>
<td>22</td>
<td>32</td>
<td>2357</td>
<td>35</td>
<td>B6</td>
<td>128</td>
<td>N178JB</td>
<td>JFK</td>
<td>BTV</td>
<td>59</td>
<td>266</td>
<td>22</td>
<td>45</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2310</td>
<td>2255</td>
<td>15</td>
<td>24</td>
<td>15</td>
<td>9</td>
<td>B6</td>
<td>112</td>
<td>N646JB</td>
<td>JFK</td>
<td>BUF</td>
<td>57</td>
<td>301</td>
<td>22</td>
<td>55</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2312</td>
<td>2000</td>
<td>192</td>
<td>21</td>
<td>2110</td>
<td>191</td>
<td>EV</td>
<td>4312</td>
<td>N13958</td>
<td>EWR</td>
<td>DCA</td>
<td>44</td>
<td>199</td>
<td>20</td>
<td>0</td>
<td>2013-01-01 20:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2323</td>
<td>2200</td>
<td>83</td>
<td>22</td>
<td>2313</td>
<td>69</td>
<td>EV</td>
<td>4257</td>
<td>N13538</td>
<td>EWR</td>
<td>BTV</td>
<td>44</td>
<td>266</td>
<td>22</td>
<td>0</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2326</td>
<td>2130</td>
<td>116</td>
<td>131</td>
<td>18</td>
<td>73</td>
<td>B6</td>
<td>199</td>
<td>N594JB</td>
<td>JFK</td>
<td>LAS</td>
<td>290</td>
<td>2248</td>
<td>21</td>
<td>30</td>
<td>2013-01-01 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2327</td>
<td>2250</td>
<td>37</td>
<td>32</td>
<td>2359</td>
<td>33</td>
<td>B6</td>
<td>22</td>
<td>N639JB</td>
<td>JFK</td>
<td>SYR</td>
<td>45</td>
<td>209</td>
<td>22</td>
<td>50</td>
<td>2013-01-01 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2343</td>
<td>1724</td>
<td>379</td>
<td>314</td>
<td>1938</td>
<td>456</td>
<td>EV</td>
<td>4321</td>
<td>N21197</td>
<td>EWR</td>
<td>MCI</td>
<td>222</td>
<td>1092</td>
<td>17</td>
<td>24</td>
<td>2013-01-01 17:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2353</td>
<td>2359</td>
<td>-6</td>
<td>425</td>
<td>445</td>
<td>-20</td>
<td>B6</td>
<td>739</td>
<td>N591JB</td>
<td>JFK</td>
<td>PSE</td>
<td>195</td>
<td>1617</td>
<td>23</td>
<td>59</td>
<td>2013-01-01 23:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2353</td>
<td>2359</td>
<td>-6</td>
<td>418</td>
<td>442</td>
<td>-24</td>
<td>B6</td>
<td>707</td>
<td>N794JB</td>
<td>JFK</td>
<td>SJU</td>
<td>185</td>
<td>1598</td>
<td>23</td>
<td>59</td>
<td>2013-01-01 23:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>2356</td>
<td>2359</td>
<td>-3</td>
<td>425</td>
<td>437</td>
<td>-12</td>
<td>B6</td>
<td>727</td>
<td>N588JB</td>
<td>JFK</td>
<td>BQN</td>
<td>186</td>
<td>1576</td>
<td>23</td>
<td>59</td>
<td>2013-01-01 23:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>NA</td>
<td>1630</td>
<td>NA</td>
<td>NA</td>
<td>1815</td>
<td>NA</td>
<td>EV</td>
<td>4308</td>
<td>N18120</td>
<td>EWR</td>
<td>RDU</td>
<td>NA</td>
<td>416</td>
<td>16</td>
<td>30</td>
<td>2013-01-01 16:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>NA</td>
<td>1935</td>
<td>NA</td>
<td>NA</td>
<td>2240</td>
<td>NA</td>
<td>AA</td>
<td>791</td>
<td>N3EHAA</td>
<td>LGA</td>
<td>DFW</td>
<td>NA</td>
<td>1389</td>
<td>19</td>
<td>35</td>
<td>2013-01-01 19:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>NA</td>
<td>1500</td>
<td>NA</td>
<td>NA</td>
<td>1825</td>
<td>NA</td>
<td>AA</td>
<td>1925</td>
<td>N3EVAA</td>
<td>LGA</td>
<td>MIA</td>
<td>NA</td>
<td>1096</td>
<td>15</td>
<td>0</td>
<td>2013-01-01 15:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>NA</td>
<td>600</td>
<td>NA</td>
<td>NA</td>
<td>901</td>
<td>NA</td>
<td>B6</td>
<td>125</td>
<td>N618JB</td>
<td>JFK</td>
<td>FLL</td>
<td>NA</td>
<td>1069</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>smaller <span class="ot">&lt;-</span> diamonds<span class="sc">%&gt;%</span>dplyr<span class="sc">::</span><span class="fu">filter</span>(carat<span class="sc">&lt;</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(flights,year,month,day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 336776 × 19</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>517</td>
<td>515</td>
<td>2</td>
<td>830</td>
<td>819</td>
<td>11</td>
<td>UA</td>
<td>1545</td>
<td>N14228</td>
<td>EWR</td>
<td>IAH</td>
<td>227</td>
<td>1400</td>
<td>5</td>
<td>15</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>533</td>
<td>529</td>
<td>4</td>
<td>850</td>
<td>830</td>
<td>20</td>
<td>UA</td>
<td>1714</td>
<td>N24211</td>
<td>LGA</td>
<td>IAH</td>
<td>227</td>
<td>1416</td>
<td>5</td>
<td>29</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>542</td>
<td>540</td>
<td>2</td>
<td>923</td>
<td>850</td>
<td>33</td>
<td>AA</td>
<td>1141</td>
<td>N619AA</td>
<td>JFK</td>
<td>MIA</td>
<td>160</td>
<td>1089</td>
<td>5</td>
<td>40</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>544</td>
<td>545</td>
<td>-1</td>
<td>1004</td>
<td>1022</td>
<td>-18</td>
<td>B6</td>
<td>725</td>
<td>N804JB</td>
<td>JFK</td>
<td>BQN</td>
<td>183</td>
<td>1576</td>
<td>5</td>
<td>45</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>600</td>
<td>-6</td>
<td>812</td>
<td>837</td>
<td>-25</td>
<td>DL</td>
<td>461</td>
<td>N668DN</td>
<td>LGA</td>
<td>ATL</td>
<td>116</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>558</td>
<td>-4</td>
<td>740</td>
<td>728</td>
<td>12</td>
<td>UA</td>
<td>1696</td>
<td>N39463</td>
<td>EWR</td>
<td>ORD</td>
<td>150</td>
<td>719</td>
<td>5</td>
<td>58</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>555</td>
<td>600</td>
<td>-5</td>
<td>913</td>
<td>854</td>
<td>19</td>
<td>B6</td>
<td>507</td>
<td>N516JB</td>
<td>EWR</td>
<td>FLL</td>
<td>158</td>
<td>1065</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>709</td>
<td>723</td>
<td>-14</td>
<td>EV</td>
<td>5708</td>
<td>N829AS</td>
<td>LGA</td>
<td>IAD</td>
<td>53</td>
<td>229</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>838</td>
<td>846</td>
<td>-8</td>
<td>B6</td>
<td>79</td>
<td>N593JB</td>
<td>JFK</td>
<td>MCO</td>
<td>140</td>
<td>944</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>753</td>
<td>745</td>
<td>8</td>
<td>AA</td>
<td>301</td>
<td>N3ALAA</td>
<td>LGA</td>
<td>ORD</td>
<td>138</td>
<td>733</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>849</td>
<td>851</td>
<td>-2</td>
<td>B6</td>
<td>49</td>
<td>N793JB</td>
<td>JFK</td>
<td>PBI</td>
<td>149</td>
<td>1028</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>853</td>
<td>856</td>
<td>-3</td>
<td>B6</td>
<td>71</td>
<td>N657JB</td>
<td>JFK</td>
<td>TPA</td>
<td>158</td>
<td>1005</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>924</td>
<td>917</td>
<td>7</td>
<td>UA</td>
<td>194</td>
<td>N29129</td>
<td>JFK</td>
<td>LAX</td>
<td>345</td>
<td>2475</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>923</td>
<td>937</td>
<td>-14</td>
<td>UA</td>
<td>1124</td>
<td>N53441</td>
<td>EWR</td>
<td>SFO</td>
<td>361</td>
<td>2565</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>941</td>
<td>910</td>
<td>31</td>
<td>AA</td>
<td>707</td>
<td>N3DUAA</td>
<td>LGA</td>
<td>DFW</td>
<td>257</td>
<td>1389</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>559</td>
<td>0</td>
<td>702</td>
<td>706</td>
<td>-4</td>
<td>B6</td>
<td>1806</td>
<td>N708JB</td>
<td>JFK</td>
<td>BOS</td>
<td>44</td>
<td>187</td>
<td>5</td>
<td>59</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>854</td>
<td>902</td>
<td>-8</td>
<td>UA</td>
<td>1187</td>
<td>N76515</td>
<td>EWR</td>
<td>LAS</td>
<td>337</td>
<td>2227</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>851</td>
<td>858</td>
<td>-7</td>
<td>B6</td>
<td>371</td>
<td>N595JB</td>
<td>LGA</td>
<td>FLL</td>
<td>152</td>
<td>1076</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>837</td>
<td>825</td>
<td>12</td>
<td>MQ</td>
<td>4650</td>
<td>N542MQ</td>
<td>LGA</td>
<td>ATL</td>
<td>134</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>601</td>
<td>600</td>
<td>1</td>
<td>844</td>
<td>850</td>
<td>-6</td>
<td>B6</td>
<td>343</td>
<td>N644JB</td>
<td>EWR</td>
<td>PBI</td>
<td>147</td>
<td>1023</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>610</td>
<td>-8</td>
<td>812</td>
<td>820</td>
<td>-8</td>
<td>DL</td>
<td>1919</td>
<td>N971DL</td>
<td>LGA</td>
<td>MSP</td>
<td>170</td>
<td>1020</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>605</td>
<td>-3</td>
<td>821</td>
<td>805</td>
<td>16</td>
<td>MQ</td>
<td>4401</td>
<td>N730MQ</td>
<td>LGA</td>
<td>DTW</td>
<td>105</td>
<td>502</td>
<td>6</td>
<td>5</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>858</td>
<td>910</td>
<td>-12</td>
<td>AA</td>
<td>1895</td>
<td>N633AA</td>
<td>EWR</td>
<td>MIA</td>
<td>152</td>
<td>1085</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>837</td>
<td>845</td>
<td>-8</td>
<td>DL</td>
<td>1743</td>
<td>N3739P</td>
<td>JFK</td>
<td>ATL</td>
<td>128</td>
<td>760</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>607</td>
<td>607</td>
<td>0</td>
<td>858</td>
<td>915</td>
<td>-17</td>
<td>UA</td>
<td>1077</td>
<td>N53442</td>
<td>EWR</td>
<td>MIA</td>
<td>157</td>
<td>1085</td>
<td>6</td>
<td>7</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>608</td>
<td>600</td>
<td>8</td>
<td>807</td>
<td>735</td>
<td>32</td>
<td>MQ</td>
<td>3768</td>
<td>N9EAMQ</td>
<td>EWR</td>
<td>ORD</td>
<td>139</td>
<td>719</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>611</td>
<td>600</td>
<td>11</td>
<td>945</td>
<td>931</td>
<td>14</td>
<td>UA</td>
<td>303</td>
<td>N532UA</td>
<td>JFK</td>
<td>SFO</td>
<td>366</td>
<td>2586</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>613</td>
<td>610</td>
<td>3</td>
<td>925</td>
<td>921</td>
<td>4</td>
<td>B6</td>
<td>135</td>
<td>N635JB</td>
<td>JFK</td>
<td>RSW</td>
<td>175</td>
<td>1074</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>1039</td>
<td>1100</td>
<td>-21</td>
<td>B6</td>
<td>709</td>
<td>N794JB</td>
<td>JFK</td>
<td>SJU</td>
<td>182</td>
<td>1598</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>833</td>
<td>842</td>
<td>-9</td>
<td>DL</td>
<td>575</td>
<td>N326NB</td>
<td>EWR</td>
<td>ATL</td>
<td>120</td>
<td>746</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2155</td>
<td>2039</td>
<td>76</td>
<td>253</td>
<td>2355</td>
<td>NA</td>
<td>B6</td>
<td>1205</td>
<td>N627JB</td>
<td>JFK</td>
<td>PDX</td>
<td>NA</td>
<td>2454</td>
<td>20</td>
<td>39</td>
<td>2013-12-31 20:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2155</td>
<td>2150</td>
<td>5</td>
<td>110</td>
<td>51</td>
<td>19</td>
<td>B6</td>
<td>1901</td>
<td>N729JB</td>
<td>JFK</td>
<td>FLL</td>
<td>164</td>
<td>1069</td>
<td>21</td>
<td>50</td>
<td>2013-12-31 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2159</td>
<td>2155</td>
<td>4</td>
<td>55</td>
<td>46</td>
<td>9</td>
<td>B6</td>
<td>2053</td>
<td>N593JB</td>
<td>JFK</td>
<td>PBI</td>
<td>155</td>
<td>1028</td>
<td>21</td>
<td>55</td>
<td>2013-12-31 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2206</td>
<td>2110</td>
<td>56</td>
<td>44</td>
<td>2339</td>
<td>65</td>
<td>B6</td>
<td>775</td>
<td>N184JB</td>
<td>JFK</td>
<td>MSY</td>
<td>195</td>
<td>1182</td>
<td>21</td>
<td>10</td>
<td>2013-12-31 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2211</td>
<td>2159</td>
<td>12</td>
<td>100</td>
<td>45</td>
<td>15</td>
<td>B6</td>
<td>1183</td>
<td>N715JB</td>
<td>JFK</td>
<td>MCO</td>
<td>148</td>
<td>944</td>
<td>21</td>
<td>59</td>
<td>2013-12-31 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2218</td>
<td>2219</td>
<td>-1</td>
<td>315</td>
<td>304</td>
<td>11</td>
<td>B6</td>
<td>1203</td>
<td>N625JB</td>
<td>JFK</td>
<td>SJU</td>
<td>202</td>
<td>1598</td>
<td>22</td>
<td>19</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2235</td>
<td>2245</td>
<td>-10</td>
<td>2351</td>
<td>2355</td>
<td>-4</td>
<td>B6</td>
<td>234</td>
<td>N355JB</td>
<td>JFK</td>
<td>BTV</td>
<td>49</td>
<td>266</td>
<td>22</td>
<td>45</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2245</td>
<td>2250</td>
<td>-5</td>
<td>2359</td>
<td>2356</td>
<td>3</td>
<td>B6</td>
<td>1816</td>
<td>N318JB</td>
<td>JFK</td>
<td>SYR</td>
<td>51</td>
<td>209</td>
<td>22</td>
<td>50</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2310</td>
<td>2255</td>
<td>15</td>
<td>7</td>
<td>2356</td>
<td>11</td>
<td>B6</td>
<td>718</td>
<td>N279JB</td>
<td>JFK</td>
<td>BOS</td>
<td>40</td>
<td>187</td>
<td>22</td>
<td>55</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2321</td>
<td>2250</td>
<td>31</td>
<td>46</td>
<td>8</td>
<td>38</td>
<td>B6</td>
<td>2002</td>
<td>N179JB</td>
<td>JFK</td>
<td>BUF</td>
<td>66</td>
<td>301</td>
<td>22</td>
<td>50</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2328</td>
<td>2330</td>
<td>-2</td>
<td>412</td>
<td>409</td>
<td>3</td>
<td>B6</td>
<td>1389</td>
<td>N651JB</td>
<td>EWR</td>
<td>SJU</td>
<td>198</td>
<td>1608</td>
<td>23</td>
<td>30</td>
<td>2013-12-31 23:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2332</td>
<td>2245</td>
<td>47</td>
<td>58</td>
<td>3</td>
<td>55</td>
<td>B6</td>
<td>486</td>
<td>N334JB</td>
<td>JFK</td>
<td>ROC</td>
<td>60</td>
<td>264</td>
<td>22</td>
<td>45</td>
<td>2013-12-31 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2355</td>
<td>2359</td>
<td>-4</td>
<td>430</td>
<td>440</td>
<td>-10</td>
<td>B6</td>
<td>1503</td>
<td>N509JB</td>
<td>JFK</td>
<td>SJU</td>
<td>195</td>
<td>1598</td>
<td>23</td>
<td>59</td>
<td>2013-12-31 23:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>2356</td>
<td>2359</td>
<td>-3</td>
<td>436</td>
<td>445</td>
<td>-9</td>
<td>B6</td>
<td>745</td>
<td>N665JB</td>
<td>JFK</td>
<td>PSE</td>
<td>200</td>
<td>1617</td>
<td>23</td>
<td>59</td>
<td>2013-12-31 23:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1520</td>
<td>NA</td>
<td>NA</td>
<td>1705</td>
<td>NA</td>
<td>AA</td>
<td>341</td>
<td>N568AA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>15</td>
<td>20</td>
<td>2013-12-31 15:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>2025</td>
<td>NA</td>
<td>NA</td>
<td>2205</td>
<td>NA</td>
<td>AA</td>
<td>371</td>
<td>N482AA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>20</td>
<td>25</td>
<td>2013-12-31 20:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1932</td>
<td>NA</td>
<td>NA</td>
<td>2305</td>
<td>NA</td>
<td>B6</td>
<td>161</td>
<td>N516JB</td>
<td>JFK</td>
<td>SMF</td>
<td>NA</td>
<td>2521</td>
<td>19</td>
<td>32</td>
<td>2013-12-31 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1505</td>
<td>NA</td>
<td>NA</td>
<td>1725</td>
<td>NA</td>
<td>EV</td>
<td>4181</td>
<td>N24103</td>
<td>EWR</td>
<td>MCI</td>
<td>NA</td>
<td>1092</td>
<td>15</td>
<td>5</td>
<td>2013-12-31 15:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1000</td>
<td>NA</td>
<td>NA</td>
<td>1252</td>
<td>NA</td>
<td>UA</td>
<td>1124</td>
<td>NA</td>
<td>EWR</td>
<td>EGE</td>
<td>NA</td>
<td>1725</td>
<td>10</td>
<td>0</td>
<td>2013-12-31 10:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>840</td>
<td>NA</td>
<td>NA</td>
<td>1205</td>
<td>NA</td>
<td>UA</td>
<td>1151</td>
<td>NA</td>
<td>EWR</td>
<td>SEA</td>
<td>NA</td>
<td>2402</td>
<td>8</td>
<td>40</td>
<td>2013-12-31 08:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>754</td>
<td>NA</td>
<td>NA</td>
<td>1118</td>
<td>NA</td>
<td>UA</td>
<td>1455</td>
<td>NA</td>
<td>EWR</td>
<td>LAX</td>
<td>NA</td>
<td>2454</td>
<td>7</td>
<td>54</td>
<td>2013-12-31 07:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>2000</td>
<td>NA</td>
<td>NA</td>
<td>2146</td>
<td>NA</td>
<td>UA</td>
<td>1482</td>
<td>NA</td>
<td>EWR</td>
<td>ORD</td>
<td>NA</td>
<td>719</td>
<td>20</td>
<td>0</td>
<td>2013-12-31 20:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1500</td>
<td>NA</td>
<td>NA</td>
<td>1817</td>
<td>NA</td>
<td>UA</td>
<td>1483</td>
<td>NA</td>
<td>EWR</td>
<td>AUS</td>
<td>NA</td>
<td>1504</td>
<td>15</td>
<td>0</td>
<td>2013-12-31 15:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1430</td>
<td>NA</td>
<td>NA</td>
<td>1750</td>
<td>NA</td>
<td>UA</td>
<td>1493</td>
<td>NA</td>
<td>EWR</td>
<td>LAX</td>
<td>NA</td>
<td>2454</td>
<td>14</td>
<td>30</td>
<td>2013-12-31 14:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>855</td>
<td>NA</td>
<td>NA</td>
<td>1142</td>
<td>NA</td>
<td>UA</td>
<td>1506</td>
<td>NA</td>
<td>EWR</td>
<td>JAC</td>
<td>NA</td>
<td>1874</td>
<td>8</td>
<td>55</td>
<td>2013-12-31 08:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>705</td>
<td>NA</td>
<td>NA</td>
<td>931</td>
<td>NA</td>
<td>UA</td>
<td>1729</td>
<td>NA</td>
<td>EWR</td>
<td>DEN</td>
<td>NA</td>
<td>1605</td>
<td>7</td>
<td>5</td>
<td>2013-12-31 07:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>825</td>
<td>NA</td>
<td>NA</td>
<td>1029</td>
<td>NA</td>
<td>US</td>
<td>1831</td>
<td>NA</td>
<td>JFK</td>
<td>CLT</td>
<td>NA</td>
<td>541</td>
<td>8</td>
<td>25</td>
<td>2013-12-31 08:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>1615</td>
<td>NA</td>
<td>NA</td>
<td>1800</td>
<td>NA</td>
<td>MQ</td>
<td>3301</td>
<td>N844MQ</td>
<td>LGA</td>
<td>RDU</td>
<td>NA</td>
<td>431</td>
<td>16</td>
<td>15</td>
<td>2013-12-31 16:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>600</td>
<td>NA</td>
<td>NA</td>
<td>735</td>
<td>NA</td>
<td>UA</td>
<td>219</td>
<td>NA</td>
<td>EWR</td>
<td>ORD</td>
<td>NA</td>
<td>719</td>
<td>6</td>
<td>0</td>
<td>2013-12-31 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>NA</td>
<td>830</td>
<td>NA</td>
<td>NA</td>
<td>1154</td>
<td>NA</td>
<td>UA</td>
<td>443</td>
<td>NA</td>
<td>JFK</td>
<td>LAX</td>
<td>NA</td>
<td>2475</td>
<td>8</td>
<td>30</td>
<td>2013-12-31 08:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>arrange()</code>的工作方式与<code>filter()</code>函数相似，前者不是选择行，而是改变行的顺序。</p>
<p>它接受的一个数据框和一组作为排序依据的列名作为参数。</p>
<p><code>desc()</code>降序排</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(flights,<span class="fu">desc</span>(arr_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 336776 × 19</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>9</td>
<td>641</td>
<td>900</td>
<td>1301</td>
<td>1242</td>
<td>1530</td>
<td>1272</td>
<td>HA</td>
<td>51</td>
<td>N384HA</td>
<td>JFK</td>
<td>HNL</td>
<td>640</td>
<td>4983</td>
<td>9</td>
<td>0</td>
<td>2013-01-09 09:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>6</td>
<td>15</td>
<td>1432</td>
<td>1935</td>
<td>1137</td>
<td>1607</td>
<td>2120</td>
<td>1127</td>
<td>MQ</td>
<td>3535</td>
<td>N504MQ</td>
<td>JFK</td>
<td>CMH</td>
<td>74</td>
<td>483</td>
<td>19</td>
<td>35</td>
<td>2013-06-15 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>10</td>
<td>1121</td>
<td>1635</td>
<td>1126</td>
<td>1239</td>
<td>1810</td>
<td>1109</td>
<td>MQ</td>
<td>3695</td>
<td>N517MQ</td>
<td>EWR</td>
<td>ORD</td>
<td>111</td>
<td>719</td>
<td>16</td>
<td>35</td>
<td>2013-01-10 16:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>20</td>
<td>1139</td>
<td>1845</td>
<td>1014</td>
<td>1457</td>
<td>2210</td>
<td>1007</td>
<td>AA</td>
<td>177</td>
<td>N338AA</td>
<td>JFK</td>
<td>SFO</td>
<td>354</td>
<td>2586</td>
<td>18</td>
<td>45</td>
<td>2013-09-20 18:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>7</td>
<td>22</td>
<td>845</td>
<td>1600</td>
<td>1005</td>
<td>1044</td>
<td>1815</td>
<td>989</td>
<td>MQ</td>
<td>3075</td>
<td>N665MQ</td>
<td>JFK</td>
<td>CVG</td>
<td>96</td>
<td>589</td>
<td>16</td>
<td>0</td>
<td>2013-07-22 16:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>4</td>
<td>10</td>
<td>1100</td>
<td>1900</td>
<td>960</td>
<td>1342</td>
<td>2211</td>
<td>931</td>
<td>DL</td>
<td>2391</td>
<td>N959DL</td>
<td>JFK</td>
<td>TPA</td>
<td>139</td>
<td>1005</td>
<td>19</td>
<td>0</td>
<td>2013-04-10 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>3</td>
<td>17</td>
<td>2321</td>
<td>810</td>
<td>911</td>
<td>135</td>
<td>1020</td>
<td>915</td>
<td>DL</td>
<td>2119</td>
<td>N927DA</td>
<td>LGA</td>
<td>MSP</td>
<td>167</td>
<td>1020</td>
<td>8</td>
<td>10</td>
<td>2013-03-17 08:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>7</td>
<td>22</td>
<td>2257</td>
<td>759</td>
<td>898</td>
<td>121</td>
<td>1026</td>
<td>895</td>
<td>DL</td>
<td>2047</td>
<td>N6716C</td>
<td>LGA</td>
<td>ATL</td>
<td>109</td>
<td>762</td>
<td>7</td>
<td>59</td>
<td>2013-07-22 07:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>5</td>
<td>756</td>
<td>1700</td>
<td>896</td>
<td>1058</td>
<td>2020</td>
<td>878</td>
<td>AA</td>
<td>172</td>
<td>N5DMAA</td>
<td>EWR</td>
<td>MIA</td>
<td>149</td>
<td>1085</td>
<td>17</td>
<td>0</td>
<td>2013-12-05 17:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>5</td>
<td>3</td>
<td>1133</td>
<td>2055</td>
<td>878</td>
<td>1250</td>
<td>2215</td>
<td>875</td>
<td>MQ</td>
<td>3744</td>
<td>N523MQ</td>
<td>EWR</td>
<td>ORD</td>
<td>112</td>
<td>719</td>
<td>20</td>
<td>55</td>
<td>2013-05-03 20:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>14</td>
<td>830</td>
<td>1845</td>
<td>825</td>
<td>1210</td>
<td>2154</td>
<td>856</td>
<td>DL</td>
<td>2391</td>
<td>N939DL</td>
<td>JFK</td>
<td>TPA</td>
<td>173</td>
<td>1005</td>
<td>18</td>
<td>45</td>
<td>2013-12-14 18:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>5</td>
<td>19</td>
<td>713</td>
<td>1700</td>
<td>853</td>
<td>1007</td>
<td>1955</td>
<td>852</td>
<td>AA</td>
<td>257</td>
<td>N3HEAA</td>
<td>JFK</td>
<td>LAS</td>
<td>323</td>
<td>2248</td>
<td>17</td>
<td>0</td>
<td>2013-05-19 17:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>848</td>
<td>1835</td>
<td>853</td>
<td>1001</td>
<td>1950</td>
<td>851</td>
<td>MQ</td>
<td>3944</td>
<td>N942MQ</td>
<td>JFK</td>
<td>BWI</td>
<td>41</td>
<td>184</td>
<td>18</td>
<td>35</td>
<td>2013-01-01 18:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>6</td>
<td>27</td>
<td>959</td>
<td>1900</td>
<td>899</td>
<td>1236</td>
<td>2226</td>
<td>850</td>
<td>DL</td>
<td>2007</td>
<td>N3762Y</td>
<td>JFK</td>
<td>PDX</td>
<td>313</td>
<td>2454</td>
<td>19</td>
<td>0</td>
<td>2013-06-27 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>19</td>
<td>734</td>
<td>1725</td>
<td>849</td>
<td>1046</td>
<td>2039</td>
<td>847</td>
<td>DL</td>
<td>1223</td>
<td>N375NC</td>
<td>EWR</td>
<td>SLC</td>
<td>290</td>
<td>1969</td>
<td>17</td>
<td>25</td>
<td>2013-12-19 17:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>17</td>
<td>705</td>
<td>1700</td>
<td>845</td>
<td>1026</td>
<td>2020</td>
<td>846</td>
<td>AA</td>
<td>172</td>
<td>N5EMAA</td>
<td>EWR</td>
<td>MIA</td>
<td>145</td>
<td>1085</td>
<td>17</td>
<td>0</td>
<td>2013-12-17 17:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>2</td>
<td>10</td>
<td>2243</td>
<td>830</td>
<td>853</td>
<td>100</td>
<td>1106</td>
<td>834</td>
<td>F9</td>
<td>835</td>
<td>N203FR</td>
<td>LGA</td>
<td>DEN</td>
<td>233</td>
<td>1620</td>
<td>8</td>
<td>30</td>
<td>2013-02-10 08:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>4</td>
<td>19</td>
<td>912</td>
<td>1940</td>
<td>812</td>
<td>1228</td>
<td>2247</td>
<td>821</td>
<td>DL</td>
<td>1435</td>
<td>N900DE</td>
<td>LGA</td>
<td>TPA</td>
<td>174</td>
<td>1010</td>
<td>19</td>
<td>40</td>
<td>2013-04-19 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>6</td>
<td>27</td>
<td>753</td>
<td>1830</td>
<td>803</td>
<td>937</td>
<td>2015</td>
<td>802</td>
<td>AA</td>
<td>2019</td>
<td>N571AA</td>
<td>LGA</td>
<td>STL</td>
<td>134</td>
<td>888</td>
<td>18</td>
<td>30</td>
<td>2013-06-27 18:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>11</td>
<td>3</td>
<td>603</td>
<td>1645</td>
<td>798</td>
<td>829</td>
<td>1913</td>
<td>796</td>
<td>DL</td>
<td>2042</td>
<td>N990AT</td>
<td>EWR</td>
<td>ATL</td>
<td>109</td>
<td>746</td>
<td>16</td>
<td>45</td>
<td>2013-11-03 16:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>3</td>
<td>18</td>
<td>1020</td>
<td>2100</td>
<td>800</td>
<td>1336</td>
<td>32</td>
<td>784</td>
<td>DL</td>
<td>2363</td>
<td>N624AG</td>
<td>JFK</td>
<td>LAX</td>
<td>335</td>
<td>2475</td>
<td>21</td>
<td>0</td>
<td>2013-03-18 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>4</td>
<td>19</td>
<td>606</td>
<td>1725</td>
<td>761</td>
<td>923</td>
<td>2020</td>
<td>783</td>
<td>AA</td>
<td>1901</td>
<td>N3DGAA</td>
<td>JFK</td>
<td>IAH</td>
<td>222</td>
<td>1417</td>
<td>17</td>
<td>25</td>
<td>2013-04-19 17:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>4</td>
<td>19</td>
<td>617</td>
<td>1700</td>
<td>797</td>
<td>858</td>
<td>1955</td>
<td>783</td>
<td>AA</td>
<td>257</td>
<td>N3GJAA</td>
<td>JFK</td>
<td>LAS</td>
<td>313</td>
<td>2248</td>
<td>17</td>
<td>0</td>
<td>2013-04-19 17:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>6</td>
<td>27</td>
<td>732</td>
<td>1825</td>
<td>787</td>
<td>932</td>
<td>2032</td>
<td>780</td>
<td>DL</td>
<td>1715</td>
<td>N335NB</td>
<td>LGA</td>
<td>MSY</td>
<td>160</td>
<td>1183</td>
<td>18</td>
<td>25</td>
<td>2013-06-27 18:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>2</td>
<td>24</td>
<td>1921</td>
<td>615</td>
<td>786</td>
<td>2135</td>
<td>842</td>
<td>773</td>
<td>DL</td>
<td>575</td>
<td>N348NW</td>
<td>EWR</td>
<td>ATL</td>
<td>111</td>
<td>746</td>
<td>6</td>
<td>15</td>
<td>2013-02-24 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>6</td>
<td>27</td>
<td>615</td>
<td>1705</td>
<td>790</td>
<td>853</td>
<td>2004</td>
<td>769</td>
<td>DL</td>
<td>503</td>
<td>N372DA</td>
<td>JFK</td>
<td>SAN</td>
<td>312</td>
<td>2446</td>
<td>17</td>
<td>5</td>
<td>2013-06-27 17:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>2</td>
<td>19</td>
<td>2324</td>
<td>1016</td>
<td>788</td>
<td>114</td>
<td>1227</td>
<td>767</td>
<td>DL</td>
<td>2319</td>
<td>N324US</td>
<td>LGA</td>
<td>MSP</td>
<td>136</td>
<td>1020</td>
<td>10</td>
<td>16</td>
<td>2013-02-19 10:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>2</td>
<td>16</td>
<td>757</td>
<td>1930</td>
<td>747</td>
<td>1013</td>
<td>2149</td>
<td>744</td>
<td>9E</td>
<td>3798</td>
<td>N8940E</td>
<td>JFK</td>
<td>CLT</td>
<td>85</td>
<td>541</td>
<td>19</td>
<td>30</td>
<td>2013-02-16 19:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>4</td>
<td>19</td>
<td>758</td>
<td>1925</td>
<td>753</td>
<td>1049</td>
<td>2225</td>
<td>744</td>
<td>DL</td>
<td>1485</td>
<td>N927DA</td>
<td>LGA</td>
<td>MCO</td>
<td>149</td>
<td>950</td>
<td>19</td>
<td>25</td>
<td>2013-04-19 19:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>10</td>
<td>14</td>
<td>2042</td>
<td>900</td>
<td>702</td>
<td>2255</td>
<td>1127</td>
<td>688</td>
<td>DL</td>
<td>502</td>
<td>N943DL</td>
<td>EWR</td>
<td>ATL</td>
<td>98</td>
<td>746</td>
<td>9</td>
<td>0</td>
<td>2013-10-14 09:00:00</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>25</td>
<td>NA</td>
<td>1655</td>
<td>NA</td>
<td>NA</td>
<td>1840</td>
<td>NA</td>
<td>MQ</td>
<td>3411</td>
<td>N735MQ</td>
<td>LGA</td>
<td>RDU</td>
<td>NA</td>
<td>431</td>
<td>16</td>
<td>55</td>
<td>2013-09-25 16:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>25</td>
<td>NA</td>
<td>1559</td>
<td>NA</td>
<td>NA</td>
<td>1719</td>
<td>NA</td>
<td>MQ</td>
<td>3748</td>
<td>N530MQ</td>
<td>EWR</td>
<td>ORD</td>
<td>NA</td>
<td>719</td>
<td>15</td>
<td>59</td>
<td>2013-09-25 15:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>26</td>
<td>1331</td>
<td>1329</td>
<td>2</td>
<td>1923</td>
<td>1813</td>
<td>NA</td>
<td>UA</td>
<td>15</td>
<td>N67052</td>
<td>EWR</td>
<td>HNL</td>
<td>NA</td>
<td>4963</td>
<td>13</td>
<td>29</td>
<td>2013-09-26 13:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>26</td>
<td>NA</td>
<td>915</td>
<td>NA</td>
<td>NA</td>
<td>1141</td>
<td>NA</td>
<td>EV</td>
<td>5109</td>
<td>N748EV</td>
<td>LGA</td>
<td>CHS</td>
<td>NA</td>
<td>641</td>
<td>9</td>
<td>15</td>
<td>2013-09-26 09:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>26</td>
<td>NA</td>
<td>1400</td>
<td>NA</td>
<td>NA</td>
<td>1512</td>
<td>NA</td>
<td>US</td>
<td>2183</td>
<td>NA</td>
<td>LGA</td>
<td>DCA</td>
<td>NA</td>
<td>214</td>
<td>14</td>
<td>0</td>
<td>2013-09-26 14:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>26</td>
<td>NA</td>
<td>1240</td>
<td>NA</td>
<td>NA</td>
<td>1525</td>
<td>NA</td>
<td>WN</td>
<td>4720</td>
<td>N691WN</td>
<td>EWR</td>
<td>HOU</td>
<td>NA</td>
<td>1411</td>
<td>12</td>
<td>40</td>
<td>2013-09-26 12:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>1332</td>
<td>1329</td>
<td>3</td>
<td>1629</td>
<td>1509</td>
<td>NA</td>
<td>AA</td>
<td>331</td>
<td>N565AA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>13</td>
<td>29</td>
<td>2013-09-27 13:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>2253</td>
<td>1945</td>
<td>188</td>
<td>NA</td>
<td>2146</td>
<td>NA</td>
<td>EV</td>
<td>5306</td>
<td>N605QX</td>
<td>LGA</td>
<td>GSO</td>
<td>NA</td>
<td>461</td>
<td>19</td>
<td>45</td>
<td>2013-09-27 19:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>NA</td>
<td>600</td>
<td>NA</td>
<td>NA</td>
<td>730</td>
<td>NA</td>
<td>AA</td>
<td>301</td>
<td>N584AA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>6</td>
<td>0</td>
<td>2013-09-27 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>NA</td>
<td>2100</td>
<td>NA</td>
<td>NA</td>
<td>2211</td>
<td>NA</td>
<td>US</td>
<td>2164</td>
<td>NA</td>
<td>LGA</td>
<td>BOS</td>
<td>NA</td>
<td>184</td>
<td>21</td>
<td>0</td>
<td>2013-09-27 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>NA</td>
<td>1329</td>
<td>NA</td>
<td>NA</td>
<td>1444</td>
<td>NA</td>
<td>MQ</td>
<td>3760</td>
<td>N505MQ</td>
<td>EWR</td>
<td>ORD</td>
<td>NA</td>
<td>719</td>
<td>13</td>
<td>29</td>
<td>2013-09-27 13:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>27</td>
<td>NA</td>
<td>1600</td>
<td>NA</td>
<td>NA</td>
<td>1739</td>
<td>NA</td>
<td>UA</td>
<td>269</td>
<td>NA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>16</td>
<td>0</td>
<td>2013-09-27 16:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>555</td>
<td>600</td>
<td>-5</td>
<td>953</td>
<td>753</td>
<td>NA</td>
<td>EV</td>
<td>5068</td>
<td>N133EV</td>
<td>EWR</td>
<td>DTW</td>
<td>NA</td>
<td>488</td>
<td>6</td>
<td>0</td>
<td>2013-09-28 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>847</td>
<td>839</td>
<td>8</td>
<td>1130</td>
<td>959</td>
<td>NA</td>
<td>EV</td>
<td>4510</td>
<td>N14542</td>
<td>EWR</td>
<td>MKE</td>
<td>NA</td>
<td>725</td>
<td>8</td>
<td>39</td>
<td>2013-09-28 08:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>1010</td>
<td>1020</td>
<td>-10</td>
<td>1344</td>
<td>1222</td>
<td>NA</td>
<td>EV</td>
<td>4412</td>
<td>N12175</td>
<td>EWR</td>
<td>DSM</td>
<td>NA</td>
<td>1017</td>
<td>10</td>
<td>20</td>
<td>2013-09-28 10:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>1214</td>
<td>1225</td>
<td>-11</td>
<td>1801</td>
<td>1510</td>
<td>NA</td>
<td>AA</td>
<td>300</td>
<td>N488AA</td>
<td>EWR</td>
<td>DFW</td>
<td>NA</td>
<td>1372</td>
<td>12</td>
<td>25</td>
<td>2013-09-28 12:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>NA</td>
<td>1803</td>
<td>NA</td>
<td>NA</td>
<td>1927</td>
<td>NA</td>
<td>EV</td>
<td>5563</td>
<td>N724EV</td>
<td>LGA</td>
<td>BTV</td>
<td>NA</td>
<td>258</td>
<td>18</td>
<td>3</td>
<td>2013-09-28 18:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>NA</td>
<td>910</td>
<td>NA</td>
<td>NA</td>
<td>1220</td>
<td>NA</td>
<td>AA</td>
<td>1</td>
<td>N320AA</td>
<td>JFK</td>
<td>LAX</td>
<td>NA</td>
<td>2475</td>
<td>9</td>
<td>10</td>
<td>2013-09-28 09:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>28</td>
<td>NA</td>
<td>1635</td>
<td>NA</td>
<td>NA</td>
<td>1827</td>
<td>NA</td>
<td>US</td>
<td>581</td>
<td>NA</td>
<td>EWR</td>
<td>CLT</td>
<td>NA</td>
<td>529</td>
<td>16</td>
<td>35</td>
<td>2013-09-28 16:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>29</td>
<td>1734</td>
<td>1711</td>
<td>23</td>
<td>2159</td>
<td>2020</td>
<td>NA</td>
<td>UA</td>
<td>327</td>
<td>N463UA</td>
<td>EWR</td>
<td>PDX</td>
<td>NA</td>
<td>2434</td>
<td>17</td>
<td>11</td>
<td>2013-09-29 17:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>29</td>
<td>NA</td>
<td>2054</td>
<td>NA</td>
<td>NA</td>
<td>2302</td>
<td>NA</td>
<td>EV</td>
<td>4536</td>
<td>N13988</td>
<td>EWR</td>
<td>CVG</td>
<td>NA</td>
<td>569</td>
<td>20</td>
<td>54</td>
<td>2013-09-29 20:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>29</td>
<td>NA</td>
<td>1830</td>
<td>NA</td>
<td>NA</td>
<td>2010</td>
<td>NA</td>
<td>MQ</td>
<td>3134</td>
<td>N508MQ</td>
<td>EWR</td>
<td>ORD</td>
<td>NA</td>
<td>719</td>
<td>18</td>
<td>30</td>
<td>2013-09-29 18:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>29</td>
<td>NA</td>
<td>700</td>
<td>NA</td>
<td>NA</td>
<td>833</td>
<td>NA</td>
<td>UA</td>
<td>331</td>
<td>NA</td>
<td>LGA</td>
<td>ORD</td>
<td>NA</td>
<td>733</td>
<td>7</td>
<td>0</td>
<td>2013-09-29 07:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>NA</td>
<td>715</td>
<td>NA</td>
<td>WN</td>
<td>464</td>
<td>N411WN</td>
<td>EWR</td>
<td>MDW</td>
<td>NA</td>
<td>711</td>
<td>6</td>
<td>0</td>
<td>2013-09-30 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1842</td>
<td>NA</td>
<td>NA</td>
<td>2019</td>
<td>NA</td>
<td>EV</td>
<td>5274</td>
<td>N740EV</td>
<td>LGA</td>
<td>BNA</td>
<td>NA</td>
<td>764</td>
<td>18</td>
<td>42</td>
<td>2013-09-30 18:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1455</td>
<td>NA</td>
<td>NA</td>
<td>1634</td>
<td>NA</td>
<td>9E</td>
<td>3393</td>
<td>NA</td>
<td>JFK</td>
<td>DCA</td>
<td>NA</td>
<td>213</td>
<td>14</td>
<td>55</td>
<td>2013-09-30 14:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>2200</td>
<td>NA</td>
<td>NA</td>
<td>2312</td>
<td>NA</td>
<td>9E</td>
<td>3525</td>
<td>NA</td>
<td>LGA</td>
<td>SYR</td>
<td>NA</td>
<td>198</td>
<td>22</td>
<td>0</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1210</td>
<td>NA</td>
<td>NA</td>
<td>1330</td>
<td>NA</td>
<td>MQ</td>
<td>3461</td>
<td>N535MQ</td>
<td>LGA</td>
<td>BNA</td>
<td>NA</td>
<td>764</td>
<td>12</td>
<td>10</td>
<td>2013-09-30 12:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1159</td>
<td>NA</td>
<td>NA</td>
<td>1344</td>
<td>NA</td>
<td>MQ</td>
<td>3572</td>
<td>N511MQ</td>
<td>LGA</td>
<td>CLE</td>
<td>NA</td>
<td>419</td>
<td>11</td>
<td>59</td>
<td>2013-09-30 11:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>840</td>
<td>NA</td>
<td>NA</td>
<td>1020</td>
<td>NA</td>
<td>MQ</td>
<td>3531</td>
<td>N839MQ</td>
<td>LGA</td>
<td>RDU</td>
<td>NA</td>
<td>431</td>
<td>8</td>
<td>40</td>
<td>2013-09-30 08:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="使用管道的多重组合" class="level4">
<h4 class="anchored" data-anchor-id="使用管道的多重组合">使用管道的多重组合</h4>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights,dest)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>by_dest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 336776 × 19</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>517</td>
<td>515</td>
<td>2</td>
<td>830</td>
<td>819</td>
<td>11</td>
<td>UA</td>
<td>1545</td>
<td>N14228</td>
<td>EWR</td>
<td>IAH</td>
<td>227</td>
<td>1400</td>
<td>5</td>
<td>15</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>533</td>
<td>529</td>
<td>4</td>
<td>850</td>
<td>830</td>
<td>20</td>
<td>UA</td>
<td>1714</td>
<td>N24211</td>
<td>LGA</td>
<td>IAH</td>
<td>227</td>
<td>1416</td>
<td>5</td>
<td>29</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>542</td>
<td>540</td>
<td>2</td>
<td>923</td>
<td>850</td>
<td>33</td>
<td>AA</td>
<td>1141</td>
<td>N619AA</td>
<td>JFK</td>
<td>MIA</td>
<td>160</td>
<td>1089</td>
<td>5</td>
<td>40</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>544</td>
<td>545</td>
<td>-1</td>
<td>1004</td>
<td>1022</td>
<td>-18</td>
<td>B6</td>
<td>725</td>
<td>N804JB</td>
<td>JFK</td>
<td>BQN</td>
<td>183</td>
<td>1576</td>
<td>5</td>
<td>45</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>600</td>
<td>-6</td>
<td>812</td>
<td>837</td>
<td>-25</td>
<td>DL</td>
<td>461</td>
<td>N668DN</td>
<td>LGA</td>
<td>ATL</td>
<td>116</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>558</td>
<td>-4</td>
<td>740</td>
<td>728</td>
<td>12</td>
<td>UA</td>
<td>1696</td>
<td>N39463</td>
<td>EWR</td>
<td>ORD</td>
<td>150</td>
<td>719</td>
<td>5</td>
<td>58</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>555</td>
<td>600</td>
<td>-5</td>
<td>913</td>
<td>854</td>
<td>19</td>
<td>B6</td>
<td>507</td>
<td>N516JB</td>
<td>EWR</td>
<td>FLL</td>
<td>158</td>
<td>1065</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>709</td>
<td>723</td>
<td>-14</td>
<td>EV</td>
<td>5708</td>
<td>N829AS</td>
<td>LGA</td>
<td>IAD</td>
<td>53</td>
<td>229</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>838</td>
<td>846</td>
<td>-8</td>
<td>B6</td>
<td>79</td>
<td>N593JB</td>
<td>JFK</td>
<td>MCO</td>
<td>140</td>
<td>944</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>753</td>
<td>745</td>
<td>8</td>
<td>AA</td>
<td>301</td>
<td>N3ALAA</td>
<td>LGA</td>
<td>ORD</td>
<td>138</td>
<td>733</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>849</td>
<td>851</td>
<td>-2</td>
<td>B6</td>
<td>49</td>
<td>N793JB</td>
<td>JFK</td>
<td>PBI</td>
<td>149</td>
<td>1028</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>853</td>
<td>856</td>
<td>-3</td>
<td>B6</td>
<td>71</td>
<td>N657JB</td>
<td>JFK</td>
<td>TPA</td>
<td>158</td>
<td>1005</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>924</td>
<td>917</td>
<td>7</td>
<td>UA</td>
<td>194</td>
<td>N29129</td>
<td>JFK</td>
<td>LAX</td>
<td>345</td>
<td>2475</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>923</td>
<td>937</td>
<td>-14</td>
<td>UA</td>
<td>1124</td>
<td>N53441</td>
<td>EWR</td>
<td>SFO</td>
<td>361</td>
<td>2565</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>941</td>
<td>910</td>
<td>31</td>
<td>AA</td>
<td>707</td>
<td>N3DUAA</td>
<td>LGA</td>
<td>DFW</td>
<td>257</td>
<td>1389</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>559</td>
<td>0</td>
<td>702</td>
<td>706</td>
<td>-4</td>
<td>B6</td>
<td>1806</td>
<td>N708JB</td>
<td>JFK</td>
<td>BOS</td>
<td>44</td>
<td>187</td>
<td>5</td>
<td>59</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>854</td>
<td>902</td>
<td>-8</td>
<td>UA</td>
<td>1187</td>
<td>N76515</td>
<td>EWR</td>
<td>LAS</td>
<td>337</td>
<td>2227</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>851</td>
<td>858</td>
<td>-7</td>
<td>B6</td>
<td>371</td>
<td>N595JB</td>
<td>LGA</td>
<td>FLL</td>
<td>152</td>
<td>1076</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>837</td>
<td>825</td>
<td>12</td>
<td>MQ</td>
<td>4650</td>
<td>N542MQ</td>
<td>LGA</td>
<td>ATL</td>
<td>134</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>601</td>
<td>600</td>
<td>1</td>
<td>844</td>
<td>850</td>
<td>-6</td>
<td>B6</td>
<td>343</td>
<td>N644JB</td>
<td>EWR</td>
<td>PBI</td>
<td>147</td>
<td>1023</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>610</td>
<td>-8</td>
<td>812</td>
<td>820</td>
<td>-8</td>
<td>DL</td>
<td>1919</td>
<td>N971DL</td>
<td>LGA</td>
<td>MSP</td>
<td>170</td>
<td>1020</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>605</td>
<td>-3</td>
<td>821</td>
<td>805</td>
<td>16</td>
<td>MQ</td>
<td>4401</td>
<td>N730MQ</td>
<td>LGA</td>
<td>DTW</td>
<td>105</td>
<td>502</td>
<td>6</td>
<td>5</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>858</td>
<td>910</td>
<td>-12</td>
<td>AA</td>
<td>1895</td>
<td>N633AA</td>
<td>EWR</td>
<td>MIA</td>
<td>152</td>
<td>1085</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>837</td>
<td>845</td>
<td>-8</td>
<td>DL</td>
<td>1743</td>
<td>N3739P</td>
<td>JFK</td>
<td>ATL</td>
<td>128</td>
<td>760</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>607</td>
<td>607</td>
<td>0</td>
<td>858</td>
<td>915</td>
<td>-17</td>
<td>UA</td>
<td>1077</td>
<td>N53442</td>
<td>EWR</td>
<td>MIA</td>
<td>157</td>
<td>1085</td>
<td>6</td>
<td>7</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>608</td>
<td>600</td>
<td>8</td>
<td>807</td>
<td>735</td>
<td>32</td>
<td>MQ</td>
<td>3768</td>
<td>N9EAMQ</td>
<td>EWR</td>
<td>ORD</td>
<td>139</td>
<td>719</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>611</td>
<td>600</td>
<td>11</td>
<td>945</td>
<td>931</td>
<td>14</td>
<td>UA</td>
<td>303</td>
<td>N532UA</td>
<td>JFK</td>
<td>SFO</td>
<td>366</td>
<td>2586</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>613</td>
<td>610</td>
<td>3</td>
<td>925</td>
<td>921</td>
<td>4</td>
<td>B6</td>
<td>135</td>
<td>N635JB</td>
<td>JFK</td>
<td>RSW</td>
<td>175</td>
<td>1074</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>1039</td>
<td>1100</td>
<td>-21</td>
<td>B6</td>
<td>709</td>
<td>N794JB</td>
<td>JFK</td>
<td>SJU</td>
<td>182</td>
<td>1598</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>833</td>
<td>842</td>
<td>-9</td>
<td>DL</td>
<td>575</td>
<td>N326NB</td>
<td>EWR</td>
<td>ATL</td>
<td>120</td>
<td>746</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2123</td>
<td>2125</td>
<td>-2</td>
<td>2223</td>
<td>2247</td>
<td>-24</td>
<td>EV</td>
<td>5489</td>
<td>N712EV</td>
<td>LGA</td>
<td>CHO</td>
<td>45</td>
<td>305</td>
<td>21</td>
<td>25</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2127</td>
<td>2129</td>
<td>-2</td>
<td>2314</td>
<td>2323</td>
<td>-9</td>
<td>EV</td>
<td>3833</td>
<td>N16546</td>
<td>EWR</td>
<td>CLT</td>
<td>72</td>
<td>529</td>
<td>21</td>
<td>29</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2128</td>
<td>2130</td>
<td>-2</td>
<td>2328</td>
<td>2359</td>
<td>-31</td>
<td>B6</td>
<td>97</td>
<td>N807JB</td>
<td>JFK</td>
<td>DEN</td>
<td>213</td>
<td>1626</td>
<td>21</td>
<td>30</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2129</td>
<td>2059</td>
<td>30</td>
<td>2230</td>
<td>2232</td>
<td>-2</td>
<td>EV</td>
<td>5048</td>
<td>N751EV</td>
<td>LGA</td>
<td>RIC</td>
<td>45</td>
<td>292</td>
<td>20</td>
<td>59</td>
<td>2013-09-30 20:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2131</td>
<td>2140</td>
<td>-9</td>
<td>2225</td>
<td>2255</td>
<td>-30</td>
<td>MQ</td>
<td>3621</td>
<td>N807MQ</td>
<td>JFK</td>
<td>DCA</td>
<td>36</td>
<td>213</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2140</td>
<td>2140</td>
<td>0</td>
<td>10</td>
<td>40</td>
<td>-30</td>
<td>AA</td>
<td>185</td>
<td>N335AA</td>
<td>JFK</td>
<td>LAX</td>
<td>298</td>
<td>2475</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2142</td>
<td>2129</td>
<td>13</td>
<td>2250</td>
<td>2239</td>
<td>11</td>
<td>EV</td>
<td>4509</td>
<td>N12957</td>
<td>EWR</td>
<td>PWM</td>
<td>47</td>
<td>284</td>
<td>21</td>
<td>29</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2145</td>
<td>2145</td>
<td>0</td>
<td>115</td>
<td>140</td>
<td>-25</td>
<td>B6</td>
<td>1103</td>
<td>N633JB</td>
<td>JFK</td>
<td>SJU</td>
<td>192</td>
<td>1598</td>
<td>21</td>
<td>45</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2147</td>
<td>2137</td>
<td>10</td>
<td>30</td>
<td>27</td>
<td>3</td>
<td>B6</td>
<td>1371</td>
<td>N627JB</td>
<td>LGA</td>
<td>FLL</td>
<td>139</td>
<td>1076</td>
<td>21</td>
<td>37</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2149</td>
<td>2156</td>
<td>-7</td>
<td>2245</td>
<td>2308</td>
<td>-23</td>
<td>UA</td>
<td>523</td>
<td>N813UA</td>
<td>EWR</td>
<td>BOS</td>
<td>37</td>
<td>200</td>
<td>21</td>
<td>56</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2150</td>
<td>2159</td>
<td>-9</td>
<td>2250</td>
<td>2306</td>
<td>-16</td>
<td>EV</td>
<td>3842</td>
<td>N10575</td>
<td>EWR</td>
<td>MHT</td>
<td>39</td>
<td>209</td>
<td>21</td>
<td>59</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2159</td>
<td>1845</td>
<td>194</td>
<td>2344</td>
<td>2030</td>
<td>194</td>
<td>9E</td>
<td>3320</td>
<td>N906XJ</td>
<td>JFK</td>
<td>BUF</td>
<td>50</td>
<td>301</td>
<td>18</td>
<td>45</td>
<td>2013-09-30 18:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2203</td>
<td>2205</td>
<td>-2</td>
<td>2339</td>
<td>2331</td>
<td>8</td>
<td>EV</td>
<td>5311</td>
<td>N722EV</td>
<td>LGA</td>
<td>BGR</td>
<td>61</td>
<td>378</td>
<td>22</td>
<td>5</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2207</td>
<td>2140</td>
<td>27</td>
<td>2257</td>
<td>2250</td>
<td>7</td>
<td>MQ</td>
<td>3660</td>
<td>N532MQ</td>
<td>LGA</td>
<td>BNA</td>
<td>97</td>
<td>764</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2211</td>
<td>2059</td>
<td>72</td>
<td>2339</td>
<td>2242</td>
<td>57</td>
<td>EV</td>
<td>4672</td>
<td>N12145</td>
<td>EWR</td>
<td>STL</td>
<td>120</td>
<td>872</td>
<td>20</td>
<td>59</td>
<td>2013-09-30 20:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2231</td>
<td>2245</td>
<td>-14</td>
<td>2335</td>
<td>2356</td>
<td>-21</td>
<td>B6</td>
<td>108</td>
<td>N193JB</td>
<td>JFK</td>
<td>PWM</td>
<td>48</td>
<td>273</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2233</td>
<td>2113</td>
<td>80</td>
<td>112</td>
<td>30</td>
<td>42</td>
<td>UA</td>
<td>471</td>
<td>N578UA</td>
<td>EWR</td>
<td>SFO</td>
<td>318</td>
<td>2565</td>
<td>21</td>
<td>13</td>
<td>2013-09-30 21:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2235</td>
<td>2001</td>
<td>154</td>
<td>59</td>
<td>2249</td>
<td>130</td>
<td>B6</td>
<td>1083</td>
<td>N804JB</td>
<td>JFK</td>
<td>MCO</td>
<td>123</td>
<td>944</td>
<td>20</td>
<td>1</td>
<td>2013-09-30 20:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2237</td>
<td>2245</td>
<td>-8</td>
<td>2345</td>
<td>2353</td>
<td>-8</td>
<td>B6</td>
<td>234</td>
<td>N318JB</td>
<td>JFK</td>
<td>BTV</td>
<td>43</td>
<td>266</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2240</td>
<td>2245</td>
<td>-5</td>
<td>2334</td>
<td>2351</td>
<td>-17</td>
<td>B6</td>
<td>1816</td>
<td>N354JB</td>
<td>JFK</td>
<td>SYR</td>
<td>41</td>
<td>209</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2240</td>
<td>2250</td>
<td>-10</td>
<td>2347</td>
<td>7</td>
<td>-20</td>
<td>B6</td>
<td>2002</td>
<td>N281JB</td>
<td>JFK</td>
<td>BUF</td>
<td>52</td>
<td>301</td>
<td>22</td>
<td>50</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2241</td>
<td>2246</td>
<td>-5</td>
<td>2345</td>
<td>1</td>
<td>-16</td>
<td>B6</td>
<td>486</td>
<td>N346JB</td>
<td>JFK</td>
<td>ROC</td>
<td>47</td>
<td>264</td>
<td>22</td>
<td>46</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2307</td>
<td>2255</td>
<td>12</td>
<td>2359</td>
<td>2358</td>
<td>1</td>
<td>B6</td>
<td>718</td>
<td>N565JB</td>
<td>JFK</td>
<td>BOS</td>
<td>33</td>
<td>187</td>
<td>22</td>
<td>55</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2349</td>
<td>2359</td>
<td>-10</td>
<td>325</td>
<td>350</td>
<td>-25</td>
<td>B6</td>
<td>745</td>
<td>N516JB</td>
<td>JFK</td>
<td>PSE</td>
<td>196</td>
<td>1617</td>
<td>23</td>
<td>59</td>
<td>2013-09-30 23:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1842</td>
<td>NA</td>
<td>NA</td>
<td>2019</td>
<td>NA</td>
<td>EV</td>
<td>5274</td>
<td>N740EV</td>
<td>LGA</td>
<td>BNA</td>
<td>NA</td>
<td>764</td>
<td>18</td>
<td>42</td>
<td>2013-09-30 18:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1455</td>
<td>NA</td>
<td>NA</td>
<td>1634</td>
<td>NA</td>
<td>9E</td>
<td>3393</td>
<td>NA</td>
<td>JFK</td>
<td>DCA</td>
<td>NA</td>
<td>213</td>
<td>14</td>
<td>55</td>
<td>2013-09-30 14:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>2200</td>
<td>NA</td>
<td>NA</td>
<td>2312</td>
<td>NA</td>
<td>9E</td>
<td>3525</td>
<td>NA</td>
<td>LGA</td>
<td>SYR</td>
<td>NA</td>
<td>198</td>
<td>22</td>
<td>0</td>
<td>2013-09-30 22:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1210</td>
<td>NA</td>
<td>NA</td>
<td>1330</td>
<td>NA</td>
<td>MQ</td>
<td>3461</td>
<td>N535MQ</td>
<td>LGA</td>
<td>BNA</td>
<td>NA</td>
<td>764</td>
<td>12</td>
<td>10</td>
<td>2013-09-30 12:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1159</td>
<td>NA</td>
<td>NA</td>
<td>1344</td>
<td>NA</td>
<td>MQ</td>
<td>3572</td>
<td>N511MQ</td>
<td>LGA</td>
<td>CLE</td>
<td>NA</td>
<td>419</td>
<td>11</td>
<td>59</td>
<td>2013-09-30 11:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>840</td>
<td>NA</td>
<td>NA</td>
<td>1020</td>
<td>NA</td>
<td>MQ</td>
<td>3531</td>
<td>N839MQ</td>
<td>LGA</td>
<td>RDU</td>
<td>NA</td>
<td>431</td>
<td>8</td>
<td>40</td>
<td>2013-09-30 08:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> <span class="fu">summarize</span>(by_dest,<span class="at">count=</span><span class="fu">n</span>(),<span class="at">dist =</span> <span class="fu">mean</span>(distance,<span class="at">na.rm=</span><span class="cn">TRUE</span>),<span class="at">delay=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>delay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 105 × 4</caption>
<thead>
<tr class="header">
<th scope="col">dest</th>
<th scope="col">count</th>
<th scope="col">dist</th>
<th scope="col">delay</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ABQ</td>
<td>254</td>
<td>1826.0000</td>
<td>4.381890</td>
</tr>
<tr class="even">
<td>ACK</td>
<td>265</td>
<td>199.0000</td>
<td>4.852273</td>
</tr>
<tr class="odd">
<td>ALB</td>
<td>439</td>
<td>143.0000</td>
<td>14.397129</td>
</tr>
<tr class="even">
<td>ANC</td>
<td>8</td>
<td>3370.0000</td>
<td>-2.500000</td>
</tr>
<tr class="odd">
<td>ATL</td>
<td>17215</td>
<td>757.1082</td>
<td>11.300113</td>
</tr>
<tr class="even">
<td>AUS</td>
<td>2439</td>
<td>1514.2530</td>
<td>6.019909</td>
</tr>
<tr class="odd">
<td>AVL</td>
<td>275</td>
<td>583.5818</td>
<td>8.003831</td>
</tr>
<tr class="even">
<td>BDL</td>
<td>443</td>
<td>116.0000</td>
<td>7.048544</td>
</tr>
<tr class="odd">
<td>BGR</td>
<td>375</td>
<td>378.0000</td>
<td>8.027933</td>
</tr>
<tr class="even">
<td>BHM</td>
<td>297</td>
<td>865.9966</td>
<td>16.877323</td>
</tr>
<tr class="odd">
<td>BNA</td>
<td>6333</td>
<td>758.2135</td>
<td>11.812459</td>
</tr>
<tr class="even">
<td>BOS</td>
<td>15508</td>
<td>190.6370</td>
<td>2.914392</td>
</tr>
<tr class="odd">
<td>BQN</td>
<td>896</td>
<td>1578.9833</td>
<td>8.245495</td>
</tr>
<tr class="even">
<td>BTV</td>
<td>2589</td>
<td>265.0915</td>
<td>8.950996</td>
</tr>
<tr class="odd">
<td>BUF</td>
<td>4681</td>
<td>296.8084</td>
<td>8.945952</td>
</tr>
<tr class="even">
<td>BUR</td>
<td>371</td>
<td>2465.0000</td>
<td>8.175676</td>
</tr>
<tr class="odd">
<td>BWI</td>
<td>1781</td>
<td>179.4183</td>
<td>10.726734</td>
</tr>
<tr class="even">
<td>BZN</td>
<td>36</td>
<td>1882.0000</td>
<td>7.600000</td>
</tr>
<tr class="odd">
<td>CAE</td>
<td>116</td>
<td>603.5517</td>
<td>41.764151</td>
</tr>
<tr class="even">
<td>CAK</td>
<td>864</td>
<td>397.0000</td>
<td>19.698337</td>
</tr>
<tr class="odd">
<td>CHO</td>
<td>52</td>
<td>305.0000</td>
<td>9.500000</td>
</tr>
<tr class="even">
<td>CHS</td>
<td>2884</td>
<td>632.9168</td>
<td>10.592968</td>
</tr>
<tr class="odd">
<td>CLE</td>
<td>4573</td>
<td>414.1743</td>
<td>9.181611</td>
</tr>
<tr class="even">
<td>CLT</td>
<td>14064</td>
<td>538.0273</td>
<td>7.360319</td>
</tr>
<tr class="odd">
<td>CMH</td>
<td>3524</td>
<td>476.5551</td>
<td>10.601323</td>
</tr>
<tr class="even">
<td>CRW</td>
<td>138</td>
<td>444.0000</td>
<td>14.671642</td>
</tr>
<tr class="odd">
<td>CVG</td>
<td>3941</td>
<td>575.1599</td>
<td>15.364564</td>
</tr>
<tr class="even">
<td>DAY</td>
<td>1525</td>
<td>537.1023</td>
<td>12.680486</td>
</tr>
<tr class="odd">
<td>DCA</td>
<td>9705</td>
<td>211.0062</td>
<td>9.066952</td>
</tr>
<tr class="even">
<td>DEN</td>
<td>7266</td>
<td>1614.6784</td>
<td>8.606500</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>PIT</td>
<td>2875</td>
<td>334.0612</td>
<td>7.6809905</td>
</tr>
<tr class="odd">
<td>PSE</td>
<td>365</td>
<td>1617.0000</td>
<td>7.8715084</td>
</tr>
<tr class="even">
<td>PSP</td>
<td>19</td>
<td>2378.0000</td>
<td>-12.7222222</td>
</tr>
<tr class="odd">
<td>PVD</td>
<td>376</td>
<td>160.0000</td>
<td>16.2346369</td>
</tr>
<tr class="even">
<td>PWM</td>
<td>2352</td>
<td>276.1284</td>
<td>11.6604021</td>
</tr>
<tr class="odd">
<td>RDU</td>
<td>8163</td>
<td>426.7577</td>
<td>10.0523810</td>
</tr>
<tr class="even">
<td>RIC</td>
<td>2454</td>
<td>281.4046</td>
<td>20.1112532</td>
</tr>
<tr class="odd">
<td>ROC</td>
<td>2416</td>
<td>259.2508</td>
<td>11.5606446</td>
</tr>
<tr class="even">
<td>RSW</td>
<td>3537</td>
<td>1072.8533</td>
<td>3.2381496</td>
</tr>
<tr class="odd">
<td>SAN</td>
<td>2737</td>
<td>2437.2992</td>
<td>3.1391657</td>
</tr>
<tr class="even">
<td>SAT</td>
<td>686</td>
<td>1578.3411</td>
<td>6.9453718</td>
</tr>
<tr class="odd">
<td>SAV</td>
<td>804</td>
<td>709.1841</td>
<td>15.1295060</td>
</tr>
<tr class="even">
<td>SBN</td>
<td>10</td>
<td>645.4000</td>
<td>6.5000000</td>
</tr>
<tr class="odd">
<td>SDF</td>
<td>1157</td>
<td>645.9836</td>
<td>12.6693841</td>
</tr>
<tr class="even">
<td>SEA</td>
<td>3923</td>
<td>2412.6653</td>
<td>-1.0990991</td>
</tr>
<tr class="odd">
<td>SFO</td>
<td>13331</td>
<td>2577.9236</td>
<td>2.6728915</td>
</tr>
<tr class="even">
<td>SJC</td>
<td>329</td>
<td>2569.0000</td>
<td>3.4481707</td>
</tr>
<tr class="odd">
<td>SJU</td>
<td>5819</td>
<td>1599.8336</td>
<td>2.5205266</td>
</tr>
<tr class="even">
<td>SLC</td>
<td>2467</td>
<td>1986.9866</td>
<td>0.1762546</td>
</tr>
<tr class="odd">
<td>SMF</td>
<td>284</td>
<td>2521.0000</td>
<td>12.1099291</td>
</tr>
<tr class="even">
<td>SNA</td>
<td>825</td>
<td>2434.0000</td>
<td>-7.8682266</td>
</tr>
<tr class="odd">
<td>SRQ</td>
<td>1211</td>
<td>1044.6515</td>
<td>3.0824313</td>
</tr>
<tr class="even">
<td>STL</td>
<td>4339</td>
<td>878.7232</td>
<td>11.0784645</td>
</tr>
<tr class="odd">
<td>STT</td>
<td>522</td>
<td>1626.9828</td>
<td>-3.8359073</td>
</tr>
<tr class="even">
<td>SYR</td>
<td>1761</td>
<td>205.9216</td>
<td>8.9039250</td>
</tr>
<tr class="odd">
<td>TPA</td>
<td>7466</td>
<td>1003.9356</td>
<td>7.4085250</td>
</tr>
<tr class="even">
<td>TUL</td>
<td>315</td>
<td>1215.0000</td>
<td>33.6598639</td>
</tr>
<tr class="odd">
<td>TVC</td>
<td>101</td>
<td>652.3861</td>
<td>12.9684211</td>
</tr>
<tr class="even">
<td>TYS</td>
<td>631</td>
<td>638.8098</td>
<td>24.0692042</td>
</tr>
<tr class="odd">
<td>XNA</td>
<td>1036</td>
<td>1142.5058</td>
<td>7.4657258</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(delay,count<span class="sc">&gt;</span><span class="dv">20</span>,dest<span class="sc">!=</span> <span class="st">"HNL"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>delay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 96 × 4</caption>
<thead>
<tr class="header">
<th scope="col">dest</th>
<th scope="col">count</th>
<th scope="col">dist</th>
<th scope="col">delay</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ABQ</td>
<td>254</td>
<td>1826.0000</td>
<td>4.3818898</td>
</tr>
<tr class="even">
<td>ACK</td>
<td>265</td>
<td>199.0000</td>
<td>4.8522727</td>
</tr>
<tr class="odd">
<td>ALB</td>
<td>439</td>
<td>143.0000</td>
<td>14.3971292</td>
</tr>
<tr class="even">
<td>ATL</td>
<td>17215</td>
<td>757.1082</td>
<td>11.3001128</td>
</tr>
<tr class="odd">
<td>AUS</td>
<td>2439</td>
<td>1514.2530</td>
<td>6.0199088</td>
</tr>
<tr class="even">
<td>AVL</td>
<td>275</td>
<td>583.5818</td>
<td>8.0038314</td>
</tr>
<tr class="odd">
<td>BDL</td>
<td>443</td>
<td>116.0000</td>
<td>7.0485437</td>
</tr>
<tr class="even">
<td>BGR</td>
<td>375</td>
<td>378.0000</td>
<td>8.0279330</td>
</tr>
<tr class="odd">
<td>BHM</td>
<td>297</td>
<td>865.9966</td>
<td>16.8773234</td>
</tr>
<tr class="even">
<td>BNA</td>
<td>6333</td>
<td>758.2135</td>
<td>11.8124589</td>
</tr>
<tr class="odd">
<td>BOS</td>
<td>15508</td>
<td>190.6370</td>
<td>2.9143922</td>
</tr>
<tr class="even">
<td>BQN</td>
<td>896</td>
<td>1578.9833</td>
<td>8.2454955</td>
</tr>
<tr class="odd">
<td>BTV</td>
<td>2589</td>
<td>265.0915</td>
<td>8.9509960</td>
</tr>
<tr class="even">
<td>BUF</td>
<td>4681</td>
<td>296.8084</td>
<td>8.9459519</td>
</tr>
<tr class="odd">
<td>BUR</td>
<td>371</td>
<td>2465.0000</td>
<td>8.1756757</td>
</tr>
<tr class="even">
<td>BWI</td>
<td>1781</td>
<td>179.4183</td>
<td>10.7267338</td>
</tr>
<tr class="odd">
<td>BZN</td>
<td>36</td>
<td>1882.0000</td>
<td>7.6000000</td>
</tr>
<tr class="even">
<td>CAE</td>
<td>116</td>
<td>603.5517</td>
<td>41.7641509</td>
</tr>
<tr class="odd">
<td>CAK</td>
<td>864</td>
<td>397.0000</td>
<td>19.6983373</td>
</tr>
<tr class="even">
<td>CHO</td>
<td>52</td>
<td>305.0000</td>
<td>9.5000000</td>
</tr>
<tr class="odd">
<td>CHS</td>
<td>2884</td>
<td>632.9168</td>
<td>10.5929685</td>
</tr>
<tr class="even">
<td>CLE</td>
<td>4573</td>
<td>414.1743</td>
<td>9.1816113</td>
</tr>
<tr class="odd">
<td>CLT</td>
<td>14064</td>
<td>538.0273</td>
<td>7.3603189</td>
</tr>
<tr class="even">
<td>CMH</td>
<td>3524</td>
<td>476.5551</td>
<td>10.6013229</td>
</tr>
<tr class="odd">
<td>CRW</td>
<td>138</td>
<td>444.0000</td>
<td>14.6716418</td>
</tr>
<tr class="even">
<td>CVG</td>
<td>3941</td>
<td>575.1599</td>
<td>15.3645638</td>
</tr>
<tr class="odd">
<td>DAY</td>
<td>1525</td>
<td>537.1023</td>
<td>12.6804861</td>
</tr>
<tr class="even">
<td>DCA</td>
<td>9705</td>
<td>211.0062</td>
<td>9.0669520</td>
</tr>
<tr class="odd">
<td>DEN</td>
<td>7266</td>
<td>1614.6784</td>
<td>8.6065002</td>
</tr>
<tr class="even">
<td>DFW</td>
<td>8738</td>
<td>1383.0430</td>
<td>0.3221268</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>PHL</td>
<td>1632</td>
<td>94.32353</td>
<td>10.1271901</td>
</tr>
<tr class="odd">
<td>PHX</td>
<td>4656</td>
<td>2141.30326</td>
<td>2.0970473</td>
</tr>
<tr class="even">
<td>PIT</td>
<td>2875</td>
<td>334.06122</td>
<td>7.6809905</td>
</tr>
<tr class="odd">
<td>PSE</td>
<td>365</td>
<td>1617.00000</td>
<td>7.8715084</td>
</tr>
<tr class="even">
<td>PVD</td>
<td>376</td>
<td>160.00000</td>
<td>16.2346369</td>
</tr>
<tr class="odd">
<td>PWM</td>
<td>2352</td>
<td>276.12840</td>
<td>11.6604021</td>
</tr>
<tr class="even">
<td>RDU</td>
<td>8163</td>
<td>426.75769</td>
<td>10.0523810</td>
</tr>
<tr class="odd">
<td>RIC</td>
<td>2454</td>
<td>281.40465</td>
<td>20.1112532</td>
</tr>
<tr class="even">
<td>ROC</td>
<td>2416</td>
<td>259.25083</td>
<td>11.5606446</td>
</tr>
<tr class="odd">
<td>RSW</td>
<td>3537</td>
<td>1072.85327</td>
<td>3.2381496</td>
</tr>
<tr class="even">
<td>SAN</td>
<td>2737</td>
<td>2437.29923</td>
<td>3.1391657</td>
</tr>
<tr class="odd">
<td>SAT</td>
<td>686</td>
<td>1578.34111</td>
<td>6.9453718</td>
</tr>
<tr class="even">
<td>SAV</td>
<td>804</td>
<td>709.18408</td>
<td>15.1295060</td>
</tr>
<tr class="odd">
<td>SDF</td>
<td>1157</td>
<td>645.98358</td>
<td>12.6693841</td>
</tr>
<tr class="even">
<td>SEA</td>
<td>3923</td>
<td>2412.66531</td>
<td>-1.0990991</td>
</tr>
<tr class="odd">
<td>SFO</td>
<td>13331</td>
<td>2577.92356</td>
<td>2.6728915</td>
</tr>
<tr class="even">
<td>SJC</td>
<td>329</td>
<td>2569.00000</td>
<td>3.4481707</td>
</tr>
<tr class="odd">
<td>SJU</td>
<td>5819</td>
<td>1599.83365</td>
<td>2.5205266</td>
</tr>
<tr class="even">
<td>SLC</td>
<td>2467</td>
<td>1986.98662</td>
<td>0.1762546</td>
</tr>
<tr class="odd">
<td>SMF</td>
<td>284</td>
<td>2521.00000</td>
<td>12.1099291</td>
</tr>
<tr class="even">
<td>SNA</td>
<td>825</td>
<td>2434.00000</td>
<td>-7.8682266</td>
</tr>
<tr class="odd">
<td>SRQ</td>
<td>1211</td>
<td>1044.65153</td>
<td>3.0824313</td>
</tr>
<tr class="even">
<td>STL</td>
<td>4339</td>
<td>878.72321</td>
<td>11.0784645</td>
</tr>
<tr class="odd">
<td>STT</td>
<td>522</td>
<td>1626.98276</td>
<td>-3.8359073</td>
</tr>
<tr class="even">
<td>SYR</td>
<td>1761</td>
<td>205.92164</td>
<td>8.9039250</td>
</tr>
<tr class="odd">
<td>TPA</td>
<td>7466</td>
<td>1003.93557</td>
<td>7.4085250</td>
</tr>
<tr class="even">
<td>TUL</td>
<td>315</td>
<td>1215.00000</td>
<td>33.6598639</td>
</tr>
<tr class="odd">
<td>TVC</td>
<td>101</td>
<td>652.38614</td>
<td>12.9684211</td>
</tr>
<tr class="even">
<td>TYS</td>
<td>631</td>
<td>638.80983</td>
<td>24.0692042</td>
</tr>
<tr class="odd">
<td>XNA</td>
<td>1036</td>
<td>1142.50579</td>
<td>7.4657258</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> delay,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>dist,<span class="at">y=</span>delay))<span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>count),<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">se=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula 'y ~ x'
</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-13-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>另一个将数据传入<code>ggplot</code>的方法是使用管道。</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>delays<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(dest)<span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">count=</span><span class="fu">n</span>(),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">dist=</span><span class="fu">mean</span>(distance,<span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">delay=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>             )<span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(count<span class="sc">&gt;</span><span class="dv">20</span>,dest <span class="sc">!=</span><span class="st">"HNL"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(delays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 × 4
   dest  count  dist delay
   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ABQ     254 1826   4.38
 2 ACK     265  199   4.85
 3 ALB     439  143  14.4 
 4 ATL   17215  757. 11.3 
 5 AUS    2439 1514.  6.02
 6 AVL     275  584.  8.00
 7 BDL     443  116   7.05
 8 BGR     375  378   8.03
 9 BHM     297  866. 16.9 
10 BNA    6333  758. 11.8 
# … with 86 more rows</code></pre>
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>smaller,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>carat))<span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>所有的聚合函数遵循的一个一般原则是：<strong>若输入中存在缺失值，那么输出也会是缺失值。</strong>聚合函数中还有一大好处是有<code>na.rm()</code>函数能够帮助去除缺失值。</p>
</section>
<section id="计数" class="level4">
<h4 class="anchored" data-anchor-id="计数">计数</h4>
<p><code>n()</code>或非缺失值的计数<code>sum(!is_na())</code>，可以检查一下是否有少量的数据作为结论</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>not_cancelled<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay),<span class="sc">!</span><span class="fu">is.na</span>(arr_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>将所有窜缺失值的航班数据找出</p>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>delays<span class="ot">&lt;-</span> not_cancelled <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">delay=</span><span class="fu">mean</span>(arr_delay)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>delays,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>delay))<span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">binwidth=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>delays<span class="ot">&lt;-</span> not_cancelled <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">delay=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n=</span><span class="fu">n</span>()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>delays</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 4037 × 3</caption>
<thead>
<tr class="header">
<th scope="col">tailnum</th>
<th scope="col">delay</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>D942DN</td>
<td>31.5000000</td>
<td>4</td>
</tr>
<tr class="even">
<td>N0EGMQ</td>
<td>9.9829545</td>
<td>352</td>
</tr>
<tr class="odd">
<td>N10156</td>
<td>12.7172414</td>
<td>145</td>
</tr>
<tr class="even">
<td>N102UW</td>
<td>2.9375000</td>
<td>48</td>
</tr>
<tr class="odd">
<td>N103US</td>
<td>-6.9347826</td>
<td>46</td>
</tr>
<tr class="even">
<td>N104UW</td>
<td>1.8043478</td>
<td>46</td>
</tr>
<tr class="odd">
<td>N10575</td>
<td>20.6914498</td>
<td>269</td>
</tr>
<tr class="even">
<td>N105UW</td>
<td>-0.2666667</td>
<td>45</td>
</tr>
<tr class="odd">
<td>N107US</td>
<td>-5.7317073</td>
<td>41</td>
</tr>
<tr class="even">
<td>N108UW</td>
<td>-1.2500000</td>
<td>60</td>
</tr>
<tr class="odd">
<td>N109UW</td>
<td>-2.5208333</td>
<td>48</td>
</tr>
<tr class="even">
<td>N110UW</td>
<td>2.8000000</td>
<td>40</td>
</tr>
<tr class="odd">
<td>N11106</td>
<td>14.8809524</td>
<td>126</td>
</tr>
<tr class="even">
<td>N11107</td>
<td>15.0143885</td>
<td>139</td>
</tr>
<tr class="odd">
<td>N11109</td>
<td>14.8510638</td>
<td>141</td>
</tr>
<tr class="even">
<td>N11113</td>
<td>15.7619048</td>
<td>126</td>
</tr>
<tr class="odd">
<td>N11119</td>
<td>30.3065693</td>
<td>137</td>
</tr>
<tr class="even">
<td>N11121</td>
<td>10.3061224</td>
<td>147</td>
</tr>
<tr class="odd">
<td>N11127</td>
<td>13.6050420</td>
<td>119</td>
</tr>
<tr class="even">
<td>N11137</td>
<td>20.5514019</td>
<td>107</td>
</tr>
<tr class="odd">
<td>N11140</td>
<td>18.3120567</td>
<td>141</td>
</tr>
<tr class="even">
<td>N11150</td>
<td>8.8914729</td>
<td>129</td>
</tr>
<tr class="odd">
<td>N11155</td>
<td>12.9895833</td>
<td>96</td>
</tr>
<tr class="even">
<td>N11164</td>
<td>21.6496350</td>
<td>137</td>
</tr>
<tr class="odd">
<td>N11165</td>
<td>8.3466667</td>
<td>150</td>
</tr>
<tr class="even">
<td>N11176</td>
<td>20.4045802</td>
<td>131</td>
</tr>
<tr class="odd">
<td>N11181</td>
<td>9.0750000</td>
<td>120</td>
</tr>
<tr class="even">
<td>N11184</td>
<td>6.9843750</td>
<td>128</td>
</tr>
<tr class="odd">
<td>N11187</td>
<td>11.1904762</td>
<td>126</td>
</tr>
<tr class="even">
<td>N11189</td>
<td>6.7372263</td>
<td>137</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>N985AT</td>
<td>15.0384615</td>
<td>26</td>
</tr>
<tr class="odd">
<td>N985DL</td>
<td>0.2539683</td>
<td>63</td>
</tr>
<tr class="even">
<td>N986AT</td>
<td>0.1250000</td>
<td>24</td>
</tr>
<tr class="odd">
<td>N986DL</td>
<td>5.5833333</td>
<td>72</td>
</tr>
<tr class="even">
<td>N987AT</td>
<td>37.3846154</td>
<td>26</td>
</tr>
<tr class="odd">
<td>N987DL</td>
<td>-3.2909091</td>
<td>55</td>
</tr>
<tr class="even">
<td>N988AT</td>
<td>44.3428571</td>
<td>35</td>
</tr>
<tr class="odd">
<td>N988DL</td>
<td>9.4716981</td>
<td>53</td>
</tr>
<tr class="even">
<td>N989AT</td>
<td>28.1935484</td>
<td>62</td>
</tr>
<tr class="odd">
<td>N989DL</td>
<td>11.0340909</td>
<td>88</td>
</tr>
<tr class="even">
<td>N990AT</td>
<td>16.3857143</td>
<td>70</td>
</tr>
<tr class="odd">
<td>N990DL</td>
<td>12.4285714</td>
<td>56</td>
</tr>
<tr class="even">
<td>N991AT</td>
<td>15.6800000</td>
<td>25</td>
</tr>
<tr class="odd">
<td>N991DL</td>
<td>7.3369565</td>
<td>92</td>
</tr>
<tr class="even">
<td>N992AT</td>
<td>17.7837838</td>
<td>37</td>
</tr>
<tr class="odd">
<td>N992DL</td>
<td>-6.6491228</td>
<td>57</td>
</tr>
<tr class="even">
<td>N993AT</td>
<td>10.4042553</td>
<td>47</td>
</tr>
<tr class="odd">
<td>N993DL</td>
<td>16.9811321</td>
<td>53</td>
</tr>
<tr class="even">
<td>N994AT</td>
<td>31.4838710</td>
<td>31</td>
</tr>
<tr class="odd">
<td>N994DL</td>
<td>5.0327869</td>
<td>61</td>
</tr>
<tr class="even">
<td>N995AT</td>
<td>26.4705882</td>
<td>17</td>
</tr>
<tr class="odd">
<td>N995DL</td>
<td>1.9298246</td>
<td>57</td>
</tr>
<tr class="even">
<td>N996AT</td>
<td>6.5384615</td>
<td>26</td>
</tr>
<tr class="odd">
<td>N996DL</td>
<td>0.5247525</td>
<td>101</td>
</tr>
<tr class="even">
<td>N997AT</td>
<td>16.3023256</td>
<td>43</td>
</tr>
<tr class="odd">
<td>N997DL</td>
<td>4.9032258</td>
<td>62</td>
</tr>
<tr class="even">
<td>N998AT</td>
<td>29.9600000</td>
<td>25</td>
</tr>
<tr class="odd">
<td>N998DL</td>
<td>16.3947368</td>
<td>76</td>
</tr>
<tr class="even">
<td>N999DN</td>
<td>14.3114754</td>
<td>61</td>
</tr>
<tr class="odd">
<td>N9EAMQ</td>
<td>9.2352941</td>
<td>238</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>delays,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>n,<span class="at">y=</span>delay))<span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>进一步还可以筛取少量的分组，能够得到更好的展示效果</p>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>delays<span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">25</span>)<span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>n,<span class="at">y=</span>delay))<span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="常见的摘要函数" class="level4">
<h4 class="anchored" data-anchor-id="常见的摘要函数">常见的摘要函数</h4>
<p>位置度量：使用<code>mean()</code>但<code>median()</code>也较为常用。均值是总数除以个数；中位数则是：50%的x大于它，同时50%的x小于它。</p>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>not_cancelled<span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year,month,day)<span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_delay1=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">avg_delay2=</span><span class="fu">mean</span>(arr_delay[arr_delay<span class="sc">&gt;</span><span class="dv">0</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year', 'month'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 365 × 6</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">avg_delay1</th>
<th scope="col">n</th>
<th scope="col">avg_delay2</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>12.6510229</td>
<td>831</td>
<td>32.48156</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>2</td>
<td>12.6928879</td>
<td>928</td>
<td>32.02991</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>3</td>
<td>5.7333333</td>
<td>900</td>
<td>27.66087</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>4</td>
<td>-1.9328194</td>
<td>908</td>
<td>28.30976</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>5</td>
<td>-1.5258020</td>
<td>717</td>
<td>22.55882</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>6</td>
<td>4.2364294</td>
<td>829</td>
<td>24.37270</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>7</td>
<td>-4.9473118</td>
<td>930</td>
<td>27.76132</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>8</td>
<td>-3.2275785</td>
<td>892</td>
<td>20.78909</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>9</td>
<td>-0.2642777</td>
<td>893</td>
<td>25.63415</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>10</td>
<td>-5.8988159</td>
<td>929</td>
<td>27.34545</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>11</td>
<td>-4.7622683</td>
<td>917</td>
<td>26.15984</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>12</td>
<td>-13.0161527</td>
<td>681</td>
<td>23.47170</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>13</td>
<td>14.9318463</td>
<td>807</td>
<td>52.54891</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>14</td>
<td>3.6403034</td>
<td>923</td>
<td>22.44444</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>15</td>
<td>0.4256527</td>
<td>881</td>
<td>19.71003</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>16</td>
<td>34.2473623</td>
<td>853</td>
<td>46.08346</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>17</td>
<td>6.4928962</td>
<td>915</td>
<td>25.60268</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>18</td>
<td>1.8417582</td>
<td>910</td>
<td>25.05382</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>19</td>
<td>-8.5260805</td>
<td>671</td>
<td>24.28906</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>20</td>
<td>3.7400768</td>
<td>781</td>
<td>29.02913</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>21</td>
<td>6.3159645</td>
<td>902</td>
<td>32.24359</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>22</td>
<td>12.2768362</td>
<td>885</td>
<td>33.88323</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>23</td>
<td>6.9177928</td>
<td>888</td>
<td>33.05181</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>24</td>
<td>15.4273128</td>
<td>908</td>
<td>42.08824</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>25</td>
<td>27.0989761</td>
<td>879</td>
<td>55.73694</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>26</td>
<td>0.7511177</td>
<td>671</td>
<td>29.05833</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>27</td>
<td>-1.3089330</td>
<td>806</td>
<td>36.02479</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>28</td>
<td>9.3197200</td>
<td>857</td>
<td>38.70361</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>29</td>
<td>-6.5558113</td>
<td>869</td>
<td>30.13333</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>30</td>
<td>25.9108040</td>
<td>796</td>
<td>57.42889</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>2</td>
<td>0.4509018</td>
<td>998</td>
<td>31.55488</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>3</td>
<td>2.2227979</td>
<td>965</td>
<td>24.45926</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>4</td>
<td>-0.2222222</td>
<td>945</td>
<td>28.40643</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>5</td>
<td>51.6662546</td>
<td>809</td>
<td>80.83571</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>6</td>
<td>21.1194690</td>
<td>904</td>
<td>37.51089</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>7</td>
<td>5.0570571</td>
<td>666</td>
<td>27.18707</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>8</td>
<td>36.9118012</td>
<td>805</td>
<td>56.16000</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>9</td>
<td>42.5755556</td>
<td>900</td>
<td>53.07383</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>10</td>
<td>44.5087957</td>
<td>739</td>
<td>52.19440</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>11</td>
<td>10.9024390</td>
<td>943</td>
<td>24.90559</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>12</td>
<td>5.3399374</td>
<td>959</td>
<td>23.46320</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>13</td>
<td>0.1630322</td>
<td>963</td>
<td>22.14121</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>14</td>
<td>46.3975045</td>
<td>561</td>
<td>59.97802</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>15</td>
<td>15.8700980</td>
<td>816</td>
<td>38.98678</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>16</td>
<td>7.3706806</td>
<td>955</td>
<td>27.81385</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>17</td>
<td>55.8718563</td>
<td>835</td>
<td>60.46795</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>18</td>
<td>11.0798319</td>
<td>952</td>
<td>26.59503</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>19</td>
<td>9.0062112</td>
<td>966</td>
<td>31.04008</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>20</td>
<td>13.8201663</td>
<td>962</td>
<td>35.24905</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>21</td>
<td>12.4569288</td>
<td>801</td>
<td>36.85539</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>22</td>
<td>23.8995485</td>
<td>886</td>
<td>45.64875</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>23</td>
<td>32.2260417</td>
<td>960</td>
<td>50.03397</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>24</td>
<td>-1.0438830</td>
<td>752</td>
<td>21.16961</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>25</td>
<td>-1.8993007</td>
<td>715</td>
<td>30.09500</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>26</td>
<td>7.1741935</td>
<td>930</td>
<td>34.54869</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>27</td>
<td>-0.1488033</td>
<td>961</td>
<td>29.04683</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>28</td>
<td>-3.2595326</td>
<td>813</td>
<td>25.60769</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>29</td>
<td>18.7638249</td>
<td>868</td>
<td>47.25636</td>
</tr>
<tr class="even">
<td>2013</td>
<td>12</td>
<td>30</td>
<td>10.0577125</td>
<td>953</td>
<td>31.24380</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>12</td>
<td>31</td>
<td>6.2121212</td>
<td>759</td>
<td>24.45596</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(delays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 3</caption>
<thead>
<tr class="header">
<th scope="col">tailnum</th>
<th scope="col">delay</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>D942DN</td>
<td>31.500000</td>
<td>4</td>
</tr>
<tr class="even">
<td>N0EGMQ</td>
<td>9.982955</td>
<td>352</td>
</tr>
<tr class="odd">
<td>N10156</td>
<td>12.717241</td>
<td>145</td>
</tr>
<tr class="even">
<td>N102UW</td>
<td>2.937500</td>
<td>48</td>
</tr>
<tr class="odd">
<td>N103US</td>
<td>-6.934783</td>
<td>46</td>
</tr>
<tr class="even">
<td>N104UW</td>
<td>1.804348</td>
<td>46</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>summarize()</code>实际上是生成了变量能够作为数据框来使用</p>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>delays,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>n,<span class="at">y=</span>delay))<span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-24-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>smaller,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>carat,<span class="at">color=</span>cut))<span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">binwidth=</span><span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="典型值" class="level4">
<h4 class="anchored" data-anchor-id="典型值">典型值</h4>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>smaller,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>carat))<span class="sc">+</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-26-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(faithful) <span class="co">#美国黄石公园喷泉的喷发时长</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 6 × 2</caption>
<thead>
<tr class="header">
<th></th>
<th scope="col">eruptions</th>
<th scope="col">waiting</th>
</tr>
<tr class="odd">
<th></th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th scope="row">1</th>
<td>3.600</td>
<td>79</td>
</tr>
<tr class="even">
<th scope="row">2</th>
<td>1.800</td>
<td>54</td>
</tr>
<tr class="odd">
<th scope="row">3</th>
<td>3.333</td>
<td>74</td>
</tr>
<tr class="even">
<th scope="row">4</th>
<td>2.283</td>
<td>62</td>
</tr>
<tr class="odd">
<th scope="row">5</th>
<td>4.533</td>
<td>85</td>
</tr>
<tr class="even">
<th scope="row">6</th>
<td>2.883</td>
<td>55</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>faithful,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>eruptions))<span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="fl">0.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>最终可以从图像中看出，喷发时间分为两组，一组以2分钟为主，另一组以4-5分钟为组</p>
</section>
<section id="异常值" class="level4">
<h4 class="anchored" data-anchor-id="异常值">异常值</h4>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 10</caption>
<thead>
<tr class="header">
<th scope="col">carat</th>
<th scope="col">cut</th>
<th scope="col">color</th>
<th scope="col">clarity</th>
<th scope="col">depth</th>
<th scope="col">table</th>
<th scope="col">price</th>
<th scope="col">x</th>
<th scope="col">y</th>
<th scope="col">z</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.23</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td>0.21</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td>0.23</td>
<td>Good</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td>0.29</td>
<td>Premium</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td>0.31</td>
<td>Good</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
<tr class="even">
<td>0.24</td>
<td>Very Good</td>
<td>J</td>
<td>VVS2</td>
<td>62.8</td>
<td>57</td>
<td>336</td>
<td>3.94</td>
<td>3.96</td>
<td>2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds)<span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>y),<span class="at">binwidth=</span><span class="fl">0.5</span>)  <span class="co">#x坐标表示的是y值的大小，geom_histogram函数将x坐标进行统计再映射到途中。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>这个分箱导致异常值的分箱高度太低。使用<code>coord_cartesian()</code>将y轴靠近0部分放大</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds)<span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>y),<span class="at">binwidth=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>unusual <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(y <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">|</span> y <span class="sc">&gt;</span> <span class="dv">20</span>)<span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(y)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>unusual</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 9 × 10</caption>
<thead>
<tr class="header">
<th scope="col">carat</th>
<th scope="col">cut</th>
<th scope="col">color</th>
<th scope="col">clarity</th>
<th scope="col">depth</th>
<th scope="col">table</th>
<th scope="col">price</th>
<th scope="col">x</th>
<th scope="col">y</th>
<th scope="col">z</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.00</td>
<td>Very Good</td>
<td>H</td>
<td>VS2</td>
<td>63.3</td>
<td>53</td>
<td>5139</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="even">
<td>1.14</td>
<td>Fair</td>
<td>G</td>
<td>VS1</td>
<td>57.5</td>
<td>67</td>
<td>6381</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td>1.56</td>
<td>Ideal</td>
<td>G</td>
<td>VS2</td>
<td>62.2</td>
<td>54</td>
<td>12800</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="even">
<td>1.20</td>
<td>Premium</td>
<td>D</td>
<td>VVS1</td>
<td>62.1</td>
<td>59</td>
<td>15686</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td>2.25</td>
<td>Premium</td>
<td>H</td>
<td>SI2</td>
<td>62.8</td>
<td>59</td>
<td>18034</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="even">
<td>0.71</td>
<td>Good</td>
<td>F</td>
<td>SI2</td>
<td>64.1</td>
<td>60</td>
<td>2130</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td>0.71</td>
<td>Good</td>
<td>F</td>
<td>SI2</td>
<td>64.1</td>
<td>60</td>
<td>2130</td>
<td>0.00</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="even">
<td>0.51</td>
<td>Ideal</td>
<td>E</td>
<td>VS1</td>
<td>61.8</td>
<td>55</td>
<td>2075</td>
<td>5.15</td>
<td>31.8</td>
<td>5.12</td>
</tr>
<tr class="odd">
<td>2.00</td>
<td>Premium</td>
<td>H</td>
<td>SI2</td>
<td>58.9</td>
<td>57</td>
<td>12210</td>
<td>8.09</td>
<td>58.9</td>
<td>8.06</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="缺失值" class="level4">
<h4 class="anchored" data-anchor-id="缺失值">缺失值</h4>
<ul>
<li>丢弃所有可疑的行</li>
</ul>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>diamonds2<span class="ot">&lt;-</span>diamonds<span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(y,<span class="dv">3</span>,<span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>使用缺失值代替异常值，使用<code>mutate()</code>来创建一个新的变量来代替原有的变量</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>diamonds2<span class="ot">&lt;-</span>diamonds<span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">y=</span><span class="fu">ifelse</span>(y<span class="sc">&lt;</span><span class="dv">3</span><span class="sc">|</span>y<span class="sc">&gt;</span><span class="dv">20</span>,<span class="cn">NA</span>,y)) <span class="co">#mutate 在原有的属性进行操作</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>diamonds2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 53940 × 10</caption>
<thead>
<tr class="header">
<th scope="col">carat</th>
<th scope="col">cut</th>
<th scope="col">color</th>
<th scope="col">clarity</th>
<th scope="col">depth</th>
<th scope="col">table</th>
<th scope="col">price</th>
<th scope="col">x</th>
<th scope="col">y</th>
<th scope="col">z</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.23</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td>0.21</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td>0.23</td>
<td>Good</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td>0.29</td>
<td>Premium</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td>0.31</td>
<td>Good</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
<tr class="even">
<td>0.24</td>
<td>Very Good</td>
<td>J</td>
<td>VVS2</td>
<td>62.8</td>
<td>57</td>
<td>336</td>
<td>3.94</td>
<td>3.96</td>
<td>2.48</td>
</tr>
<tr class="odd">
<td>0.24</td>
<td>Very Good</td>
<td>I</td>
<td>VVS1</td>
<td>62.3</td>
<td>57</td>
<td>336</td>
<td>3.95</td>
<td>3.98</td>
<td>2.47</td>
</tr>
<tr class="even">
<td>0.26</td>
<td>Very Good</td>
<td>H</td>
<td>SI1</td>
<td>61.9</td>
<td>55</td>
<td>337</td>
<td>4.07</td>
<td>4.11</td>
<td>2.53</td>
</tr>
<tr class="odd">
<td>0.22</td>
<td>Fair</td>
<td>E</td>
<td>VS2</td>
<td>65.1</td>
<td>61</td>
<td>337</td>
<td>3.87</td>
<td>3.78</td>
<td>2.49</td>
</tr>
<tr class="even">
<td>0.23</td>
<td>Very Good</td>
<td>H</td>
<td>VS1</td>
<td>59.4</td>
<td>61</td>
<td>338</td>
<td>4.00</td>
<td>4.05</td>
<td>2.39</td>
</tr>
<tr class="odd">
<td>0.30</td>
<td>Good</td>
<td>J</td>
<td>SI1</td>
<td>64.0</td>
<td>55</td>
<td>339</td>
<td>4.25</td>
<td>4.28</td>
<td>2.73</td>
</tr>
<tr class="even">
<td>0.23</td>
<td>Ideal</td>
<td>J</td>
<td>VS1</td>
<td>62.8</td>
<td>56</td>
<td>340</td>
<td>3.93</td>
<td>3.90</td>
<td>2.46</td>
</tr>
<tr class="odd">
<td>0.22</td>
<td>Premium</td>
<td>F</td>
<td>SI1</td>
<td>60.4</td>
<td>61</td>
<td>342</td>
<td>3.88</td>
<td>3.84</td>
<td>2.33</td>
</tr>
<tr class="even">
<td>0.31</td>
<td>Ideal</td>
<td>J</td>
<td>SI2</td>
<td>62.2</td>
<td>54</td>
<td>344</td>
<td>4.35</td>
<td>4.37</td>
<td>2.71</td>
</tr>
<tr class="odd">
<td>0.20</td>
<td>Premium</td>
<td>E</td>
<td>SI2</td>
<td>60.2</td>
<td>62</td>
<td>345</td>
<td>3.79</td>
<td>3.75</td>
<td>2.27</td>
</tr>
<tr class="even">
<td>0.32</td>
<td>Premium</td>
<td>E</td>
<td>I1</td>
<td>60.9</td>
<td>58</td>
<td>345</td>
<td>4.38</td>
<td>4.42</td>
<td>2.68</td>
</tr>
<tr class="odd">
<td>0.30</td>
<td>Ideal</td>
<td>I</td>
<td>SI2</td>
<td>62.0</td>
<td>54</td>
<td>348</td>
<td>4.31</td>
<td>4.34</td>
<td>2.68</td>
</tr>
<tr class="even">
<td>0.30</td>
<td>Good</td>
<td>J</td>
<td>SI1</td>
<td>63.4</td>
<td>54</td>
<td>351</td>
<td>4.23</td>
<td>4.29</td>
<td>2.70</td>
</tr>
<tr class="odd">
<td>0.30</td>
<td>Good</td>
<td>J</td>
<td>SI1</td>
<td>63.8</td>
<td>56</td>
<td>351</td>
<td>4.23</td>
<td>4.26</td>
<td>2.71</td>
</tr>
<tr class="even">
<td>0.30</td>
<td>Very Good</td>
<td>J</td>
<td>SI1</td>
<td>62.7</td>
<td>59</td>
<td>351</td>
<td>4.21</td>
<td>4.27</td>
<td>2.66</td>
</tr>
<tr class="odd">
<td>0.30</td>
<td>Good</td>
<td>I</td>
<td>SI2</td>
<td>63.3</td>
<td>56</td>
<td>351</td>
<td>4.26</td>
<td>4.30</td>
<td>2.71</td>
</tr>
<tr class="even">
<td>0.23</td>
<td>Very Good</td>
<td>E</td>
<td>VS2</td>
<td>63.8</td>
<td>55</td>
<td>352</td>
<td>3.85</td>
<td>3.92</td>
<td>2.48</td>
</tr>
<tr class="odd">
<td>0.23</td>
<td>Very Good</td>
<td>H</td>
<td>VS1</td>
<td>61.0</td>
<td>57</td>
<td>353</td>
<td>3.94</td>
<td>3.96</td>
<td>2.41</td>
</tr>
<tr class="even">
<td>0.31</td>
<td>Very Good</td>
<td>J</td>
<td>SI1</td>
<td>59.4</td>
<td>62</td>
<td>353</td>
<td>4.39</td>
<td>4.43</td>
<td>2.62</td>
</tr>
<tr class="odd">
<td>0.31</td>
<td>Very Good</td>
<td>J</td>
<td>SI1</td>
<td>58.1</td>
<td>62</td>
<td>353</td>
<td>4.44</td>
<td>4.47</td>
<td>2.59</td>
</tr>
<tr class="even">
<td>0.23</td>
<td>Very Good</td>
<td>G</td>
<td>VVS2</td>
<td>60.4</td>
<td>58</td>
<td>354</td>
<td>3.97</td>
<td>4.01</td>
<td>2.41</td>
</tr>
<tr class="odd">
<td>0.24</td>
<td>Premium</td>
<td>I</td>
<td>VS1</td>
<td>62.5</td>
<td>57</td>
<td>355</td>
<td>3.97</td>
<td>3.94</td>
<td>2.47</td>
</tr>
<tr class="even">
<td>0.30</td>
<td>Very Good</td>
<td>J</td>
<td>VS2</td>
<td>62.2</td>
<td>57</td>
<td>357</td>
<td>4.28</td>
<td>4.30</td>
<td>2.67</td>
</tr>
<tr class="odd">
<td>0.23</td>
<td>Very Good</td>
<td>D</td>
<td>VS2</td>
<td>60.5</td>
<td>61</td>
<td>357</td>
<td>3.96</td>
<td>3.97</td>
<td>2.40</td>
</tr>
<tr class="even">
<td>0.23</td>
<td>Very Good</td>
<td>F</td>
<td>VS1</td>
<td>60.9</td>
<td>57</td>
<td>357</td>
<td>3.96</td>
<td>3.99</td>
<td>2.42</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>0.70</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>60.5</td>
<td>58</td>
<td>2753</td>
<td>5.74</td>
<td>5.77</td>
<td>3.48</td>
</tr>
<tr class="odd">
<td>0.57</td>
<td>Premium</td>
<td>E</td>
<td>IF</td>
<td>59.8</td>
<td>60</td>
<td>2753</td>
<td>5.43</td>
<td>5.38</td>
<td>3.23</td>
</tr>
<tr class="even">
<td>0.61</td>
<td>Premium</td>
<td>F</td>
<td>VVS1</td>
<td>61.8</td>
<td>59</td>
<td>2753</td>
<td>5.48</td>
<td>5.40</td>
<td>3.36</td>
</tr>
<tr class="odd">
<td>0.80</td>
<td>Good</td>
<td>G</td>
<td>VS2</td>
<td>64.2</td>
<td>58</td>
<td>2753</td>
<td>5.84</td>
<td>5.81</td>
<td>3.74</td>
</tr>
<tr class="even">
<td>0.84</td>
<td>Good</td>
<td>I</td>
<td>VS1</td>
<td>63.7</td>
<td>59</td>
<td>2753</td>
<td>5.94</td>
<td>5.90</td>
<td>3.77</td>
</tr>
<tr class="odd">
<td>0.77</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>62.1</td>
<td>56</td>
<td>2753</td>
<td>5.84</td>
<td>5.86</td>
<td>3.63</td>
</tr>
<tr class="even">
<td>0.74</td>
<td>Good</td>
<td>D</td>
<td>SI1</td>
<td>63.1</td>
<td>59</td>
<td>2753</td>
<td>5.71</td>
<td>5.74</td>
<td>3.61</td>
</tr>
<tr class="odd">
<td>0.90</td>
<td>Very Good</td>
<td>J</td>
<td>SI1</td>
<td>63.2</td>
<td>60</td>
<td>2753</td>
<td>6.12</td>
<td>6.09</td>
<td>3.86</td>
</tr>
<tr class="even">
<td>0.76</td>
<td>Premium</td>
<td>I</td>
<td>VS1</td>
<td>59.3</td>
<td>62</td>
<td>2753</td>
<td>5.93</td>
<td>5.85</td>
<td>3.49</td>
</tr>
<tr class="odd">
<td>0.76</td>
<td>Ideal</td>
<td>I</td>
<td>VVS1</td>
<td>62.2</td>
<td>55</td>
<td>2753</td>
<td>5.89</td>
<td>5.87</td>
<td>3.66</td>
</tr>
<tr class="even">
<td>0.70</td>
<td>Very Good</td>
<td>E</td>
<td>VS2</td>
<td>62.4</td>
<td>60</td>
<td>2755</td>
<td>5.57</td>
<td>5.61</td>
<td>3.49</td>
</tr>
<tr class="odd">
<td>0.70</td>
<td>Very Good</td>
<td>E</td>
<td>VS2</td>
<td>62.8</td>
<td>60</td>
<td>2755</td>
<td>5.59</td>
<td>5.65</td>
<td>3.53</td>
</tr>
<tr class="even">
<td>0.70</td>
<td>Very Good</td>
<td>D</td>
<td>VS1</td>
<td>63.1</td>
<td>59</td>
<td>2755</td>
<td>5.67</td>
<td>5.58</td>
<td>3.55</td>
</tr>
<tr class="odd">
<td>0.73</td>
<td>Ideal</td>
<td>I</td>
<td>VS2</td>
<td>61.3</td>
<td>56</td>
<td>2756</td>
<td>5.80</td>
<td>5.84</td>
<td>3.57</td>
</tr>
<tr class="even">
<td>0.73</td>
<td>Ideal</td>
<td>I</td>
<td>VS2</td>
<td>61.6</td>
<td>55</td>
<td>2756</td>
<td>5.82</td>
<td>5.84</td>
<td>3.59</td>
</tr>
<tr class="odd">
<td>0.79</td>
<td>Ideal</td>
<td>I</td>
<td>SI1</td>
<td>61.6</td>
<td>56</td>
<td>2756</td>
<td>5.95</td>
<td>5.97</td>
<td>3.67</td>
</tr>
<tr class="even">
<td>0.71</td>
<td>Ideal</td>
<td>E</td>
<td>SI1</td>
<td>61.9</td>
<td>56</td>
<td>2756</td>
<td>5.71</td>
<td>5.73</td>
<td>3.54</td>
</tr>
<tr class="odd">
<td>0.79</td>
<td>Good</td>
<td>F</td>
<td>SI1</td>
<td>58.1</td>
<td>59</td>
<td>2756</td>
<td>6.06</td>
<td>6.13</td>
<td>3.54</td>
</tr>
<tr class="even">
<td>0.79</td>
<td>Premium</td>
<td>E</td>
<td>SI2</td>
<td>61.4</td>
<td>58</td>
<td>2756</td>
<td>6.03</td>
<td>5.96</td>
<td>3.68</td>
</tr>
<tr class="odd">
<td>0.71</td>
<td>Ideal</td>
<td>G</td>
<td>VS1</td>
<td>61.4</td>
<td>56</td>
<td>2756</td>
<td>5.76</td>
<td>5.73</td>
<td>3.53</td>
</tr>
<tr class="even">
<td>0.71</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>60.5</td>
<td>55</td>
<td>2756</td>
<td>5.79</td>
<td>5.74</td>
<td>3.49</td>
</tr>
<tr class="odd">
<td>0.71</td>
<td>Premium</td>
<td>F</td>
<td>SI1</td>
<td>59.8</td>
<td>62</td>
<td>2756</td>
<td>5.74</td>
<td>5.73</td>
<td>3.43</td>
</tr>
<tr class="even">
<td>0.70</td>
<td>Very Good</td>
<td>E</td>
<td>VS2</td>
<td>60.5</td>
<td>59</td>
<td>2757</td>
<td>5.71</td>
<td>5.76</td>
<td>3.47</td>
</tr>
<tr class="odd">
<td>0.70</td>
<td>Very Good</td>
<td>E</td>
<td>VS2</td>
<td>61.2</td>
<td>59</td>
<td>2757</td>
<td>5.69</td>
<td>5.72</td>
<td>3.49</td>
</tr>
<tr class="even">
<td>0.72</td>
<td>Premium</td>
<td>D</td>
<td>SI1</td>
<td>62.7</td>
<td>59</td>
<td>2757</td>
<td>5.69</td>
<td>5.73</td>
<td>3.58</td>
</tr>
<tr class="odd">
<td>0.72</td>
<td>Ideal</td>
<td>D</td>
<td>SI1</td>
<td>60.8</td>
<td>57</td>
<td>2757</td>
<td>5.75</td>
<td>5.76</td>
<td>3.50</td>
</tr>
<tr class="even">
<td>0.72</td>
<td>Good</td>
<td>D</td>
<td>SI1</td>
<td>63.1</td>
<td>55</td>
<td>2757</td>
<td>5.69</td>
<td>5.75</td>
<td>3.61</td>
</tr>
<tr class="odd">
<td>0.70</td>
<td>Very Good</td>
<td>D</td>
<td>SI1</td>
<td>62.8</td>
<td>60</td>
<td>2757</td>
<td>5.66</td>
<td>5.68</td>
<td>3.56</td>
</tr>
<tr class="even">
<td>0.86</td>
<td>Premium</td>
<td>H</td>
<td>SI2</td>
<td>61.0</td>
<td>58</td>
<td>2757</td>
<td>6.15</td>
<td>6.12</td>
<td>3.74</td>
</tr>
<tr class="odd">
<td>0.75</td>
<td>Ideal</td>
<td>D</td>
<td>SI2</td>
<td>62.2</td>
<td>55</td>
<td>2757</td>
<td>5.83</td>
<td>5.87</td>
<td>3.64</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>diamonds2,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y))<span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-36-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="相关变动" class="level3">
<h3 class="anchored" data-anchor-id="相关变动">相关变动</h3>
<p>相关变动就是描述多个变量之间的行为。以可视化的方式进行查看</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping=</span> <span class="fu">aes</span>(<span class="at">x =</span> price ))<span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">color=</span>cut),<span class="at">binwidth=</span><span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-37-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds)<span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>cut))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-38-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>diamonds,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>cut,<span class="at">y=</span>price))<span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-39-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-scrolled="true" data-execution_count="115">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>class,<span class="at">y=</span>hwy))<span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="co">#这里对于yx来说属于一个列联表分类数据。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-40-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>diamonds<span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(color,cut)<span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>color,<span class="at">y=</span>cut))<span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_tile</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">fill=</span>n))  <span class="co">#aes()仍然是将fill放入其中</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-41-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="两个分类变量" class="level4">
<h4 class="anchored" data-anchor-id="两个分类变量">两个分类变量</h4>
<div class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>diamonds<span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(color,cut)<span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>color,<span class="at">y=</span>cut))<span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-42-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="模式和模型" class="level3">
<h3 class="anchored" data-anchor-id="模式和模型">模式和模型</h3>
<div class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>faithful)<span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>eruptions,<span class="at">y=</span>waiting))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-43-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="数据处理" class="level2">
<h2 class="anchored" data-anchor-id="数据处理">数据处理</h2>
<p>数据处理是一门艺术，将合适的形式倒入R，从而进行可视化和建模。</p>
<div class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 150 × 5</caption>
<thead>
<tr class="header">
<th scope="col">Sepal.Length</th>
<th scope="col">Sepal.Width</th>
<th scope="col">Petal.Length</th>
<th scope="col">Petal.Width</th>
<th scope="col">Species</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;fct&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.4</td>
<td>3.9</td>
<td>1.7</td>
<td>0.4</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.6</td>
<td>3.4</td>
<td>1.4</td>
<td>0.3</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.0</td>
<td>3.4</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.4</td>
<td>2.9</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.9</td>
<td>3.1</td>
<td>1.5</td>
<td>0.1</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.4</td>
<td>3.7</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.8</td>
<td>3.4</td>
<td>1.6</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.8</td>
<td>3.0</td>
<td>1.4</td>
<td>0.1</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.3</td>
<td>3.0</td>
<td>1.1</td>
<td>0.1</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.8</td>
<td>4.0</td>
<td>1.2</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.7</td>
<td>4.4</td>
<td>1.5</td>
<td>0.4</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.4</td>
<td>3.9</td>
<td>1.3</td>
<td>0.4</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.3</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.7</td>
<td>3.8</td>
<td>1.7</td>
<td>0.3</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.1</td>
<td>3.8</td>
<td>1.5</td>
<td>0.3</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.4</td>
<td>3.4</td>
<td>1.7</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.1</td>
<td>3.7</td>
<td>1.5</td>
<td>0.4</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.6</td>
<td>3.6</td>
<td>1.0</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.1</td>
<td>3.3</td>
<td>1.7</td>
<td>0.5</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>4.8</td>
<td>3.4</td>
<td>1.9</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.0</td>
<td>3.0</td>
<td>1.6</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.0</td>
<td>3.4</td>
<td>1.6</td>
<td>0.4</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>5.2</td>
<td>3.5</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>5.2</td>
<td>3.4</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td>4.7</td>
<td>3.2</td>
<td>1.6</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>6.9</td>
<td>3.2</td>
<td>5.7</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>5.6</td>
<td>2.8</td>
<td>4.9</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>7.7</td>
<td>2.8</td>
<td>6.7</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.3</td>
<td>2.7</td>
<td>4.9</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.7</td>
<td>3.3</td>
<td>5.7</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>7.2</td>
<td>3.2</td>
<td>6.0</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.2</td>
<td>2.8</td>
<td>4.8</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.1</td>
<td>3.0</td>
<td>4.9</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.4</td>
<td>2.8</td>
<td>5.6</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>7.2</td>
<td>3.0</td>
<td>5.8</td>
<td>1.6</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>7.4</td>
<td>2.8</td>
<td>6.1</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>7.9</td>
<td>3.8</td>
<td>6.4</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.4</td>
<td>2.8</td>
<td>5.6</td>
<td>2.2</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.3</td>
<td>2.8</td>
<td>5.1</td>
<td>1.5</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.1</td>
<td>2.6</td>
<td>5.6</td>
<td>1.4</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>7.7</td>
<td>3.0</td>
<td>6.1</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.3</td>
<td>3.4</td>
<td>5.6</td>
<td>2.4</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.4</td>
<td>3.1</td>
<td>5.5</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.0</td>
<td>3.0</td>
<td>4.8</td>
<td>1.8</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.9</td>
<td>3.1</td>
<td>5.4</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.7</td>
<td>3.1</td>
<td>5.6</td>
<td>2.4</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.9</td>
<td>3.1</td>
<td>5.1</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>5.8</td>
<td>2.7</td>
<td>5.1</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.8</td>
<td>3.2</td>
<td>5.9</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.7</td>
<td>3.3</td>
<td>5.7</td>
<td>2.5</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.7</td>
<td>3.0</td>
<td>5.2</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.3</td>
<td>2.5</td>
<td>5.0</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>6.5</td>
<td>3.0</td>
<td>5.2</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr class="even">
<td>6.2</td>
<td>3.4</td>
<td>5.4</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td>5.9</td>
<td>3.0</td>
<td>5.1</td>
<td>1.8</td>
<td>virginica</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>自行生成一个tibble</p>
<div class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="dv">1</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">z=</span>x<span class="sc">^</span><span class="dv">2</span><span class="sc">+</span>y</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 3</caption>
<thead>
<tr class="header">
<th scope="col">x</th>
<th scope="col">y</th>
<th scope="col">z</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>10</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td>17</td>
</tr>
<tr class="odd">
<td>5</td>
<td>1</td>
<td>26</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>对两个分类变量的相关变动进行可视化表示，需要计算出每个变量组合的观测数量。（同时上述的<code>geom_point(color=n)</code>也能实现类似的功能）</p>
<div class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>diamonds)<span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_count</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>cut,<span class="at">y=</span>color)) <span class="co">#将数量的大小投射到数据点的大小上</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-46-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 10</caption>
<thead>
<tr class="header">
<th scope="col">carat</th>
<th scope="col">cut</th>
<th scope="col">color</th>
<th scope="col">clarity</th>
<th scope="col">depth</th>
<th scope="col">table</th>
<th scope="col">price</th>
<th scope="col">x</th>
<th scope="col">y</th>
<th scope="col">z</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;ord&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.23</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td>0.21</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td>0.23</td>
<td>Good</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td>0.29</td>
<td>Premium</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td>0.31</td>
<td>Good</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
<tr class="even">
<td>0.24</td>
<td>Very Good</td>
<td>J</td>
<td>VVS2</td>
<td>62.8</td>
<td>57</td>
<td>336</td>
<td>3.94</td>
<td>3.96</td>
<td>2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">a=</span>lubridate<span class="sc">::</span><span class="fu">now</span>()<span class="sc">+</span><span class="fu">runif</span>(<span class="fl">1e3</span>)<span class="sc">*</span><span class="dv">86400</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">b=</span>lubridate<span class="sc">::</span><span class="fu">today</span>()<span class="sc">+</span><span class="fu">runif</span>(<span class="fl">1e3</span>)<span class="sc">*</span><span class="dv">30</span>,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">c=</span><span class="dv">1</span><span class="sc">:</span><span class="fl">1e3</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">d=</span><span class="fu">runif</span>(<span class="fl">1e3</span>),</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">e=</span><span class="fu">sample</span>(letters,<span class="fl">1e3</span>,<span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 1000 × 5</caption>
<thead>
<tr class="header">
<th scope="col">a</th>
<th scope="col">b</th>
<th scope="col">c</th>
<th scope="col">d</th>
<th scope="col">e</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dttm&gt;</th>
<th scope="col">&lt;date&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2022-10-02 01:17:43</td>
<td>2022-10-23</td>
<td>1</td>
<td>0.07904540</td>
<td>d</td>
</tr>
<tr class="even">
<td>2022-10-01 22:59:44</td>
<td>2022-10-16</td>
<td>2</td>
<td>0.17864565</td>
<td>z</td>
</tr>
<tr class="odd">
<td>2022-10-01 23:43:46</td>
<td>2022-10-08</td>
<td>3</td>
<td>0.86078870</td>
<td>d</td>
</tr>
<tr class="even">
<td>2022-10-02 03:40:45</td>
<td>2022-10-04</td>
<td>4</td>
<td>0.93952259</td>
<td>g</td>
</tr>
<tr class="odd">
<td>2022-10-01 23:50:48</td>
<td>2022-10-12</td>
<td>5</td>
<td>0.87904425</td>
<td>k</td>
</tr>
<tr class="even">
<td>2022-10-02 08:52:52</td>
<td>2022-10-22</td>
<td>6</td>
<td>0.01717623</td>
<td>y</td>
</tr>
<tr class="odd">
<td>2022-10-01 23:04:13</td>
<td>2022-10-20</td>
<td>7</td>
<td>0.61590930</td>
<td>s</td>
</tr>
<tr class="even">
<td>2022-10-02 07:41:45</td>
<td>2022-10-02</td>
<td>8</td>
<td>0.15905475</td>
<td>t</td>
</tr>
<tr class="odd">
<td>2022-10-02 03:38:31</td>
<td>2022-10-06</td>
<td>9</td>
<td>0.28964310</td>
<td>e</td>
</tr>
<tr class="even">
<td>2022-10-02 03:33:58</td>
<td>2022-10-05</td>
<td>10</td>
<td>0.73699888</td>
<td>y</td>
</tr>
<tr class="odd">
<td>2022-10-02 03:26:09</td>
<td>2022-10-05</td>
<td>11</td>
<td>0.34331203</td>
<td>t</td>
</tr>
<tr class="even">
<td>2022-10-02 11:56:58</td>
<td>2022-10-24</td>
<td>12</td>
<td>0.56826309</td>
<td>s</td>
</tr>
<tr class="odd">
<td>2022-10-02 05:23:19</td>
<td>2022-10-14</td>
<td>13</td>
<td>0.10237698</td>
<td>g</td>
</tr>
<tr class="even">
<td>2022-10-02 14:05:24</td>
<td>2022-10-05</td>
<td>14</td>
<td>0.03664026</td>
<td>k</td>
</tr>
<tr class="odd">
<td>2022-10-02 12:35:50</td>
<td>2022-10-30</td>
<td>15</td>
<td>0.49635435</td>
<td>t</td>
</tr>
<tr class="even">
<td>2022-10-02 02:42:11</td>
<td>2022-10-25</td>
<td>16</td>
<td>0.01659913</td>
<td>c</td>
</tr>
<tr class="odd">
<td>2022-10-02 05:53:12</td>
<td>2022-10-05</td>
<td>17</td>
<td>0.63373399</td>
<td>w</td>
</tr>
<tr class="even">
<td>2022-10-02 08:18:19</td>
<td>2022-10-27</td>
<td>18</td>
<td>0.01377930</td>
<td>l</td>
</tr>
<tr class="odd">
<td>2022-10-02 17:44:45</td>
<td>2022-10-17</td>
<td>19</td>
<td>0.65322412</td>
<td>v</td>
</tr>
<tr class="even">
<td>2022-10-01 22:21:33</td>
<td>2022-10-04</td>
<td>20</td>
<td>0.76266778</td>
<td>k</td>
</tr>
<tr class="odd">
<td>2022-10-02 11:31:59</td>
<td>2022-10-28</td>
<td>21</td>
<td>0.22273304</td>
<td>f</td>
</tr>
<tr class="even">
<td>2022-10-02 19:58:45</td>
<td>2022-10-18</td>
<td>22</td>
<td>0.08504631</td>
<td>m</td>
</tr>
<tr class="odd">
<td>2022-10-02 15:35:07</td>
<td>2022-10-05</td>
<td>23</td>
<td>0.93193100</td>
<td>i</td>
</tr>
<tr class="even">
<td>2022-10-02 05:57:29</td>
<td>2022-10-21</td>
<td>24</td>
<td>0.82549381</td>
<td>y</td>
</tr>
<tr class="odd">
<td>2022-10-02 03:49:29</td>
<td>2022-10-04</td>
<td>25</td>
<td>0.87586050</td>
<td>g</td>
</tr>
<tr class="even">
<td>2022-10-02 16:10:10</td>
<td>2022-10-03</td>
<td>26</td>
<td>0.18427842</td>
<td>f</td>
</tr>
<tr class="odd">
<td>2022-10-01 23:03:23</td>
<td>2022-10-10</td>
<td>27</td>
<td>0.19592865</td>
<td>e</td>
</tr>
<tr class="even">
<td>2022-10-02 14:11:55</td>
<td>2022-10-03</td>
<td>28</td>
<td>0.20376826</td>
<td>v</td>
</tr>
<tr class="odd">
<td>2022-10-02 05:42:00</td>
<td>2022-10-01</td>
<td>29</td>
<td>0.71602347</td>
<td>u</td>
</tr>
<tr class="even">
<td>2022-10-02 14:37:36</td>
<td>2022-10-11</td>
<td>30</td>
<td>0.47020862</td>
<td>u</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2022-10-02 13:04:54</td>
<td>2022-10-25</td>
<td>971</td>
<td>0.86671718</td>
<td>j</td>
</tr>
<tr class="odd">
<td>2022-10-01 21:17:47</td>
<td>2022-10-07</td>
<td>972</td>
<td>0.56333952</td>
<td>d</td>
</tr>
<tr class="even">
<td>2022-10-02 00:42:52</td>
<td>2022-10-18</td>
<td>973</td>
<td>0.53318103</td>
<td>r</td>
</tr>
<tr class="odd">
<td>2022-10-02 07:44:26</td>
<td>2022-10-06</td>
<td>974</td>
<td>0.01763443</td>
<td>c</td>
</tr>
<tr class="even">
<td>2022-10-02 00:33:14</td>
<td>2022-10-26</td>
<td>975</td>
<td>0.93499874</td>
<td>l</td>
</tr>
<tr class="odd">
<td>2022-10-02 04:32:36</td>
<td>2022-10-22</td>
<td>976</td>
<td>0.28361392</td>
<td>q</td>
</tr>
<tr class="even">
<td>2022-10-01 23:27:32</td>
<td>2022-10-01</td>
<td>977</td>
<td>0.27174637</td>
<td>e</td>
</tr>
<tr class="odd">
<td>2022-10-02 17:35:56</td>
<td>2022-10-04</td>
<td>978</td>
<td>0.84402890</td>
<td>g</td>
</tr>
<tr class="even">
<td>2022-10-02 09:59:34</td>
<td>2022-10-04</td>
<td>979</td>
<td>0.69759029</td>
<td>g</td>
</tr>
<tr class="odd">
<td>2022-10-02 07:21:53</td>
<td>2022-10-02</td>
<td>980</td>
<td>0.26624991</td>
<td>r</td>
</tr>
<tr class="even">
<td>2022-10-02 15:04:21</td>
<td>2022-10-29</td>
<td>981</td>
<td>0.35530486</td>
<td>a</td>
</tr>
<tr class="odd">
<td>2022-10-02 00:08:30</td>
<td>2022-10-13</td>
<td>982</td>
<td>0.05575729</td>
<td>l</td>
</tr>
<tr class="even">
<td>2022-10-02 02:10:33</td>
<td>2022-10-07</td>
<td>983</td>
<td>0.68215359</td>
<td>m</td>
</tr>
<tr class="odd">
<td>2022-10-02 01:44:38</td>
<td>2022-10-01</td>
<td>984</td>
<td>0.69344671</td>
<td>g</td>
</tr>
<tr class="even">
<td>2022-10-02 02:07:59</td>
<td>2022-10-05</td>
<td>985</td>
<td>0.93304451</td>
<td>k</td>
</tr>
<tr class="odd">
<td>2022-10-02 12:21:03</td>
<td>2022-10-01</td>
<td>986</td>
<td>0.06716917</td>
<td>i</td>
</tr>
<tr class="even">
<td>2022-10-01 23:56:20</td>
<td>2022-10-29</td>
<td>987</td>
<td>0.36384079</td>
<td>w</td>
</tr>
<tr class="odd">
<td>2022-10-02 11:39:18</td>
<td>2022-10-12</td>
<td>988</td>
<td>0.76277196</td>
<td>i</td>
</tr>
<tr class="even">
<td>2022-10-02 17:49:47</td>
<td>2022-10-08</td>
<td>989</td>
<td>0.16140199</td>
<td>j</td>
</tr>
<tr class="odd">
<td>2022-10-02 13:45:43</td>
<td>2022-10-11</td>
<td>990</td>
<td>0.17523457</td>
<td>x</td>
</tr>
<tr class="even">
<td>2022-10-02 03:13:52</td>
<td>2022-10-15</td>
<td>991</td>
<td>0.93648914</td>
<td>c</td>
</tr>
<tr class="odd">
<td>2022-10-02 06:18:18</td>
<td>2022-10-03</td>
<td>992</td>
<td>0.49585062</td>
<td>h</td>
</tr>
<tr class="even">
<td>2022-10-02 03:02:46</td>
<td>2022-10-17</td>
<td>993</td>
<td>0.66820877</td>
<td>p</td>
</tr>
<tr class="odd">
<td>2022-10-02 09:21:35</td>
<td>2022-10-03</td>
<td>994</td>
<td>0.25612216</td>
<td>h</td>
</tr>
<tr class="even">
<td>2022-10-02 02:01:02</td>
<td>2022-10-10</td>
<td>995</td>
<td>0.62971457</td>
<td>a</td>
</tr>
<tr class="odd">
<td>2022-10-02 05:38:54</td>
<td>2022-10-04</td>
<td>996</td>
<td>0.23914501</td>
<td>x</td>
</tr>
<tr class="even">
<td>2022-10-02 17:17:02</td>
<td>2022-10-02</td>
<td>997</td>
<td>0.64705285</td>
<td>p</td>
</tr>
<tr class="odd">
<td>2022-10-02 09:45:24</td>
<td>2022-10-23</td>
<td>998</td>
<td>0.19531533</td>
<td>j</td>
</tr>
<tr class="even">
<td>2022-10-02 10:20:00</td>
<td>2022-10-11</td>
<td>999</td>
<td>0.75877675</td>
<td>s</td>
</tr>
<tr class="odd">
<td>2022-10-02 19:40:23</td>
<td>2022-10-15</td>
<td>1000</td>
<td>0.89462929</td>
<td>p</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="提取子集" class="level4">
<h4 class="anchored" data-anchor-id="提取子集">提取子集</h4>
<p>如<code>$</code>和<code>[[</code>，<code>[[</code>能够按照名称或位置提取变量，<code>$</code>只能按照名称提取变量。</p>
<div class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">tibble</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">5</span>),</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>0.252373256953433</li><li>0.348186866613105</li><li>0.497539844829589</li><li>0.601780914701521</li><li>0.887235613539815</li></ol>
</div>
</div>
<div class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"x"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>0.252373256953433</li><li>0.348186866613105</li><li>0.497539844829589</li><li>0.601780914701521</li><li>0.887235613539815</li></ol>
</div>
</div>
</section>
<section id="与旧代码交互" class="level4">
<h4 class="anchored" data-anchor-id="与旧代码交互">与旧代码交互</h4>
<div class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.data.frame</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'data.frame'
</div>
</div>
</section>
<section id="使用readr数据导入" class="level3">
<h3 class="anchored" data-anchor-id="使用readr数据导入">使用readr数据导入</h3>
<div class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>readr中的多数函数用于平面文件转换为数据框。 - <code>read_csv()</code> - <code>read_fwf()</code>读取固定宽度的文件。</p>
<div class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"/Users/a182501/R_data-mining/M2_IFI_Data_Basket.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1000 Columns: 18
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (14): Payment, Gender, Tenant, Fruits &amp; vegetables, Meat, Milk products,...
dbl  (4): Card num., Amount, Income, Age

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<div class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>heights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A spec_tbl_df: 1000 × 18</caption>
<thead>
<tr class="header">
<th scope="col">Card num.</th>
<th scope="col">Amount</th>
<th scope="col">Payment</th>
<th scope="col">Gender</th>
<th scope="col">Tenant</th>
<th scope="col">Income</th>
<th scope="col">Age</th>
<th scope="col">Fruits &amp; vegetables</th>
<th scope="col">Meat</th>
<th scope="col">Milk products</th>
<th scope="col">Canned vegetables</th>
<th scope="col">Canned meat</th>
<th scope="col">Frozen goods</th>
<th scope="col">Beer</th>
<th scope="col">Wine</th>
<th scope="col">Soda drinks</th>
<th scope="col">Fish</th>
<th scope="col">Textile</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>39808</td>
<td>427.12</td>
<td>Cheque</td>
<td>M</td>
<td>Yes</td>
<td>270000</td>
<td>46</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>67362</td>
<td>253.56</td>
<td>Cash</td>
<td>F</td>
<td>Yes</td>
<td>300000</td>
<td>28</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>10872</td>
<td>206.17</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>132000</td>
<td>36</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>26748</td>
<td>236.88</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>122000</td>
<td>26</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>91609</td>
<td>188.13</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>110000</td>
<td>24</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>26630</td>
<td>464.86</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>150000</td>
<td>35</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>62995</td>
<td>140.46</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>208000</td>
<td>30</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>38765</td>
<td>222.03</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>244000</td>
<td>22</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>28935</td>
<td>229.75</td>
<td>Cheque</td>
<td>F</td>
<td>Yes</td>
<td>295000</td>
<td>46</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>41792</td>
<td>145.69</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>296000</td>
<td>22</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>59480</td>
<td>103.28</td>
<td>Cash</td>
<td>F</td>
<td>Yes</td>
<td>271000</td>
<td>18</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>60755</td>
<td>137.79</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>200000</td>
<td>48</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>70998</td>
<td>365.09</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>273000</td>
<td>43</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>80617</td>
<td>102.01</td>
<td>Cheque</td>
<td>F</td>
<td>No</td>
<td>280000</td>
<td>43</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>61144</td>
<td>103.73</td>
<td>Cash</td>
<td>F</td>
<td>Yes</td>
<td>274000</td>
<td>24</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>36405</td>
<td>348.22</td>
<td>Cheque</td>
<td>F</td>
<td>No</td>
<td>184000</td>
<td>19</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>76567</td>
<td>422.48</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>231000</td>
<td>31</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>85699</td>
<td>181.68</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>270000</td>
<td>29</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>11357</td>
<td>107.53</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>231000</td>
<td>26</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>97761</td>
<td>323.18</td>
<td>Card</td>
<td>F</td>
<td>No</td>
<td>258000</td>
<td>38</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>20362</td>
<td>317.20</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>251000</td>
<td>38</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>33173</td>
<td>368.32</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>247000</td>
<td>43</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>69934</td>
<td>311.78</td>
<td>Cheque</td>
<td>F</td>
<td>No</td>
<td>213000</td>
<td>41</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>14743</td>
<td>216.81</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>124000</td>
<td>48</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>83071</td>
<td>298.53</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>181000</td>
<td>31</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>17571</td>
<td>152.70</td>
<td>Card</td>
<td>F</td>
<td>No</td>
<td>229000</td>
<td>23</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>37917</td>
<td>322.31</td>
<td>Cheque</td>
<td>F</td>
<td>Yes</td>
<td>270000</td>
<td>32</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>11236</td>
<td>425.66</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>268000</td>
<td>34</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>47914</td>
<td>445.91</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>247000</td>
<td>32</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>58154</td>
<td>491.36</td>
<td>Cheque</td>
<td>M</td>
<td>Yes</td>
<td>213000</td>
<td>50</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>47330</td>
<td>209.34</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>188000</td>
<td>21</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>94864</td>
<td>434.74</td>
<td>Cheque</td>
<td>F</td>
<td>Yes</td>
<td>142000</td>
<td>47</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>28959</td>
<td>215.85</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>236000</td>
<td>38</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>54462</td>
<td>388.38</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>159000</td>
<td>31</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>63880</td>
<td>167.47</td>
<td>Cash</td>
<td>F</td>
<td>Yes</td>
<td>208000</td>
<td>23</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>104630</td>
<td>496.88</td>
<td>Card</td>
<td>F</td>
<td>No</td>
<td>238000</td>
<td>19</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>11565</td>
<td>449.74</td>
<td>Cash</td>
<td>F</td>
<td>Yes</td>
<td>164000</td>
<td>19</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>93527</td>
<td>333.61</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>297000</td>
<td>38</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>88812</td>
<td>288.76</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>105000</td>
<td>34</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>61107</td>
<td>303.14</td>
<td>Card</td>
<td>F</td>
<td>No</td>
<td>211000</td>
<td>30</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>104722</td>
<td>336.67</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>167000</td>
<td>38</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>10915</td>
<td>124.62</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>135000</td>
<td>22</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>33056</td>
<td>144.01</td>
<td>Cheque</td>
<td>M</td>
<td>Yes</td>
<td>235000</td>
<td>27</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>78967</td>
<td>361.66</td>
<td>Cheque</td>
<td>M</td>
<td>No</td>
<td>145000</td>
<td>25</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>81825</td>
<td>250.71</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>123000</td>
<td>21</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>51846</td>
<td>370.74</td>
<td>Card</td>
<td>F</td>
<td>Yes</td>
<td>140000</td>
<td>21</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>58288</td>
<td>144.81</td>
<td>Card</td>
<td>M</td>
<td>Yes</td>
<td>160000</td>
<td>24</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>30459</td>
<td>326.75</td>
<td>Cheque</td>
<td>F</td>
<td>Yes</td>
<td>205000</td>
<td>29</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>70018</td>
<td>427.99</td>
<td>Cheque</td>
<td>F</td>
<td>No</td>
<td>258000</td>
<td>39</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>62789</td>
<td>151.60</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>140000</td>
<td>25</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>102887</td>
<td>333.15</td>
<td>Cheque</td>
<td>M</td>
<td>Yes</td>
<td>203000</td>
<td>46</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>83102</td>
<td>480.07</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>146000</td>
<td>47</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>57268</td>
<td>250.26</td>
<td>Cash</td>
<td>M</td>
<td>No</td>
<td>220000</td>
<td>25</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="odd">
<td>78139</td>
<td>485.57</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>252000</td>
<td>29</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>86331</td>
<td>454.52</td>
<td>Card</td>
<td>M</td>
<td>Yes</td>
<td>103000</td>
<td>29</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>31384</td>
<td>372.05</td>
<td>Card</td>
<td>M</td>
<td>Yes</td>
<td>275000</td>
<td>27</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>63996</td>
<td>137.35</td>
<td>Cheque</td>
<td>F</td>
<td>Yes</td>
<td>226000</td>
<td>23</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>99025</td>
<td>290.79</td>
<td>Card</td>
<td>M</td>
<td>No</td>
<td>274000</td>
<td>42</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>95921</td>
<td>348.57</td>
<td>Cash</td>
<td>F</td>
<td>No</td>
<td>233000</td>
<td>43</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>99164</td>
<td>306.96</td>
<td>Cash</td>
<td>M</td>
<td>Yes</td>
<td>216000</td>
<td>26</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"a,b,c</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="st">1,2,3</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="st">4,5,6"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 2 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (3): a, b, c

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A spec_tbl_df: 2 × 3</caption>
<thead>
<tr class="header">
<th scope="col">a</th>
<th scope="col">b</th>
<th scope="col">c</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"the first line of metadata</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="st">the second line of metadata</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="st">1,2,3"</span>,<span class="at">skip=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 0 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): 1, 2, 3

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A spec_tbl_df: 0 × 3</caption>
<thead>
<tr class="header">
<th scope="col">1</th>
<th scope="col">2</th>
<th scope="col">3</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
<p>readr中<code>skip</code>能够将前几行的数据直接跳过</p>
<div class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_double</span>(<span class="st">"1.2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
1.2
</div>
</div>
<p>readr中使用了“地区”这一个概念，能够按照不同的地区解析选项的一个对象。</p>
<div class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_double</span>(<span class="st">"1,23"</span>,<span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">","</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
1.23
</div>
</div>
<div class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_number</span>(<span class="st">"20%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
20
</div>
</div>
<p><code>parse_number</code>能够忽略其他非数值型字符。可用于处理百分比或货币</p>
</section>
<section id="使用lubridate处理时间" class="level3">
<h3 class="anchored" data-anchor-id="使用lubridate处理时间">使用lubridate处理时间</h3>
<section id="创建时间或日期" class="level4">
<h4 class="anchored" data-anchor-id="创建时间或日期">创建时间或日期</h4>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

✔ tibble  3.1.8     ✔ purrr   0.3.4
✔ tidyr   1.2.0     ✔ stringr 1.4.1
✔ readr   2.1.2     ✔ forcats 0.5.1

── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ stats::filter() masks dplyr::filter()
✖ stats::lag()    masks dplyr::lag()


Attachement du package : ‘lubridate’


Les objets suivants sont masqués depuis ‘package:base’:

    date, intersect, setdiff, union

</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<time datetime="2022-10-09">2022-10-09</time>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "2022-10-09 14:02:14 CST"</code></pre>
</div>
</div>
</section>
<section id="通过字符串创建" class="level4">
<h4 class="anchored" data-anchor-id="通过字符串创建">通过字符串创建</h4>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">"2017-10-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<time datetime="2017-10-10">2017-10-10</time>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">"January 31st,2017"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<time datetime="2017-01-31">2017-01-31</time>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="dv">20170131</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<time datetime="2017-01-31">2017-01-31</time>
</div>
</div>
<p>加入一个时区参数</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="dv">20170101</span>,<span class="at">tz=</span><span class="st">"UTC"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "2017-01-01 UTC"</code></pre>
</div>
</div>
</section>
<section id="日期时间成分" class="level4">
<h4 class="anchored" data-anchor-id="日期时间成分">日期时间成分</h4>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>datetime<span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2016-10-11 12:34:11"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(datetime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
2016
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mday</span>(datetime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
11
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">yday</span>(datetime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
285
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mday</span>(datetime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
11
</div>
</div>
<ul>
<li><code>mday()</code>一个月中的第几天;</li>
<li><code>yday()</code>一年中的第几天;</li>
<li><code>wday()</code>一周中的第几天</li>
</ul>
</section>
<section id="重要的原子向量" class="level4">
<h4 class="anchored" data-anchor-id="重要的原子向量">重要的原子向量</h4>
<p>逻辑型</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span><span class="sc">%%</span><span class="dv">3</span><span class="sc">==</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li></ol>
</div>
</div>
<p>数值型</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'double'
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(1L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'integer'
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">sqrt</span>(<span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'double'
</div>
</div>
<p>字符型</p>
<p>缺失值</p>
<section id="强制转换" class="level5">
<h5 class="anchored" data-anchor-id="强制转换">强制转换</h5>
<ul>
<li><code>as.logical()</code>、<code>as.integer()</code>、<code>as.double()</code>等函数转换方式，就是一种强制转换</li>
</ul>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">20</span>,<span class="dv">100</span>,<span class="at">replace=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x<span class="sc">&gt;</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
55
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
0.55
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,1L))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'integer'
</div>
</div>
</section>
</section>
<section id="检验函数" class="level4">
<h4 class="anchored" data-anchor-id="检验函数">检验函数</h4>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">10</span>)<span class="sc">+</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>102</li><li>101</li><li>108</li><li>104</li><li>107</li><li>103</li><li>105</li><li>109</li><li>110</li><li>106</li></ol>
</div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">10</span>)<span class="sc">&gt;</span><span class="fl">0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>TRUE</li><li>FALSE</li><li>TRUE</li><li>TRUE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li></ol>
</div>
</div>
</section>
</section>
<section id="使用purrr实现迭代" class="level3">
<h3 class="anchored" data-anchor-id="使用purrr实现迭代">使用<code>purrr</code>实现迭代</h3>
<section id="for-循环" class="level4">
<h4 class="anchored" data-anchor-id="for-循环"><code>for</code> 循环</h4>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">a=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">b=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">c=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 4</caption>
<thead>
<tr class="header">
<th scope="col">a</th>
<th scope="col">b</th>
<th scope="col">c</th>
<th scope="col">d</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.8970158</td>
<td>0.6873088</td>
<td>0.80024365</td>
<td>-0.98162763</td>
</tr>
<tr class="even">
<td>-0.5751092</td>
<td>-0.3848371</td>
<td>1.86547931</td>
<td>-0.79731893</td>
</tr>
<tr class="odd">
<td>-0.5440100</td>
<td>0.9645361</td>
<td>-0.74678144</td>
<td>-1.06925662</td>
</tr>
<tr class="even">
<td>-1.7279895</td>
<td>-1.3180739</td>
<td>-0.07265774</td>
<td>-0.04647237</td>
</tr>
<tr class="odd">
<td>-0.8031987</td>
<td>-0.1179136</td>
<td>2.07089258</td>
<td>-0.41219837</td>
</tr>
<tr class="even">
<td>0.3596368</td>
<td>-0.4623563</td>
<td>-0.04209510</td>
<td>1.24028689</td>
</tr>
<tr class="odd">
<td>0.6522909</td>
<td>0.4926086</td>
<td>-2.17560267</td>
<td>1.26102775</td>
</tr>
<tr class="even">
<td>-1.8867870</td>
<td>-0.8284376</td>
<td>0.15331049</td>
<td>-1.54542523</td>
</tr>
<tr class="odd">
<td>-2.4719750</td>
<td>0.5141981</td>
<td>1.98788444</td>
<td>-0.04804680</td>
</tr>
<tr class="even">
<td>-1.4517999</td>
<td>0.6235135</td>
<td>-1.96672755</td>
<td>-1.47042800</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">mean</span>(df<span class="sc">$</span>a),<span class="fu">mean</span>(df<span class="sc">$</span>b))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>-0.755192578727417</li><li>0.0170546566497491</li></ol>
</div>
</div>
<p>每个循环都包含三个部分。</p>
<p>输出：<code>output&lt;-vector("double",length(x))</code></p>
<p>开始循环时候，必须为输出结果分配足够的时间，对循环效率来说比较重要，若在每次迭代时候，都是用<code>c()</code>来保存循环结果，<code>for</code>循环就非常慢</p>
<p>序列：<code>i in seq_along(df)</code></p>
<p>循环体： <code>output[[i]]&lt;-median(df[[i]])</code></p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>rescale01<span class="ot">&lt;-</span><span class="cf">function</span>(x){</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    rng<span class="ot">&lt;-</span><span class="fu">range</span>(x,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    (x<span class="sc">-</span>rng[<span class="dv">1</span>])<span class="sc">/</span>(rng[<span class="dv">2</span>]<span class="sc">-</span>rng[<span class="dv">1</span>])</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a<span class="ot">&lt;-</span><span class="fu">rescale01</span>(df<span class="sc">$</span>a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>1</li><li>0.563036810301723</li><li>0.572267809015891</li><li>0.220833333612345</li><li>0.495334167740919</li><li>0.840492593468615</li><li>0.927359592117168</li><li>0.173698292087717</li><li>0</li><li>0.302813271637925</li></ol>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)){</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    df[[i]]<span class="ot">&lt;-</span><span class="fu">rescale01</span>(df[[i]])</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>note</strong>:循环列表或数据框，使用<code>[[</code></p>
<p>循环的方式： - 元素循环 - 名称循环</p>
<p>使用索引值进行循环是最常用的方式</p>
</section>
<section id="未知长度的输出" class="level4">
<h4 class="anchored" data-anchor-id="未知长度的输出">未知长度的输出</h4>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>means <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>output<span class="ot">&lt;-</span><span class="fu">double</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(means)){</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">100</span>,<span class="dv">1</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    output<span class="ot">&lt;-</span> <span class="fu">c</span>(output,<span class="fu">rnorm</span>(n,means[[i]]))</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:253] -0.366 0.595 -0.816 -0.907 -1.424 ...</code></pre>
</div>
</div>
</section>
<section id="for-与函数编程" class="level4">
<h4 class="anchored" data-anchor-id="for-与函数编程">for 与函数编程</h4>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">a=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">b=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">c=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">d=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"double"</span>,<span class="fu">length</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)){</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>    output[[i]]<span class="ot">=</span><span class="fu">mean</span>(df[[i]])</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>-0.392677235398266</li><li>-0.000158837329926254</li><li>-0.465850203489892</li><li>0.344197800836397</li></ol>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>col_summary<span class="ot">&lt;-</span><span class="cf">function</span>(df,fun){</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    out<span class="ot">&lt;-</span><span class="fu">vector</span>(<span class="st">"double"</span>,<span class="fu">length</span>(df))</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)){</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>        out[i]<span class="ot">&lt;-</span><span class="fu">fun</span>(df[[i]])</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    out</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">col_summary</span>(df,median)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>-0.512714109408632</li><li>-0.111337745611366</li><li>-0.45908034745605</li><li>0.433442364331742</li></ol>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">col_summary</span>(df,mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>-0.392677235398266</li><li>-0.000158837329926254</li><li>-0.465850203489892</li><li>0.344197800836397</li></ol>
</div>
</div>
<p>将函数作为参数传入。</p>
</section>
<section id="映射函数" class="level4">
<h4 class="anchored" data-anchor-id="映射函数">映射函数</h4>
<p>先对于向量进行映射，再对于每个元素进行处理，最后保存结果。 - <code>map()</code>用于输出列表; - <code>map_lgl()</code>用于输出逻辑型向量； - <code>map_int()</code>用于输出整型向量；</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"purrr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(df,mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.dl-inline {width: auto; margin:0; padding: 0}
.dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}
.dl-inline>dt::after {content: ":\0020"; padding-right: .5ex}
.dl-inline>dt:not(:first-of-type) {padding-left: .5ex}
</style><dl class="dl-inline"><dt>a</dt><dd>-0.392677235398266</dd><dt>b</dt><dd>-0.000158837329926254</dd><dt>c</dt><dd>-0.465850203489892</dd><dt>d</dt><dd>0.344197800836397</dd></dl>
</div>
</div>
</section>
</section>
<section id="使用dplyr处理关系数据" class="level3">
<h3 class="anchored" data-anchor-id="使用dplyr处理关系数据">使用<code>dplyr</code>处理关系数据</h3>
<p>键：用于处理连接每对数据表的变量称为键。键是唯一能够标识观测的变量。单一变量能够标识一个规则。 - <strong>主键</strong>：唯一标识所在数据表中的观测； - <strong>外键</strong>：唯一标识另一个数据表的观测</p>
<div class="cell" data-execution_count="155">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"nycflights13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="160">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>planes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 3322 × 9</caption>
<thead>
<tr class="header">
<th scope="col">tailnum</th>
<th scope="col">year</th>
<th scope="col">type</th>
<th scope="col">manufacturer</th>
<th scope="col">model</th>
<th scope="col">engines</th>
<th scope="col">seats</th>
<th scope="col">speed</th>
<th scope="col">engine</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>N10156</td>
<td>2004</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N102UW</td>
<td>1998</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N103US</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N104UW</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N10575</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145LR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N105UW</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N107US</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N108UW</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N109UW</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N110UW</td>
<td>1999</td>
<td>Fixed wing multi engine</td>
<td>AIRBUS INDUSTRIE</td>
<td>A320-214</td>
<td>2</td>
<td>182</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11106</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11107</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11109</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11113</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11119</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11121</td>
<td>2003</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11127</td>
<td>2003</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11137</td>
<td>2003</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11140</td>
<td>2003</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11150</td>
<td>2003</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11155</td>
<td>2004</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11164</td>
<td>2004</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11165</td>
<td>2004</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11176</td>
<td>2004</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11181</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11184</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11187</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11189</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N11191</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N11192</td>
<td>2005</td>
<td>Fixed wing multi engine</td>
<td>EMBRAER</td>
<td>EMB-145XR</td>
<td>2</td>
<td>55</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>N984DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N985AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N985DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N986AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N986DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N987AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N987DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N988AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N988DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N989AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N989DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N990AT</td>
<td>2001</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N990DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N991AT</td>
<td>NA</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N991DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N992AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N992DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N993AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N993DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N994AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N994DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS CORPORATION</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-jet</td>
</tr>
<tr class="odd">
<td>N995AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N995DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N996AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N996DL</td>
<td>1991</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N997AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N997DL</td>
<td>1992</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS AIRCRAFT CO</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="odd">
<td>N998AT</td>
<td>2002</td>
<td>Fixed wing multi engine</td>
<td>BOEING</td>
<td>717-200</td>
<td>2</td>
<td>100</td>
<td>NA</td>
<td>Turbo-fan</td>
</tr>
<tr class="even">
<td>N998DL</td>
<td>1992</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS CORPORATION</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-jet</td>
</tr>
<tr class="odd">
<td>N999DN</td>
<td>1992</td>
<td>Fixed wing multi engine</td>
<td>MCDONNELL DOUGLAS CORPORATION</td>
<td>MD-88</td>
<td>2</td>
<td>142</td>
<td>NA</td>
<td>Turbo-jet</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>planes <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(tailnum)<span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 0 × 2</caption>
<thead>
<tr class="header">
<th scope="col">tailnum</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
<section id="合并连接" class="level4">
<h4 class="anchored" data-anchor-id="合并连接">合并连接</h4>
<p>可以将两个表格中的变量进行组合，先通过两个表格的键进行匹配观测，然后在将一个表格中的变量复制到表格中。</p>
<p>和<code>mutate()</code>函数一样，链接函数也会将变量添加到表格右侧。</p>
<div class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 19</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>517</td>
<td>515</td>
<td>2</td>
<td>830</td>
<td>819</td>
<td>11</td>
<td>UA</td>
<td>1545</td>
<td>N14228</td>
<td>EWR</td>
<td>IAH</td>
<td>227</td>
<td>1400</td>
<td>5</td>
<td>15</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>533</td>
<td>529</td>
<td>4</td>
<td>850</td>
<td>830</td>
<td>20</td>
<td>UA</td>
<td>1714</td>
<td>N24211</td>
<td>LGA</td>
<td>IAH</td>
<td>227</td>
<td>1416</td>
<td>5</td>
<td>29</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>542</td>
<td>540</td>
<td>2</td>
<td>923</td>
<td>850</td>
<td>33</td>
<td>AA</td>
<td>1141</td>
<td>N619AA</td>
<td>JFK</td>
<td>MIA</td>
<td>160</td>
<td>1089</td>
<td>5</td>
<td>40</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>544</td>
<td>545</td>
<td>-1</td>
<td>1004</td>
<td>1022</td>
<td>-18</td>
<td>B6</td>
<td>725</td>
<td>N804JB</td>
<td>JFK</td>
<td>BQN</td>
<td>183</td>
<td>1576</td>
<td>5</td>
<td>45</td>
<td>2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>600</td>
<td>-6</td>
<td>812</td>
<td>837</td>
<td>-25</td>
<td>DL</td>
<td>461</td>
<td>N668DN</td>
<td>LGA</td>
<td>ATL</td>
<td>116</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>558</td>
<td>-4</td>
<td>740</td>
<td>728</td>
<td>12</td>
<td>UA</td>
<td>1696</td>
<td>N39463</td>
<td>EWR</td>
<td>ORD</td>
<td>150</td>
<td>719</td>
<td>5</td>
<td>58</td>
<td>2013-01-01 05:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>flights2<span class="ot">&lt;-</span>flights <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year<span class="sc">:</span>day,hour,origin,dest,tailnum,carrier)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>flights2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 336776 × 8</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">hour</th>
<th scope="col">origin</th>
<th scope="col">dest</th>
<th scope="col">tailnum</th>
<th scope="col">carrier</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>EWR</td>
<td>IAH</td>
<td>N14228</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>LGA</td>
<td>IAH</td>
<td>N24211</td>
<td>UA</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>JFK</td>
<td>MIA</td>
<td>N619AA</td>
<td>AA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>JFK</td>
<td>BQN</td>
<td>N804JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>ATL</td>
<td>N668DN</td>
<td>DL</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>EWR</td>
<td>ORD</td>
<td>N39463</td>
<td>UA</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>FLL</td>
<td>N516JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>IAD</td>
<td>N829AS</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>MCO</td>
<td>N593JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>ORD</td>
<td>N3ALAA</td>
<td>AA</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>PBI</td>
<td>N793JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>TPA</td>
<td>N657JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>LAX</td>
<td>N29129</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>SFO</td>
<td>N53441</td>
<td>UA</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>DFW</td>
<td>N3DUAA</td>
<td>AA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>JFK</td>
<td>BOS</td>
<td>N708JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>LAS</td>
<td>N76515</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>FLL</td>
<td>N595JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>ATL</td>
<td>N542MQ</td>
<td>MQ</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>PBI</td>
<td>N644JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>MSP</td>
<td>N971DL</td>
<td>DL</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>LGA</td>
<td>DTW</td>
<td>N730MQ</td>
<td>MQ</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>MIA</td>
<td>N633AA</td>
<td>AA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>ATL</td>
<td>N3739P</td>
<td>DL</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>MIA</td>
<td>N53442</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>ORD</td>
<td>N9EAMQ</td>
<td>MQ</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>SFO</td>
<td>N532UA</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>RSW</td>
<td>N635JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>JFK</td>
<td>SJU</td>
<td>N794JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>EWR</td>
<td>ATL</td>
<td>N326NB</td>
<td>DL</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>LGA</td>
<td>CHO</td>
<td>N712EV</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>EWR</td>
<td>CLT</td>
<td>N16546</td>
<td>EV</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>JFK</td>
<td>DEN</td>
<td>N807JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>20</td>
<td>LGA</td>
<td>RIC</td>
<td>N751EV</td>
<td>EV</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>JFK</td>
<td>DCA</td>
<td>N807MQ</td>
<td>MQ</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>JFK</td>
<td>LAX</td>
<td>N335AA</td>
<td>AA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>EWR</td>
<td>PWM</td>
<td>N12957</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>JFK</td>
<td>SJU</td>
<td>N633JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>LGA</td>
<td>FLL</td>
<td>N627JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>EWR</td>
<td>BOS</td>
<td>N813UA</td>
<td>UA</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>EWR</td>
<td>MHT</td>
<td>N10575</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>18</td>
<td>JFK</td>
<td>BUF</td>
<td>N906XJ</td>
<td>9E</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>LGA</td>
<td>BGR</td>
<td>N722EV</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>LGA</td>
<td>BNA</td>
<td>N532MQ</td>
<td>MQ</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>20</td>
<td>EWR</td>
<td>STL</td>
<td>N12145</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>PWM</td>
<td>N193JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>21</td>
<td>EWR</td>
<td>SFO</td>
<td>N578UA</td>
<td>UA</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>20</td>
<td>JFK</td>
<td>MCO</td>
<td>N804JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>BTV</td>
<td>N318JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>SYR</td>
<td>N354JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>BUF</td>
<td>N281JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>ROC</td>
<td>N346JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>JFK</td>
<td>BOS</td>
<td>N565JB</td>
<td>B6</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>23</td>
<td>JFK</td>
<td>PSE</td>
<td>N516JB</td>
<td>B6</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>18</td>
<td>LGA</td>
<td>BNA</td>
<td>N740EV</td>
<td>EV</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>14</td>
<td>JFK</td>
<td>DCA</td>
<td>NA</td>
<td>9E</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>22</td>
<td>LGA</td>
<td>SYR</td>
<td>NA</td>
<td>9E</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>12</td>
<td>LGA</td>
<td>BNA</td>
<td>N535MQ</td>
<td>MQ</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>11</td>
<td>LGA</td>
<td>CLE</td>
<td>N511MQ</td>
<td>MQ</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>8</td>
<td>LGA</td>
<td>RDU</td>
<td>N839MQ</td>
<td>MQ</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>通过<code>mutate()</code>来实现变量的生成，在使用<code>match()</code>来进行变量的匹配</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>airlines<span class="sc">$</span>name[<span class="dv">12</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'United Air Lines Inc.'
</div>
</div>
<p><code>match()</code>返回的是<code>airlines$carrier</code>的位置</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>origin,<span class="sc">-</span>dest)<span class="sc">%&gt;%</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">name=</span>airlines<span class="sc">$</span>name[<span class="fu">match</span>(carrier,airlines<span class="sc">$</span>carrier)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 336776 × 18</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">month</th>
<th scope="col">day</th>
<th scope="col">dep_time</th>
<th scope="col">sched_dep_time</th>
<th scope="col">dep_delay</th>
<th scope="col">arr_time</th>
<th scope="col">sched_arr_time</th>
<th scope="col">arr_delay</th>
<th scope="col">carrier</th>
<th scope="col">flight</th>
<th scope="col">tailnum</th>
<th scope="col">air_time</th>
<th scope="col">distance</th>
<th scope="col">hour</th>
<th scope="col">minute</th>
<th scope="col">time_hour</th>
<th scope="col">name</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dttm&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>517</td>
<td>515</td>
<td>2</td>
<td>830</td>
<td>819</td>
<td>11</td>
<td>UA</td>
<td>1545</td>
<td>N14228</td>
<td>227</td>
<td>1400</td>
<td>5</td>
<td>15</td>
<td>2013-01-01 05:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>533</td>
<td>529</td>
<td>4</td>
<td>850</td>
<td>830</td>
<td>20</td>
<td>UA</td>
<td>1714</td>
<td>N24211</td>
<td>227</td>
<td>1416</td>
<td>5</td>
<td>29</td>
<td>2013-01-01 05:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>542</td>
<td>540</td>
<td>2</td>
<td>923</td>
<td>850</td>
<td>33</td>
<td>AA</td>
<td>1141</td>
<td>N619AA</td>
<td>160</td>
<td>1089</td>
<td>5</td>
<td>40</td>
<td>2013-01-01 05:00:00</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>544</td>
<td>545</td>
<td>-1</td>
<td>1004</td>
<td>1022</td>
<td>-18</td>
<td>B6</td>
<td>725</td>
<td>N804JB</td>
<td>183</td>
<td>1576</td>
<td>5</td>
<td>45</td>
<td>2013-01-01 05:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>600</td>
<td>-6</td>
<td>812</td>
<td>837</td>
<td>-25</td>
<td>DL</td>
<td>461</td>
<td>N668DN</td>
<td>116</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>Delta Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>554</td>
<td>558</td>
<td>-4</td>
<td>740</td>
<td>728</td>
<td>12</td>
<td>UA</td>
<td>1696</td>
<td>N39463</td>
<td>150</td>
<td>719</td>
<td>5</td>
<td>58</td>
<td>2013-01-01 05:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>555</td>
<td>600</td>
<td>-5</td>
<td>913</td>
<td>854</td>
<td>19</td>
<td>B6</td>
<td>507</td>
<td>N516JB</td>
<td>158</td>
<td>1065</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>709</td>
<td>723</td>
<td>-14</td>
<td>EV</td>
<td>5708</td>
<td>N829AS</td>
<td>53</td>
<td>229</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>557</td>
<td>600</td>
<td>-3</td>
<td>838</td>
<td>846</td>
<td>-8</td>
<td>B6</td>
<td>79</td>
<td>N593JB</td>
<td>140</td>
<td>944</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>753</td>
<td>745</td>
<td>8</td>
<td>AA</td>
<td>301</td>
<td>N3ALAA</td>
<td>138</td>
<td>733</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>849</td>
<td>851</td>
<td>-2</td>
<td>B6</td>
<td>49</td>
<td>N793JB</td>
<td>149</td>
<td>1028</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>853</td>
<td>856</td>
<td>-3</td>
<td>B6</td>
<td>71</td>
<td>N657JB</td>
<td>158</td>
<td>1005</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>924</td>
<td>917</td>
<td>7</td>
<td>UA</td>
<td>194</td>
<td>N29129</td>
<td>345</td>
<td>2475</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>558</td>
<td>600</td>
<td>-2</td>
<td>923</td>
<td>937</td>
<td>-14</td>
<td>UA</td>
<td>1124</td>
<td>N53441</td>
<td>361</td>
<td>2565</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>941</td>
<td>910</td>
<td>31</td>
<td>AA</td>
<td>707</td>
<td>N3DUAA</td>
<td>257</td>
<td>1389</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>559</td>
<td>0</td>
<td>702</td>
<td>706</td>
<td>-4</td>
<td>B6</td>
<td>1806</td>
<td>N708JB</td>
<td>44</td>
<td>187</td>
<td>5</td>
<td>59</td>
<td>2013-01-01 05:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>559</td>
<td>600</td>
<td>-1</td>
<td>854</td>
<td>902</td>
<td>-8</td>
<td>UA</td>
<td>1187</td>
<td>N76515</td>
<td>337</td>
<td>2227</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>851</td>
<td>858</td>
<td>-7</td>
<td>B6</td>
<td>371</td>
<td>N595JB</td>
<td>152</td>
<td>1076</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>600</td>
<td>600</td>
<td>0</td>
<td>837</td>
<td>825</td>
<td>12</td>
<td>MQ</td>
<td>4650</td>
<td>N542MQ</td>
<td>134</td>
<td>762</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>601</td>
<td>600</td>
<td>1</td>
<td>844</td>
<td>850</td>
<td>-6</td>
<td>B6</td>
<td>343</td>
<td>N644JB</td>
<td>147</td>
<td>1023</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>610</td>
<td>-8</td>
<td>812</td>
<td>820</td>
<td>-8</td>
<td>DL</td>
<td>1919</td>
<td>N971DL</td>
<td>170</td>
<td>1020</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
<td>Delta Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>602</td>
<td>605</td>
<td>-3</td>
<td>821</td>
<td>805</td>
<td>16</td>
<td>MQ</td>
<td>4401</td>
<td>N730MQ</td>
<td>105</td>
<td>502</td>
<td>6</td>
<td>5</td>
<td>2013-01-01 06:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>858</td>
<td>910</td>
<td>-12</td>
<td>AA</td>
<td>1895</td>
<td>N633AA</td>
<td>152</td>
<td>1085</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>606</td>
<td>610</td>
<td>-4</td>
<td>837</td>
<td>845</td>
<td>-8</td>
<td>DL</td>
<td>1743</td>
<td>N3739P</td>
<td>128</td>
<td>760</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
<td>Delta Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>607</td>
<td>607</td>
<td>0</td>
<td>858</td>
<td>915</td>
<td>-17</td>
<td>UA</td>
<td>1077</td>
<td>N53442</td>
<td>157</td>
<td>1085</td>
<td>6</td>
<td>7</td>
<td>2013-01-01 06:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>608</td>
<td>600</td>
<td>8</td>
<td>807</td>
<td>735</td>
<td>32</td>
<td>MQ</td>
<td>3768</td>
<td>N9EAMQ</td>
<td>139</td>
<td>719</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>611</td>
<td>600</td>
<td>11</td>
<td>945</td>
<td>931</td>
<td>14</td>
<td>UA</td>
<td>303</td>
<td>N532UA</td>
<td>366</td>
<td>2586</td>
<td>6</td>
<td>0</td>
<td>2013-01-01 06:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>613</td>
<td>610</td>
<td>3</td>
<td>925</td>
<td>921</td>
<td>4</td>
<td>B6</td>
<td>135</td>
<td>N635JB</td>
<td>175</td>
<td>1074</td>
<td>6</td>
<td>10</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>1039</td>
<td>1100</td>
<td>-21</td>
<td>B6</td>
<td>709</td>
<td>N794JB</td>
<td>182</td>
<td>1598</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>1</td>
<td>1</td>
<td>615</td>
<td>615</td>
<td>0</td>
<td>833</td>
<td>842</td>
<td>-9</td>
<td>DL</td>
<td>575</td>
<td>N326NB</td>
<td>120</td>
<td>746</td>
<td>6</td>
<td>15</td>
<td>2013-01-01 06:00:00</td>
<td>Delta Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2123</td>
<td>2125</td>
<td>-2</td>
<td>2223</td>
<td>2247</td>
<td>-24</td>
<td>EV</td>
<td>5489</td>
<td>N712EV</td>
<td>45</td>
<td>305</td>
<td>21</td>
<td>25</td>
<td>2013-09-30 21:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2127</td>
<td>2129</td>
<td>-2</td>
<td>2314</td>
<td>2323</td>
<td>-9</td>
<td>EV</td>
<td>3833</td>
<td>N16546</td>
<td>72</td>
<td>529</td>
<td>21</td>
<td>29</td>
<td>2013-09-30 21:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2128</td>
<td>2130</td>
<td>-2</td>
<td>2328</td>
<td>2359</td>
<td>-31</td>
<td>B6</td>
<td>97</td>
<td>N807JB</td>
<td>213</td>
<td>1626</td>
<td>21</td>
<td>30</td>
<td>2013-09-30 21:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2129</td>
<td>2059</td>
<td>30</td>
<td>2230</td>
<td>2232</td>
<td>-2</td>
<td>EV</td>
<td>5048</td>
<td>N751EV</td>
<td>45</td>
<td>292</td>
<td>20</td>
<td>59</td>
<td>2013-09-30 20:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2131</td>
<td>2140</td>
<td>-9</td>
<td>2225</td>
<td>2255</td>
<td>-30</td>
<td>MQ</td>
<td>3621</td>
<td>N807MQ</td>
<td>36</td>
<td>213</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2140</td>
<td>2140</td>
<td>0</td>
<td>10</td>
<td>40</td>
<td>-30</td>
<td>AA</td>
<td>185</td>
<td>N335AA</td>
<td>298</td>
<td>2475</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2142</td>
<td>2129</td>
<td>13</td>
<td>2250</td>
<td>2239</td>
<td>11</td>
<td>EV</td>
<td>4509</td>
<td>N12957</td>
<td>47</td>
<td>284</td>
<td>21</td>
<td>29</td>
<td>2013-09-30 21:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2145</td>
<td>2145</td>
<td>0</td>
<td>115</td>
<td>140</td>
<td>-25</td>
<td>B6</td>
<td>1103</td>
<td>N633JB</td>
<td>192</td>
<td>1598</td>
<td>21</td>
<td>45</td>
<td>2013-09-30 21:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2147</td>
<td>2137</td>
<td>10</td>
<td>30</td>
<td>27</td>
<td>3</td>
<td>B6</td>
<td>1371</td>
<td>N627JB</td>
<td>139</td>
<td>1076</td>
<td>21</td>
<td>37</td>
<td>2013-09-30 21:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2149</td>
<td>2156</td>
<td>-7</td>
<td>2245</td>
<td>2308</td>
<td>-23</td>
<td>UA</td>
<td>523</td>
<td>N813UA</td>
<td>37</td>
<td>200</td>
<td>21</td>
<td>56</td>
<td>2013-09-30 21:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2150</td>
<td>2159</td>
<td>-9</td>
<td>2250</td>
<td>2306</td>
<td>-16</td>
<td>EV</td>
<td>3842</td>
<td>N10575</td>
<td>39</td>
<td>209</td>
<td>21</td>
<td>59</td>
<td>2013-09-30 21:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2159</td>
<td>1845</td>
<td>194</td>
<td>2344</td>
<td>2030</td>
<td>194</td>
<td>9E</td>
<td>3320</td>
<td>N906XJ</td>
<td>50</td>
<td>301</td>
<td>18</td>
<td>45</td>
<td>2013-09-30 18:00:00</td>
<td>Endeavor Air Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2203</td>
<td>2205</td>
<td>-2</td>
<td>2339</td>
<td>2331</td>
<td>8</td>
<td>EV</td>
<td>5311</td>
<td>N722EV</td>
<td>61</td>
<td>378</td>
<td>22</td>
<td>5</td>
<td>2013-09-30 22:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2207</td>
<td>2140</td>
<td>27</td>
<td>2257</td>
<td>2250</td>
<td>7</td>
<td>MQ</td>
<td>3660</td>
<td>N532MQ</td>
<td>97</td>
<td>764</td>
<td>21</td>
<td>40</td>
<td>2013-09-30 21:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2211</td>
<td>2059</td>
<td>72</td>
<td>2339</td>
<td>2242</td>
<td>57</td>
<td>EV</td>
<td>4672</td>
<td>N12145</td>
<td>120</td>
<td>872</td>
<td>20</td>
<td>59</td>
<td>2013-09-30 20:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2231</td>
<td>2245</td>
<td>-14</td>
<td>2335</td>
<td>2356</td>
<td>-21</td>
<td>B6</td>
<td>108</td>
<td>N193JB</td>
<td>48</td>
<td>273</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2233</td>
<td>2113</td>
<td>80</td>
<td>112</td>
<td>30</td>
<td>42</td>
<td>UA</td>
<td>471</td>
<td>N578UA</td>
<td>318</td>
<td>2565</td>
<td>21</td>
<td>13</td>
<td>2013-09-30 21:00:00</td>
<td>United Air Lines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2235</td>
<td>2001</td>
<td>154</td>
<td>59</td>
<td>2249</td>
<td>130</td>
<td>B6</td>
<td>1083</td>
<td>N804JB</td>
<td>123</td>
<td>944</td>
<td>20</td>
<td>1</td>
<td>2013-09-30 20:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2237</td>
<td>2245</td>
<td>-8</td>
<td>2345</td>
<td>2353</td>
<td>-8</td>
<td>B6</td>
<td>234</td>
<td>N318JB</td>
<td>43</td>
<td>266</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2240</td>
<td>2245</td>
<td>-5</td>
<td>2334</td>
<td>2351</td>
<td>-17</td>
<td>B6</td>
<td>1816</td>
<td>N354JB</td>
<td>41</td>
<td>209</td>
<td>22</td>
<td>45</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2240</td>
<td>2250</td>
<td>-10</td>
<td>2347</td>
<td>7</td>
<td>-20</td>
<td>B6</td>
<td>2002</td>
<td>N281JB</td>
<td>52</td>
<td>301</td>
<td>22</td>
<td>50</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2241</td>
<td>2246</td>
<td>-5</td>
<td>2345</td>
<td>1</td>
<td>-16</td>
<td>B6</td>
<td>486</td>
<td>N346JB</td>
<td>47</td>
<td>264</td>
<td>22</td>
<td>46</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2307</td>
<td>2255</td>
<td>12</td>
<td>2359</td>
<td>2358</td>
<td>1</td>
<td>B6</td>
<td>718</td>
<td>N565JB</td>
<td>33</td>
<td>187</td>
<td>22</td>
<td>55</td>
<td>2013-09-30 22:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>2349</td>
<td>2359</td>
<td>-10</td>
<td>325</td>
<td>350</td>
<td>-25</td>
<td>B6</td>
<td>745</td>
<td>N516JB</td>
<td>196</td>
<td>1617</td>
<td>23</td>
<td>59</td>
<td>2013-09-30 23:00:00</td>
<td>JetBlue Airways</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1842</td>
<td>NA</td>
<td>NA</td>
<td>2019</td>
<td>NA</td>
<td>EV</td>
<td>5274</td>
<td>N740EV</td>
<td>NA</td>
<td>764</td>
<td>18</td>
<td>42</td>
<td>2013-09-30 18:00:00</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1455</td>
<td>NA</td>
<td>NA</td>
<td>1634</td>
<td>NA</td>
<td>9E</td>
<td>3393</td>
<td>NA</td>
<td>NA</td>
<td>213</td>
<td>14</td>
<td>55</td>
<td>2013-09-30 14:00:00</td>
<td>Endeavor Air Inc.</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>2200</td>
<td>NA</td>
<td>NA</td>
<td>2312</td>
<td>NA</td>
<td>9E</td>
<td>3525</td>
<td>NA</td>
<td>NA</td>
<td>198</td>
<td>22</td>
<td>0</td>
<td>2013-09-30 22:00:00</td>
<td>Endeavor Air Inc.</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1210</td>
<td>NA</td>
<td>NA</td>
<td>1330</td>
<td>NA</td>
<td>MQ</td>
<td>3461</td>
<td>N535MQ</td>
<td>NA</td>
<td>764</td>
<td>12</td>
<td>10</td>
<td>2013-09-30 12:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="even">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>1159</td>
<td>NA</td>
<td>NA</td>
<td>1344</td>
<td>NA</td>
<td>MQ</td>
<td>3572</td>
<td>N511MQ</td>
<td>NA</td>
<td>419</td>
<td>11</td>
<td>59</td>
<td>2013-09-30 11:00:00</td>
<td>Envoy Air</td>
</tr>
<tr class="odd">
<td>2013</td>
<td>9</td>
<td>30</td>
<td>NA</td>
<td>840</td>
<td>NA</td>
<td>NA</td>
<td>1020</td>
<td>NA</td>
<td>MQ</td>
<td>3531</td>
<td>N839MQ</td>
<td>NA</td>
<td>431</td>
<td>8</td>
<td>40</td>
<td>2013-09-30 08:00:00</td>
<td>Envoy Air</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airlines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 2</caption>
<thead>
<tr class="header">
<th scope="col">carrier</th>
<th scope="col">name</th>
</tr>
<tr class="odd">
<th scope="col">&lt;chr&gt;</th>
<th scope="col">&lt;chr&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>9E</td>
<td>Endeavor Air Inc.</td>
</tr>
<tr class="even">
<td>AA</td>
<td>American Airlines Inc.</td>
</tr>
<tr class="odd">
<td>AS</td>
<td>Alaska Airlines Inc.</td>
</tr>
<tr class="even">
<td>B6</td>
<td>JetBlue Airways</td>
</tr>
<tr class="odd">
<td>DL</td>
<td>Delta Air Lines Inc.</td>
</tr>
<tr class="even">
<td>EV</td>
<td>ExpressJet Airlines Inc.</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="理解连接" class="level4">
<h4 class="anchored" data-anchor-id="理解连接">理解连接</h4>
<p>匹配就是实现在两行之间的交集。</p>
</section>
<section id="内连接" class="level4">
<h4 class="anchored" data-anchor-id="内连接">内连接</h4>
<p>内连接最简单的一种连接，只要两个观测的键是相等的。内连接就可以进行匹配。</p>
</section>
<section id="字符串组合" class="level4">
<h4 class="anchored" data-anchor-id="字符串组合">字符串组合</h4>
<p>组合两个或更多的字符串可以使用<code>str_c()</code>函数</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"x"</span>,<span class="st">"y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'xy'
</div>
</div>
<p>基础匹配</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>,<span class="st">"banana"</span>,<span class="st">"pear"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x,<span class="st">"an"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">


    
        <meta charset="utf-8">
        <script title="htmlwidgets" src="data:application/javascript;base64,KGZ1bmN0aW9uKCkgewogIC8vIElmIHdpbmRvdy5IVE1MV2lkZ2V0cyBpcyBhbHJlYWR5IGRlZmluZWQsIHRoZW4gdXNlIGl0OyBvdGhlcndpc2UgY3JlYXRlIGEKICAvLyBuZXcgb2JqZWN0LiBUaGlzIGFsbG93cyBwcmVjZWRpbmcgY29kZSB0byBzZXQgb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUKICAvLyBpbml0aWFsaXphdGlvbiBwcm9jZXNzICh0aG91Z2ggbm9uZSBjdXJyZW50bHkgZXhpc3QpLgogIHdpbmRvdy5IVE1MV2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cyB8fCB7fTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB2aWV3ZXIgcGFuZS4gSWYgbm90LCB3ZSdyZSBpbiBhIHdlYiBicm93c2VyLgogIHZhciB2aWV3ZXJNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnZpZXdlck1vZGUgPQogICAgICAvXGJ2aWV3ZXJfcGFuZT0xXGIvLnRlc3Qod2luZG93LmxvY2F0aW9uKTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gU2hpbnkgbW9kZS4gSWYgbm90LCBpdCdzIGEgc3RhdGljIGRvY3VtZW50LgogIC8vIE5vdGUgdGhhdCBzdGF0aWMgd2lkZ2V0cyBjYW4gYXBwZWFyIGluIGJvdGggU2hpbnkgYW5kIHN0YXRpYyBtb2RlcywgYnV0CiAgLy8gb2J2aW91c2x5LCBTaGlueSB3aWRnZXRzIGNhbiBvbmx5IGFwcGVhciBpbiBTaGlueSBhcHBzL2RvY3VtZW50cy4KICB2YXIgc2hpbnlNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnNoaW55TW9kZSA9CiAgICAgIHR5cGVvZih3aW5kb3cuU2hpbnkpICE9PSAidW5kZWZpbmVkIiAmJiAhIXdpbmRvdy5TaGlueS5vdXRwdXRCaW5kaW5nczsKCiAgLy8gV2UgY2FuJ3QgY291bnQgb24galF1ZXJ5IGJlaW5nIGF2YWlsYWJsZSwgc28gd2UgaW1wbGVtZW50IG91ciBvd24KICAvLyB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS4KICBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKHR5cGVvZihqUXVlcnkpICE9PSAidW5kZWZpbmVkIiAmJiBzY29wZSBpbnN0YW5jZW9mIGpRdWVyeSkgewogICAgICByZXR1cm4gc2NvcGUuZmluZChzZWxlY3Rvcik7CiAgICB9CiAgICBpZiAoc2NvcGUucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBbXTsKICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKQogICAgICByZXR1cm4gdmFsdWU7CiAgICByZXR1cm4gW3ZhbHVlXTsKICB9CgogIC8vIEltcGxlbWVudCBqUXVlcnkncyBleHRlbmQKICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0IC8qLCAuLi4gKi8pIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CgogIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgQXJyYXkuZm9yRWFjaC4KICBmdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGlmICh2YWx1ZXMuZm9yRWFjaCkgewogICAgICB2YWx1ZXMuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWVzW2ldLCBpLCB2YWx1ZXMpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZXBsYWNlcyB0aGUgc3BlY2lmaWVkIG1ldGhvZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgZnVuY1NvdXJjZS4KICAvLwogIC8vIE5vdGUgdGhhdCBmdW5jU291cmNlIHNob3VsZCBub3QgQkUgdGhlIG5ldyBtZXRob2QsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uCiAgLy8gdGhhdCBSRVRVUk5TIHRoZSBuZXcgbWV0aG9kLiBmdW5jU291cmNlIHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IHRoYXQgaXMKICAvLyB0aGUgb3ZlcnJpZGRlbiBtZXRob2QsIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgbmV3IG1ldGhvZC4gVGhlIG92ZXJyaWRkZW4KICAvLyBtZXRob2QgY2FuIGJlIGNhbGxlZCBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiwgaXQgaGFzIHRoZSB0YXJnZXQgcGVybWFuZW50bHkKICAvLyBib3VuZCB0byBpdCBzbyAidGhpcyIgd2lsbCB3b3JrIGNvcnJlY3RseS4KICBmdW5jdGlvbiBvdmVycmlkZU1ldGhvZCh0YXJnZXQsIG1ldGhvZE5hbWUsIGZ1bmNTb3VyY2UpIHsKICAgIHZhciBzdXBlckZ1bmMgPSB0YXJnZXRbbWV0aG9kTmFtZV0gfHwgZnVuY3Rpb24oKSB7fTsKICAgIHZhciBzdXBlckZ1bmNCb3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICAgIH07CiAgICB0YXJnZXRbbWV0aG9kTmFtZV0gPSBmdW5jU291cmNlKHN1cGVyRnVuY0JvdW5kKTsKICB9CgogIC8vIEFkZCBhIG1ldGhvZCB0byBkZWxlZ2F0b3IgdGhhdCwgd2hlbiBpbnZva2VkLCBjYWxscwogIC8vIGRlbGVnYXRlZS5tZXRob2ROYW1lLiBJZiB0aGVyZSBpcyBubyBzdWNoIG1ldGhvZCBvbgogIC8vIHRoZSBkZWxlZ2F0ZWUsIGJ1dCB0aGVyZSB3YXMgb25lIG9uIGRlbGVnYXRvciBiZWZvcmUKICAvLyBkZWxlZ2F0ZU1ldGhvZCB3YXMgY2FsbGVkLCB0aGVuIHRoZSBvcmlnaW5hbCB2ZXJzaW9uCiAgLy8gaXMgaW52b2tlZCBpbnN0ZWFkLgogIC8vIEZvciBleGFtcGxlOgogIC8vCiAgLy8gdmFyIGEgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2ExJyk7IH0KICAvLyAgIG1ldGhvZDI6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnYTInKTsgfQogIC8vIH07CiAgLy8gdmFyIGIgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2IxJyk7IH0KICAvLyB9OwogIC8vIGRlbGVnYXRlTWV0aG9kKGEsIGIsICJtZXRob2QxIik7CiAgLy8gZGVsZWdhdGVNZXRob2QoYSwgYiwgIm1ldGhvZDIiKTsKICAvLyBhLm1ldGhvZDEoKTsKICAvLyBhLm1ldGhvZDIoKTsKICAvLwogIC8vIFRoZSBvdXRwdXQgd291bGQgYmUgImIxIiwgImEyIi4KICBmdW5jdGlvbiBkZWxlZ2F0ZU1ldGhvZChkZWxlZ2F0b3IsIGRlbGVnYXRlZSwgbWV0aG9kTmFtZSkgewogICAgdmFyIGluaGVyaXRlZCA9IGRlbGVnYXRvclttZXRob2ROYW1lXTsKICAgIGRlbGVnYXRvclttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGFyZ2V0ID0gZGVsZWdhdGVlOwogICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGVlW21ldGhvZE5hbWVdOwoKICAgICAgLy8gVGhlIG1ldGhvZCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBkZWxlZ2F0ZWUuIEluc3RlYWQsCiAgICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvbiB0aGUgZGVsZWdhdG9yLCBpZiBpdCBleGlzdHMuCiAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdG9yOwogICAgICAgIG1ldGhvZCA9IGluaGVyaXRlZDsKICAgICAgfQoKICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0KCiAgLy8gSW1wbGVtZW50IGEgdmFndWUgZmFjc2ltaWxpZSBvZiBqUXVlcnkncyBkYXRhIG1ldGhvZAogIGZ1bmN0aW9uIGVsZW1lbnREYXRhKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gZWxbImh0bWx3aWRnZXRfZGF0YV8iICsgbmFtZV07CiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykgewogICAgICBlbFsiaHRtbHdpZGdldF9kYXRhXyIgKyBuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gZWw7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIGVsZW1lbnREYXRhOiAiICsKICAgICAgICBhcmd1bWVudHMubGVuZ3RoKTsKICAgIH0KICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleAogIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiXFxiIiArIGVzY2FwZVJlZ0V4cChjbGFzc05hbWUpICsgIlxcYiIpOwogICAgcmV0dXJuIHJlLnRlc3QoZWwuY2xhc3NOYW1lKTsKICB9CgogIC8vIGVsZW1lbnRzIC0gYXJyYXkgKG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBvZiBIVE1MIGVsZW1lbnRzCiAgLy8gY2xhc3NOYW1lIC0gY2xhc3MgbmFtZSB0byB0ZXN0IGZvcgogIC8vIGluY2x1ZGUgLSBpZiB0cnVlLCBvbmx5IHJldHVybiBlbGVtZW50cyB3aXRoIGdpdmVuIGNsYXNzTmFtZTsKICAvLyAgIGlmIGZhbHNlLCBvbmx5IHJldHVybiBlbGVtZW50cyAqd2l0aG91dCogZ2l2ZW4gY2xhc3NOYW1lCiAgZnVuY3Rpb24gZmlsdGVyQnlDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lLCBpbmNsdWRlKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbWVudHNbaV0sIGNsYXNzTmFtZSkgPT0gaW5jbHVkZSkKICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBvbihvYmosIGV2ZW50TmFtZSwgZnVuYykgewogICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuYywgZmFsc2UpOwogICAgfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIHsKICAgICAgb2JqLmF0dGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmYob2JqLCBldmVudE5hbWUsIGZ1bmMpIHsKICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikKICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jLCBmYWxzZSk7CiAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIHsKICAgICAgb2JqLmRldGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICAvLyBUcmFuc2xhdGUgYXJyYXkgb2YgdmFsdWVzIHRvIHRvcC9yaWdodC9ib3R0b20vbGVmdCwgYXMgdXN1YWwgd2l0aAogIC8vIHRoZSAicGFkZGluZyIgQ1NTIHByb3BlcnR5CiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcKICBmdW5jdGlvbiB1bnBhY2tQYWRkaW5nKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gIm51bWJlciIpCiAgICAgIHZhbHVlID0gW3ZhbHVlXTsKICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMF0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzBdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzNdfTsKICAgIH0KICB9CgogIC8vIENvbnZlcnQgYW4gdW5wYWNrZWQgcGFkZGluZyBvYmplY3QgdG8gYSBDU1MgdmFsdWUKICBmdW5jdGlvbiBwYWRkaW5nVG9Dc3MocGFkZGluZ09iaikgewogICAgcmV0dXJuIHBhZGRpbmdPYmoudG9wICsgInB4ICIgKyBwYWRkaW5nT2JqLnJpZ2h0ICsgInB4ICIgKyBwYWRkaW5nT2JqLmJvdHRvbSArICJweCAiICsgcGFkZGluZ09iai5sZWZ0ICsgInB4IjsKICB9CgogIC8vIE1ha2VzIGEgbnVtYmVyIHN1aXRhYmxlIGZvciBDU1MKICBmdW5jdGlvbiBweCh4KSB7CiAgICBpZiAodHlwZW9mKHgpID09PSAibnVtYmVyIikKICAgICAgcmV0dXJuIHggKyAicHgiOwogICAgZWxzZQogICAgICByZXR1cm4geDsKICB9CgogIC8vIFJldHJpZXZlcyBydW50aW1lIHdpZGdldCBzaXppbmcgaW5mb3JtYXRpb24gZm9yIGFuIGVsZW1lbnQuCiAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBlaXRoZXIgbnVsbCwgb3IgYW4gb2JqZWN0IHdpdGggZmlsbCwgcGFkZGluZywKICAvLyBkZWZhdWx0V2lkdGgsIGRlZmF1bHRIZWlnaHQgZmllbGRzLgogIGZ1bmN0aW9uIHNpemluZ1BvbGljeShlbCkgewogICAgdmFyIHNpemluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vaHRtbHdpZGdldC1zaXppbmcnXSIpOwogICAgaWYgKCFzaXppbmdFbCkKICAgICAgcmV0dXJuIG51bGw7CiAgICB2YXIgc3AgPSBKU09OLnBhcnNlKHNpemluZ0VsLnRleHRDb250ZW50IHx8IHNpemluZ0VsLnRleHQgfHwgInt9Iik7CiAgICBpZiAodmlld2VyTW9kZSkgewogICAgICByZXR1cm4gc3Audmlld2VyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNwLmJyb3dzZXI7CiAgICB9CiAgfQoKICAvLyBAcGFyYW0gdGFza3MgQXJyYXkgb2Ygc3RyaW5ncyAob3IgZmFsc3kgdmFsdWUsIGluIHdoaWNoIGNhc2Ugbm8tb3ApLgogIC8vICAgRWFjaCBlbGVtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IGV4cHJlc3Npb24gdGhhdCB5aWVsZHMgYQogIC8vICAgZnVuY3Rpb24uIE9yLCBjYW4gYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoICJjb2RlIiBhbmQgImRhdGEiCiAgLy8gICBwcm9wZXJ0aWVzOyBpbiB0aGlzIGNhc2UsIHRoZSAiY29kZSIgcHJvcGVydHkgc2hvdWxkIGJlIGEgc3RyaW5nCiAgLy8gICBvZiBKUyB0aGF0J3MgYW4gZXhwciB0aGF0IHlpZWxkcyBhIGZ1bmN0aW9uLCBhbmQgImRhdGEiIHNob3VsZCBiZQogIC8vICAgYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhZGRlZCBhcyBhbiBhZGRpdGlvbmFsIGFyZ3VtZW50IHdoZW4gdGhhdAogIC8vICAgZnVuY3Rpb24gaXMgY2FsbGVkLgogIC8vIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgInRoaXMiIGZvciBlYWNoIGZ1bmN0aW9uCiAgLy8gICBleGVjdXRpb24uCiAgLy8gQHBhcmFtIGFyZ3MgQXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25zLiAoVGhlCiAgLy8gICBzYW1lIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBhbGwgZnVuY3Rpb25zLikKICBmdW5jdGlvbiBldmFsQW5kUnVuKHRhc2tzLCB0YXJnZXQsIGFyZ3MpIHsKICAgIGlmICh0YXNrcykgewogICAgICBmb3JFYWNoKHRhc2tzLCBmdW5jdGlvbih0YXNrKSB7CiAgICAgICAgdmFyIHRoZXNlQXJncyA9IGFyZ3M7CiAgICAgICAgaWYgKHR5cGVvZih0YXNrKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgIHRoZXNlQXJncyA9IHRoZXNlQXJncy5jb25jYXQoW3Rhc2suZGF0YV0pOwogICAgICAgICAgdGFzayA9IHRhc2suY29kZTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhc2tGdW5jID0gdHJ5RXZhbCh0YXNrKTsKICAgICAgICBpZiAodHlwZW9mKHRhc2tGdW5jKSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUYXNrIG11c3QgYmUgYSBmdW5jdGlvbiEgU291cmNlOlxuIiArIHRhc2spOwogICAgICAgIH0KICAgICAgICB0YXNrRnVuYy5hcHBseSh0YXJnZXQsIHRoZXNlQXJncyk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gQXR0ZW1wdCBldmFsKCkgYm90aCB3aXRoIGFuZCB3aXRob3V0IGVuY2xvc2luZyBpbiBwYXJlbnRoZXNlcy4KICAvLyBOb3RlIHRoYXQgZW5jbG9zaW5nIGNvZXJjZXMgYSBmdW5jdGlvbiBkZWNsYXJhdGlvbiBpbnRvCiAgLy8gYW4gZXhwcmVzc2lvbiB0aGF0IGV2YWwoKSBjYW4gcGFyc2UKICAvLyAob3RoZXJ3aXNlLCBhIFN5bnRheEVycm9yIGlzIHRocm93bikKICBmdW5jdGlvbiB0cnlFdmFsKGNvZGUpIHsKICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gZXZhbCgiKCIgKyBjb2RlICsgIikiKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvcikpIHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIHJlc3VsdCA9IGV2YWwoY29kZSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGlmIChlIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHsKICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIGluaXRTaXppbmcoZWwpIHsKICAgIHZhciBzaXppbmcgPSBzaXppbmdQb2xpY3koZWwpOwogICAgaWYgKCFzaXppbmcpCiAgICAgIHJldHVybjsKCiAgICB2YXIgY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImh0bWx3aWRnZXRfY29udGFpbmVyIik7CiAgICBpZiAoIWNlbCkKICAgICAgcmV0dXJuOwoKICAgIGlmICh0eXBlb2Yoc2l6aW5nLnBhZGRpbmcpICE9PSAidW5kZWZpbmVkIikgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICIwIjsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nID0gcGFkZGluZ1RvQ3NzKHVucGFja1BhZGRpbmcoc2l6aW5nLnBhZGRpbmcpKTsKICAgIH0KCiAgICBpZiAoc2l6aW5nLmZpbGwpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICBpZiAoY2VsKSB7CiAgICAgICAgY2VsLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgICB2YXIgcGFkID0gdW5wYWNrUGFkZGluZyhzaXppbmcucGFkZGluZyk7CiAgICAgICAgY2VsLnN0eWxlLnRvcCA9IHBhZC50b3AgKyAicHgiOwogICAgICAgIGNlbC5zdHlsZS5yaWdodCA9IHBhZC5yaWdodCArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLmJvdHRvbSA9IHBhZC5ib3R0b20gKyAicHgiOwogICAgICAgIGNlbC5zdHlsZS5sZWZ0ID0gcGFkLmxlZnQgKyAicHgiOwogICAgICAgIGVsLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXRXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjZWwub2Zmc2V0V2lkdGg7IH0sCiAgICAgICAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGNlbC5vZmZzZXRIZWlnaHQ7IH0KICAgICAgfTsKCiAgICB9IGVsc2UgewogICAgICBlbC5zdHlsZS53aWR0aCA9IHB4KHNpemluZy53aWR0aCk7CiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHB4KHNpemluZy5oZWlnaHQpOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXRXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBlbC5vZmZzZXRXaWR0aDsgfSwKICAgICAgICBnZXRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZWwub2Zmc2V0SGVpZ2h0OyB9CiAgICAgIH07CiAgICB9CiAgfQoKICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9ucyBmb3IgbWV0aG9kcwogIHZhciBkZWZhdWx0cyA9IHsKICAgIGZpbmQ6IGZ1bmN0aW9uKHNjb3BlKSB7CiAgICAgIHJldHVybiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCAiLiIgKyB0aGlzLm5hbWUpOwogICAgfSwKICAgIHJlbmRlckVycm9yOiBmdW5jdGlvbihlbCwgZXJyKSB7CiAgICAgIHZhciAkZWwgPSAkKGVsKTsKCiAgICAgIHRoaXMuY2xlYXJFcnJvcihlbCk7CgogICAgICAvLyBBZGQgYWxsIHRoZXNlIGVycm9yIGNsYXNzZXMsIGFzIFNoaW55IGRvZXMKICAgICAgdmFyIGVyckNsYXNzID0gInNoaW55LW91dHB1dC1lcnJvciI7CiAgICAgIGlmIChlcnIudHlwZSAhPT0gbnVsbCkgewogICAgICAgIC8vIHVzZSB0aGUgY2xhc3NlcyBvZiB0aGUgZXJyb3IgY29uZGl0aW9uIGFzIENTUyBjbGFzcyBuYW1lcwogICAgICAgIGVyckNsYXNzID0gZXJyQ2xhc3MgKyAiICIgKyAkLm1hcChhc0FycmF5KGVyci50eXBlKSwgZnVuY3Rpb24odHlwZSkgewogICAgICAgICAgcmV0dXJuIGVyckNsYXNzICsgIi0iICsgdHlwZTsKICAgICAgICB9KS5qb2luKCIgIik7CiAgICAgIH0KICAgICAgZXJyQ2xhc3MgPSBlcnJDbGFzcyArICIgaHRtbHdpZGdldHMtZXJyb3IiOwoKICAgICAgLy8gSXMgZWwgaW5saW5lIG9yIGJsb2NrPyBJZiBpbmxpbmUgb3IgaW5saW5lLWJsb2NrLCBqdXN0IGRpc3BsYXk6bm9uZSBpdAogICAgICAvLyBhbmQgYWRkIGFuIGlubGluZSBlcnJvci4KICAgICAgdmFyIGRpc3BsYXkgPSAkZWwuY3NzKCJkaXNwbGF5Iik7CiAgICAgICRlbC5kYXRhKCJyZXN0b3JlLWRpc3BsYXktbW9kZSIsIGRpc3BsYXkpOwoKICAgICAgaWYgKGRpc3BsYXkgPT09ICJpbmxpbmUiIHx8IGRpc3BsYXkgPT09ICJpbmxpbmUtYmxvY2siKSB7CiAgICAgICAgJGVsLmhpZGUoKTsKICAgICAgICBpZiAoZXJyLm1lc3NhZ2UgIT09ICIiKSB7CiAgICAgICAgICB2YXIgZXJyb3JTcGFuID0gJCgiPHNwYW4+IikuYWRkQ2xhc3MoZXJyQ2xhc3MpOwogICAgICAgICAgZXJyb3JTcGFuLnRleHQoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgJGVsLmFmdGVyKGVycm9yU3Bhbik7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRpc3BsYXkgPT09ICJibG9jayIpIHsKICAgICAgICAvLyBJZiBibG9jaywgYWRkIGFuIGVycm9yIGp1c3QgYWZ0ZXIgdGhlIGVsLCBzZXQgdmlzaWJpbGl0eTpub25lIG9uIHRoZQogICAgICAgIC8vIGVsLCBhbmQgcG9zaXRpb24gdGhlIGVycm9yIHRvIGJlIG9uIHRvcCBvZiB0aGUgZWwuCiAgICAgICAgLy8gTWFyayBpdCB3aXRoIGEgdW5pcXVlIElEIGFuZCBDU1MgY2xhc3Mgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlci4KICAgICAgICAkZWwuY3NzKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgIGlmIChlcnIubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgICAgIHZhciBlcnJvckRpdiA9ICQoIjxkaXY+IikuYWRkQ2xhc3MoZXJyQ2xhc3MpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKQogICAgICAgICAgICAuY3NzKCJ0b3AiLCBlbC5vZmZzZXRUb3ApCiAgICAgICAgICAgIC5jc3MoImxlZnQiLCBlbC5vZmZzZXRMZWZ0KQogICAgICAgICAgICAvLyBzZXR0aW5nIHdpZHRoIGNhbiBwdXNoIG91dCB0aGUgcGFnZSBzaXplLCBmb3JjaW5nIG90aGVyd2lzZQogICAgICAgICAgICAvLyB1bm5lY2Vzc2FyeSBzY3JvbGxiYXJzIHRvIGFwcGVhciBhbmQgbWFraW5nIGl0IGltcG9zc2libGUgZm9yCiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IHRvIHNocmluazsgc28gdXNlIG1heC13aWR0aCBpbnN0ZWFkCiAgICAgICAgICAgIC5jc3MoIm1heFdpZHRoIiwgZWwub2Zmc2V0V2lkdGgpCiAgICAgICAgICAgIC5jc3MoImhlaWdodCIsIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICBlcnJvckRpdi50ZXh0KGVyci5tZXNzYWdlKTsKICAgICAgICAgICRlbC5hZnRlcihlcnJvckRpdik7CgogICAgICAgICAgLy8gUmVhbGx5IGR1bWIgd2F5IHRvIGtlZXAgdGhlIHNpemUvcG9zaXRpb24gb2YgdGhlIGVycm9yIGluIHN5bmMgd2l0aAogICAgICAgICAgLy8gdGhlIHBhcmVudCBlbGVtZW50IGFzIHRoZSB3aW5kb3cgaXMgcmVzaXplZCBvciB3aGF0ZXZlci4KICAgICAgICAgIHZhciBpbnRJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoIWVycm9yRGl2WzBdLnBhcmVudEVsZW1lbnQpIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludElkKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3JEaXYKICAgICAgICAgICAgICAuY3NzKCJ0b3AiLCBlbC5vZmZzZXRUb3ApCiAgICAgICAgICAgICAgLmNzcygibGVmdCIsIGVsLm9mZnNldExlZnQpCiAgICAgICAgICAgICAgLmNzcygibWF4V2lkdGgiLCBlbC5vZmZzZXRXaWR0aCkKICAgICAgICAgICAgICAuY3NzKCJoZWlnaHQiLCBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckVycm9yOiBmdW5jdGlvbihlbCkgewogICAgICB2YXIgJGVsID0gJChlbCk7CiAgICAgIHZhciBkaXNwbGF5ID0gJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIik7CiAgICAgICRlbC5kYXRhKCJyZXN0b3JlLWRpc3BsYXktbW9kZSIsIG51bGwpOwoKICAgICAgaWYgKGRpc3BsYXkgPT09ICJpbmxpbmUiIHx8IGRpc3BsYXkgPT09ICJpbmxpbmUtYmxvY2siKSB7CiAgICAgICAgaWYgKGRpc3BsYXkpCiAgICAgICAgICAkZWwuY3NzKCJkaXNwbGF5IiwgZGlzcGxheSk7CiAgICAgICAgJChlbC5uZXh0U2libGluZykuZmlsdGVyKCIuaHRtbHdpZGdldHMtZXJyb3IiKS5yZW1vdmUoKTsKICAgICAgfSBlbHNlIGlmIChkaXNwbGF5ID09PSAiYmxvY2siKXsKICAgICAgICAkZWwuY3NzKCJ2aXNpYmlsaXR5IiwgImluaGVyaXQiKTsKICAgICAgICAkKGVsLm5leHRTaWJsaW5nKS5maWx0ZXIoIi5odG1sd2lkZ2V0cy1lcnJvciIpLnJlbW92ZSgpOwogICAgICB9CiAgICB9LAogICAgc2l6aW5nOiB7fQogIH07CgogIC8vIENhbGxlZCBieSB3aWRnZXQgYmluZGluZ3MgdG8gcmVnaXN0ZXIgYSBuZXcgdHlwZSBvZiB3aWRnZXQuIFRoZSBkZWZpbml0aW9uCiAgLy8gb2JqZWN0IGNhbiBjb250YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoKICAvLyAtIG5hbWUgKHJlcXVpcmVkKSAtIEEgc3RyaW5nIGluZGljYXRpbmcgdGhlIGJpbmRpbmcgbmFtZSwgd2hpY2ggd2lsbCBiZQogIC8vICAgdXNlZCBieSBkZWZhdWx0IGFzIHRoZSBDU1MgY2xhc3NuYW1lIHRvIGxvb2sgZm9yLgogIC8vIC0gaW5pdGlhbGl6ZSAob3B0aW9uYWwpIC0gQSBmdW5jdGlvbihlbCkgdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHBlcgogIC8vICAgd2lkZ2V0IGVsZW1lbnQ7IGlmIGEgdmFsdWUgaXMgcmV0dXJuZWQsIGl0IHdpbGwgYmUgcGFzc2VkIGFzIHRoZSB0aGlyZAogIC8vICAgdmFsdWUgdG8gcmVuZGVyVmFsdWUuCiAgLy8gLSByZW5kZXJWYWx1ZSAocmVxdWlyZWQpIC0gQSBmdW5jdGlvbihlbCwgZGF0YSwgaW5pdFZhbHVlKSB0aGF0IHdpbGwgYmUKICAvLyAgIGNhbGxlZCB3aXRoIGRhdGEuIFN0YXRpYyBjb250ZXh0cyB3aWxsIGNhdXNlIHRoaXMgdG8gYmUgY2FsbGVkIG9uY2UgcGVyCiAgLy8gICBlbGVtZW50OyBTaGlueSBhcHBzIHdpbGwgY2F1c2UgdGhpcyB0byBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgcGVyCiAgLy8gICBlbGVtZW50LCBhcyB0aGUgZGF0YSBjaGFuZ2VzLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXQgPSBmdW5jdGlvbihkZWZpbml0aW9uKSB7CiAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSBuYW1lIik7CiAgICB9CiAgICBpZiAoIWRlZmluaXRpb24udHlwZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSB0eXBlIik7CiAgICB9CiAgICAvLyBDdXJyZW50bHkgd2Ugb25seSBzdXBwb3J0IG91dHB1dCB3aWRnZXRzCiAgICBpZiAoZGVmaW5pdGlvbi50eXBlICE9PSAib3V0cHV0IikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCB3aWRnZXQgdHlwZSAnIiArIGRlZmluaXRpb24udHlwZSArICInIik7CiAgICB9CiAgICAvLyBUT0RPOiBWZXJpZnkgdGhhdCAubmFtZSBpcyBhIHZhbGlkIENTUyBjbGFzc25hbWUKCiAgICAvLyBTdXBwb3J0IG5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9ucy4gT2xkLXN0eWxlIGNsYXNzLWJvdW5kCiAgICAvLyBkZWZpbml0aW9ucyBoYXZlIG9uZSB3aWRnZXQgIm9iamVjdCIgcGVyIHdpZGdldCBwZXIgdHlwZS9jbGFzcyBvZgogICAgLy8gd2lkZ2V0OyB0aGUgcmVuZGVyVmFsdWUgYW5kIHJlc2l6ZSBtZXRob2RzIG9uIHN1Y2ggd2lkZ2V0IG9iamVjdHMKICAgIC8vIHRha2UgZWwgYW5kIGluc3RhbmNlIGFyZ3VtZW50cywgYmVjYXVzZSB0aGUgd2lkZ2V0IG9iamVjdCBjYW4ndAogICAgLy8gc3RvcmUgdGhlbS4gTmV3LXN0eWxlIGluc3RhbmNlLWJvdW5kIGRlZmluaXRpb25zIGhhdmUgb25lIHdpZGdldAogICAgLy8gb2JqZWN0IHBlciB3aWRnZXQgaW5zdGFuY2U7IHRoZSBkZWZpbml0aW9uIHRoYXQncyBwYXNzZWQgaW4gZG9lc24ndAogICAgLy8gcHJvdmlkZSByZW5kZXJWYWx1ZSBvciByZXNpemUgbWV0aG9kcyBhdCBhbGwsIGp1c3QgdGhlIHNpbmdsZSBtZXRob2QKICAgIC8vICAgZmFjdG9yeShlbCwgd2lkdGgsIGhlaWdodCkKICAgIC8vIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgaGFzIHJlbmRlclZhbHVlKHgpIGFuZCByZXNpemUodywgaCkuCiAgICAvLyBUaGlzIGVuYWJsZXMgYSBmYXIgbW9yZSBuYXR1cmFsIHByb2dyYW1taW5nIHN0eWxlIGZvciB0aGUgd2lkZ2V0CiAgICAvLyBhdXRob3IsIHdobyBjYW4gc3RvcmUgcGVyLWluc3RhbmNlIHN0YXRlIHVzaW5nIGVpdGhlciBPTy1zdHlsZQogICAgLy8gaW5zdGFuY2UgZmllbGRzIG9yIGZ1bmN0aW9uYWwtc3R5bGUgY2xvc3VyZSB2YXJpYWJsZXMgKEkgZ3Vlc3MgdGhpcwogICAgLy8gaXMgaW4gY29udHJhc3QgdG8gd2hhdCBjYW4gb25seSBiZSBjYWxsZWQgQy1zdHlsZSBwc2V1ZG8tT08gd2hpY2ggaXMKICAgIC8vIHdoYXQgd2UgcmVxdWlyZWQgYmVmb3JlKS4KICAgIGlmIChkZWZpbml0aW9uLmZhY3RvcnkpIHsKICAgICAgZGVmaW5pdGlvbiA9IGNyZWF0ZUxlZ2FjeURlZmluaXRpb25BZGFwdGVyKGRlZmluaXRpb24pOwogICAgfQoKICAgIGlmICghZGVmaW5pdGlvbi5yZW5kZXJWYWx1ZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSByZW5kZXJWYWx1ZSBmdW5jdGlvbiIpOwogICAgfQoKICAgIC8vIEZvciBzdGF0aWMgcmVuZGVyaW5nIChub24tU2hpbnkpLCB1c2UgYSBzaW1wbGUgd2lkZ2V0IHJlZ2lzdHJhdGlvbgogICAgLy8gc2NoZW1lLiBXZSBhbHNvIHVzZSB0aGlzIHNjaGVtZSBmb3IgU2hpbnkgYXBwcy9kb2N1bWVudHMgdGhhdCBhbHNvCiAgICAvLyBjb250YWluIHN0YXRpYyB3aWRnZXRzLgogICAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMgPSB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyB8fCBbXTsKICAgIC8vIE1lcmdlIGRlZmF1bHRzIGludG8gdGhlIGRlZmluaXRpb247IGRvbid0IG11dGF0ZSB0aGUgb3JpZ2luYWwgZGVmaW5pdGlvbi4KICAgIHZhciBzdGF0aWNCaW5kaW5nID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgZGVmaW5pdGlvbik7CiAgICBvdmVycmlkZU1ldGhvZChzdGF0aWNCaW5kaW5nLCAiZmluZCIsIGZ1bmN0aW9uKHN1cGVyZnVuYykgewogICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IHN1cGVyZnVuYyhzY29wZSk7CiAgICAgICAgLy8gRmlsdGVyIG91dCBTaGlueSBvdXRwdXRzLCB3ZSBvbmx5IHdhbnQgdGhlIHN0YXRpYyBraW5kCiAgICAgICAgcmV0dXJuIGZpbHRlckJ5Q2xhc3MocmVzdWx0cywgImh0bWwtd2lkZ2V0LW91dHB1dCIsIGZhbHNlKTsKICAgICAgfTsKICAgIH0pOwogICAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMucHVzaChzdGF0aWNCaW5kaW5nKTsKCiAgICBpZiAoc2hpbnlNb2RlKSB7CiAgICAgIC8vIFNoaW55IGlzIHJ1bm5pbmcuIFJlZ2lzdGVyIHRoZSBkZWZpbml0aW9uIHdpdGggYW4gb3V0cHV0IGJpbmRpbmcuCiAgICAgIC8vIFRoZSBkZWZpbml0aW9uIGl0c2VsZiB3aWxsIG5vdCBiZSB0aGUgb3V0cHV0IGJpbmRpbmcsIGluc3RlYWQKICAgICAgLy8gd2Ugd2lsbCBtYWtlIGFuIG91dHB1dCBiaW5kaW5nIG9iamVjdCB0aGF0IGRlbGVnYXRlcyB0byB0aGUKICAgICAgLy8gZGVmaW5pdGlvbi4gVGhpcyBpcyBiZWNhdXNlIHdlIGZvb2xpc2hseSB1c2VkIHRoZSBzYW1lIG1ldGhvZAogICAgICAvLyBuYW1lIChyZW5kZXJWYWx1ZSkgZm9yIGh0bWx3aWRnZXRzIGRlZmluaXRpb24gYW5kIFNoaW55IGJpbmRpbmdzCiAgICAgIC8vIGJ1dCB0aGV5IGFjdHVhbGx5IGhhdmUgcXVpdGUgZGlmZmVyZW50IHNlbWFudGljcyAodGhlIFNoaW55CiAgICAgIC8vIGJpbmRpbmdzIHJlY2VpdmUgZGF0YSB0aGF0IGluY2x1ZGVzIGxvdHMgb2YgbWV0YWRhdGEgdGhhdCBpdAogICAgICAvLyBzdHJpcHMgb2ZmIGJlZm9yZSBjYWxsaW5nIGh0bWx3aWRnZXRzIHJlbmRlclZhbHVlKS4gV2UgY2FuJ3QKICAgICAgLy8ganVzdCBpZ25vcmUgdGhlIGRpZmZlcmVuY2UgYmVjYXVzZSBpbiBzb21lIHdpZGdldHMgaXQncyBoZWxwZnVsCiAgICAgIC8vIHRvIGNhbGwgdGhpcy5yZW5kZXJWYWx1ZSgpIGZyb20gaW5zaWRlIG9mIHJlc2l6ZSgpLCBhbmQgaWYKICAgICAgLy8gd2UncmUgbm90IGRlbGVnYXRpbmcsIHRoZW4gdGhhdCBjYWxsIHdpbGwgZ28gdG8gdGhlIFNoaW55CiAgICAgIC8vIHZlcnNpb24gaW5zdGVhZCBvZiB0aGUgaHRtbHdpZGdldHMgdmVyc2lvbi4KCiAgICAgIC8vIE1lcmdlIGRlZmF1bHRzIHdpdGggZGVmaW5pdGlvbiwgd2l0aG91dCBtdXRhdGluZyBlaXRoZXIuCiAgICAgIHZhciBiaW5kaW5nRGVmID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgZGVmaW5pdGlvbik7CgogICAgICAvLyBUaGlzIG9iamVjdCB3aWxsIGJlIG91ciBhY3R1YWwgU2hpbnkgYmluZGluZy4KICAgICAgdmFyIHNoaW55QmluZGluZyA9IG5ldyBTaGlueS5PdXRwdXRCaW5kaW5nKCk7CgogICAgICAvLyBXaXRoIGEgZmV3IGV4Y2VwdGlvbnMsIHdlJ2xsIHdhbnQgdG8gc2ltcGx5IHVzZSB0aGUgYmluZGluZ0RlZidzCiAgICAgIC8vIHZlcnNpb24gb2YgbWV0aG9kcyBpZiB0aGV5IGFyZSBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8KICAgICAgLy8gU2hpbnkncyBkZWZhdWx0cy4gTk9URTogSWYgU2hpbnkncyBvdXRwdXQgYmluZGluZ3MgZ2FpbiBhZGRpdGlvbmFsCiAgICAgIC8vIG1ldGhvZHMgaW4gdGhlIGZ1dHVyZSwgYW5kIHdlIHdhbnQgdGhlbSB0byBiZSBvdmVycmlkZWFibGUgYnkKICAgICAgLy8gSFRNTFdpZGdldCBiaW5kaW5nIGRlZmluaXRpb25zLCB0aGVuIHdlJ2xsIG5lZWQgdG8gYWRkIHRoZW0gdG8gdGhpcwogICAgICAvLyBsaXN0LgogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJnZXRJZCIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJvblZhbHVlQ2hhbmdlIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgIm9uVmFsdWVFcnJvciIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJyZW5kZXJFcnJvciIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJjbGVhckVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgInNob3dQcm9ncmVzcyIpOwoKICAgICAgLy8gVGhlIGZpbmQsIHJlbmRlclZhbHVlLCBhbmQgcmVzaXplIGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LCBiZWNhdXNlIHdlCiAgICAgIC8vIHdhbnQgdG8gYWN0dWFsbHkgZGVjb3JhdGUgdGhlIGJlaGF2aW9yIG9mIHRoZSBiaW5kaW5nRGVmIG1ldGhvZHMuCgogICAgICBzaGlueUJpbmRpbmcuZmluZCA9IGZ1bmN0aW9uKHNjb3BlKSB7CiAgICAgICAgdmFyIHJlc3VsdHMgPSBiaW5kaW5nRGVmLmZpbmQoc2NvcGUpOwoKICAgICAgICAvLyBPbmx5IHJldHVybiBlbGVtZW50cyB0aGF0IGFyZSBTaGlueSBvdXRwdXRzLCBub3Qgc3RhdGljIG9uZXMKICAgICAgICB2YXIgZHluYW1pY1Jlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigiLmh0bWwtd2lkZ2V0LW91dHB1dCIpOwoKICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2hhdGV2ZXIgY2F1c2VkIFNoaW55IHRvIHRoaW5rIHRoZXJlIG1pZ2h0IGJlCiAgICAgICAgLy8gbmV3IGR5bmFtaWMgb3V0cHV0cywgYWxzbyBjYXVzZWQgdGhlcmUgdG8gYmUgbmV3IHN0YXRpYyBvdXRwdXRzLgogICAgICAgIC8vIFNpbmNlIHRoZXJlIG1pZ2h0IGJlIGxvdHMgb2YgZGlmZmVyZW50IGh0bWx3aWRnZXRzIGJpbmRpbmdzLCB3ZQogICAgICAgIC8vIHNjaGVkdWxlIGV4ZWN1dGlvbiBmb3IgbGF0ZXItLW5vIG5lZWQgdG8gc3RhdGljUmVuZGVyIG11bHRpcGxlCiAgICAgICAgLy8gdGltZXMuCiAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoICE9PSBkeW5hbWljUmVzdWx0cy5sZW5ndGgpCiAgICAgICAgICBzY2hlZHVsZVN0YXRpY1JlbmRlcigpOwoKICAgICAgICByZXR1cm4gZHluYW1pY1Jlc3VsdHM7CiAgICAgIH07CgogICAgICAvLyBXcmFwIHJlbmRlclZhbHVlIHRvIGhhbmRsZSBpbml0aWFsaXphdGlvbiwgd2hpY2ggdW5mb3J0dW5hdGVseSBpc24ndAogICAgICAvLyBzdXBwb3J0ZWQgbmF0aXZlbHkgYnkgU2hpbnkgYXQgdGhlIHRpbWUgb2YgdGhpcyB3cml0aW5nLgoKICAgICAgc2hpbnlCaW5kaW5nLnJlbmRlclZhbHVlID0gZnVuY3Rpb24oZWwsIGRhdGEpIHsKICAgICAgICBTaGlueS5yZW5kZXJEZXBlbmRlbmNpZXMoZGF0YS5kZXBzKTsKICAgICAgICAvLyBSZXNvbHZlIHN0cmluZ3MgbWFya2VkIGFzIGphdmFzY3JpcHQgbGl0ZXJhbHMgdG8gb2JqZWN0cwogICAgICAgIGlmICghKGRhdGEuZXZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIGRhdGEuZXZhbHMgPSBbZGF0YS5ldmFsc107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGRhdGEuZXZhbHMgJiYgaSA8IGRhdGEuZXZhbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlcihkYXRhLngsIGRhdGEuZXZhbHNbaV0pOwogICAgICAgIH0KICAgICAgICBpZiAoIWJpbmRpbmdEZWYucmVuZGVyT25OdWxsVmFsdWUpIHsKICAgICAgICAgIGlmIChkYXRhLnggPT09IG51bGwpIHsKICAgICAgICAgICAgZWwuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gImluaGVyaXQiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWVsZW1lbnREYXRhKGVsLCAiaW5pdGlhbGl6ZWQiKSkgewogICAgICAgICAgaW5pdFNpemluZyhlbCk7CgogICAgICAgICAgZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIsIHRydWUpOwogICAgICAgICAgaWYgKGJpbmRpbmdEZWYuaW5pdGlhbGl6ZSkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gYmluZGluZ0RlZi5pbml0aWFsaXplKGVsLCBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiwgcmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYmluZGluZ0RlZi5yZW5kZXJWYWx1ZShlbCwgZGF0YS54LCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IikpOwogICAgICAgIGV2YWxBbmRSdW4oZGF0YS5qc0hvb2tzLnJlbmRlciwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpLCBbZWwsIGRhdGEueF0pOwogICAgICB9OwoKICAgICAgLy8gT25seSBvdmVycmlkZSByZXNpemUgaWYgYmluZGluZ0RlZiBpbXBsZW1lbnRzIGl0CiAgICAgIGlmIChiaW5kaW5nRGVmLnJlc2l6ZSkgewogICAgICAgIHNoaW55QmluZGluZy5yZXNpemUgPSBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCkgewogICAgICAgICAgLy8gU2hpbnkgY2FuIGNhbGwgcmVzaXplIGJlZm9yZSBpbml0aWFsaXplL3JlbmRlclZhbHVlIGhhdmUgYmVlbgogICAgICAgICAgLy8gY2FsbGVkLCB3aGljaCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIHdpZGdldHMuCiAgICAgICAgICBpZiAoZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIpKSB7CiAgICAgICAgICAgIGJpbmRpbmdEZWYucmVzaXplKGVsLCB3aWR0aCwgaGVpZ2h0LCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IikpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIFNoaW55Lm91dHB1dEJpbmRpbmdzLnJlZ2lzdGVyKHNoaW55QmluZGluZywgYmluZGluZ0RlZi5uYW1lKTsKICAgIH0KICB9OwoKICB2YXIgc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkID0gbnVsbDsKICBmdW5jdGlvbiBzY2hlZHVsZVN0YXRpY1JlbmRlcigpIHsKICAgIGlmICghc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkKSB7CiAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkID0gbnVsbDsKICAgICAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7CiAgICAgIH0sIDEpOwogICAgfQogIH0KCiAgLy8gUmVuZGVyIHN0YXRpYyB3aWRnZXRzIGFmdGVyIHRoZSBkb2N1bWVudCBmaW5pc2hlcyBsb2FkaW5nCiAgLy8gU3RhdGljYWxseSByZW5kZXIgYWxsIGVsZW1lbnRzIHRoYXQgYXJlIG9mIHRoaXMgd2lkZ2V0J3MgY2xhc3MKICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgYmluZGluZ3MgPSB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyB8fCBbXTsKICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHsKICAgICAgdmFyIG1hdGNoZXMgPSBiaW5kaW5nLmZpbmQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgZm9yRWFjaChtYXRjaGVzLCBmdW5jdGlvbihlbCkgewogICAgICAgIHZhciBzaXplT2JqID0gaW5pdFNpemluZyhlbCwgYmluZGluZyk7CgogICAgICAgIGlmIChoYXNDbGFzcyhlbCwgImh0bWwtd2lkZ2V0LXN0YXRpYy1ib3VuZCIpKQogICAgICAgICAgcmV0dXJuOwogICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICIgaHRtbC13aWRnZXQtc3RhdGljLWJvdW5kIjsKCiAgICAgICAgdmFyIGluaXRSZXN1bHQ7CiAgICAgICAgaWYgKGJpbmRpbmcuaW5pdGlhbGl6ZSkgewogICAgICAgICAgaW5pdFJlc3VsdCA9IGJpbmRpbmcuaW5pdGlhbGl6ZShlbCwKICAgICAgICAgICAgc2l6ZU9iaiA/IHNpemVPYmouZ2V0V2lkdGgoKSA6IGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgKTsKICAgICAgICAgIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiLCBpbml0UmVzdWx0KTsKICAgICAgICB9CgogICAgICAgIGlmIChiaW5kaW5nLnJlc2l6ZSkgewogICAgICAgICAgdmFyIGxhc3RTaXplID0gewogICAgICAgICAgICB3OiBzaXplT2JqID8gc2l6ZU9iai5nZXRXaWR0aCgpIDogZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgIGg6IHNpemVPYmogPyBzaXplT2JqLmdldEhlaWdodCgpIDogZWwub2Zmc2V0SGVpZ2h0CiAgICAgICAgICB9OwogICAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBzaXplID0gewogICAgICAgICAgICAgIHc6IHNpemVPYmogPyBzaXplT2JqLmdldFdpZHRoKCkgOiBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICBoOiBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoc2l6ZS53ID09PSAwICYmIHNpemUuaCA9PT0gMCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmIChzaXplLncgPT09IGxhc3RTaXplLncgJiYgc2l6ZS5oID09PSBsYXN0U2l6ZS5oKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgbGFzdFNpemUgPSBzaXplOwogICAgICAgICAgICBiaW5kaW5nLnJlc2l6ZShlbCwgc2l6ZS53LCBzaXplLmgsIGluaXRSZXN1bHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICBvbih3aW5kb3csICJyZXNpemUiLCByZXNpemVIYW5kbGVyKTsKCiAgICAgICAgICAvLyBUaGlzIGlzIG5lZWRlZCBmb3IgY2FzZXMgd2hlcmUgd2UncmUgcnVubmluZyBpbiBhIFNoaW55CiAgICAgICAgICAvLyBhcHAsIGJ1dCB0aGUgd2lkZ2V0IGl0c2VsZiBpcyBub3QgYSBTaGlueSBvdXRwdXQsIGJ1dAogICAgICAgICAgLy8gcmF0aGVyIGEgc2ltcGxlIHN0YXRpYyB3aWRnZXQuIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMKICAgICAgICAgIC8vIGFuIHJtYXJrZG93biBkb2N1bWVudCB0aGF0IGhhcyBydW50aW1lOnNoaW55IGFuZCB3aWRnZXQKICAgICAgICAgIC8vIHRoYXQgaXNuJ3QgaW4gYSByZW5kZXIgZnVuY3Rpb24uIFNoaW55IG9ubHkga25vd3MgdG8KICAgICAgICAgIC8vIGNhbGwgcmVzaXplIGhhbmRsZXJzIGZvciBTaGlueSBvdXRwdXRzLCBub3QgZm9yIHN0YXRpYwogICAgICAgICAgLy8gd2lkZ2V0cywgc28gd2UgZG8gaXQgb3Vyc2VsdmVzLgogICAgICAgICAgaWYgKHdpbmRvdy5qUXVlcnkpIHsKICAgICAgICAgICAgd2luZG93LmpRdWVyeShkb2N1bWVudCkub24oCiAgICAgICAgICAgICAgInNob3duLmh0bWx3aWRnZXRzIHNob3duLmJzLnRhYi5odG1sd2lkZ2V0cyBzaG93bi5icy5jb2xsYXBzZS5odG1sd2lkZ2V0cyIsCiAgICAgICAgICAgICAgcmVzaXplSGFuZGxlcgogICAgICAgICAgICApOwogICAgICAgICAgICB3aW5kb3cualF1ZXJ5KGRvY3VtZW50KS5vbigKICAgICAgICAgICAgICAiaGlkZGVuLmh0bWx3aWRnZXRzIGhpZGRlbi5icy50YWIuaHRtbHdpZGdldHMgaGlkZGVuLmJzLmNvbGxhcHNlLmh0bWx3aWRnZXRzIiwKICAgICAgICAgICAgICByZXNpemVIYW5kbGVyCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBzcGVjaWZpYyBjYXNlIG9mIGlvc2xpZGVzLCB3aGljaAogICAgICAgICAgLy8gZmxpcHMgc2xpZGVzIGJldHdlZW4gZGlzcGxheTpub25lIGFuZCBkaXNwbGF5OmJsb2NrLgogICAgICAgICAgLy8gSWRlYWxseSB3ZSB3b3VsZCBub3QgaGF2ZSB0byBoYXZlIGlvc2xpZGUtc3BlY2lmaWMgY29kZQogICAgICAgICAgLy8gaGVyZSwgYnV0IHJhdGhlciBoYXZlIGlvc2xpZGVzIHJhaXNlIGEgZ2VuZXJpYyBldmVudCwKICAgICAgICAgIC8vIGJ1dCB0aGUgcm1hcmtkb3duIHBhY2thZ2UganVzdCB3ZW50IHRvIENSQU4gc28gdGhlCiAgICAgICAgICAvLyB3aW5kb3cgdG8gZ2V0dGluZyB0aGF0IGZpeGVkIG1heSBiZSBsb25nLgogICAgICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgIC8vIEl0J3MgT0sgdG8gbGltaXQgdGhpcyB0byB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcgogICAgICAgICAgICAvLyBicm93c2VycyBiZWNhdXNlIGlvc2xpZGVzIGl0c2VsZiBvbmx5IHN1cHBvcnRzCiAgICAgICAgICAgIC8vIHN1Y2ggYnJvd3NlcnMuCiAgICAgICAgICAgIG9uKGRvY3VtZW50LCAic2xpZGVlbnRlciIsIHJlc2l6ZUhhbmRsZXIpOwogICAgICAgICAgICBvbihkb2N1bWVudCwgInNsaWRlbGVhdmUiLCByZXNpemVIYW5kbGVyKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBzY3JpcHREYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vanNvbiddIik7CiAgICAgICAgaWYgKHNjcmlwdERhdGEpIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzY3JpcHREYXRhLnRleHRDb250ZW50IHx8IHNjcmlwdERhdGEudGV4dCk7CiAgICAgICAgICAvLyBSZXNvbHZlIHN0cmluZ3MgbWFya2VkIGFzIGphdmFzY3JpcHQgbGl0ZXJhbHMgdG8gb2JqZWN0cwogICAgICAgICAgaWYgKCEoZGF0YS5ldmFscyBpbnN0YW5jZW9mIEFycmF5KSkgZGF0YS5ldmFscyA9IFtkYXRhLmV2YWxzXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBkYXRhLmV2YWxzICYmIGsgPCBkYXRhLmV2YWxzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlcihkYXRhLngsIGRhdGEuZXZhbHNba10pOwogICAgICAgICAgfQogICAgICAgICAgYmluZGluZy5yZW5kZXJWYWx1ZShlbCwgZGF0YS54LCBpbml0UmVzdWx0KTsKICAgICAgICAgIGV2YWxBbmRSdW4oZGF0YS5qc0hvb2tzLnJlbmRlciwgaW5pdFJlc3VsdCwgW2VsLCBkYXRhLnhdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgaW52b2tlUG9zdFJlbmRlckhhbmRsZXJzKCk7CiAgfQoKCiAgZnVuY3Rpb24gaGFzX2pRdWVyeTMoKSB7CiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyICR2ZXJzaW9uID0gd2luZG93LmpRdWVyeS5mbi5qcXVlcnk7CiAgICB2YXIgJG1ham9yX3ZlcnNpb24gPSBwYXJzZUludCgkdmVyc2lvbi5zcGxpdCgiLiIpWzBdKTsKICAgIHJldHVybiAkbWFqb3JfdmVyc2lvbiA+PSAzOwogIH0KCiAgLyoKICAvIFNoaW55IDEuNCBidW1wZWQgalF1ZXJ5IGZyb20gMS54IHRvIDMueCB3aGljaCBtZWFucyBqUXVlcnkncwogIC8gb24tcmVhZHkgaGFuZGxlciAoaS5lLiwgJChmbikpIGlzIG5vdyBhc3luY3Jvbm91cyAoaS5lLiwgaXQgbm93CiAgLyByZWFsbHkgbWVhbnMgJChzZXRUaW1lb3V0KGZuKSkuCiAgLyBodHRwczovL2pxdWVyeS5jb20vdXBncmFkZS1ndWlkZS8zLjAvI2JyZWFraW5nLWNoYW5nZS1kb2N1bWVudC1yZWFkeS1oYW5kbGVycy1hcmUtbm93LWFzeW5jaHJvbm91cwogIC8KICAvIFNpbmNlIFNoaW55IHVzZXMgJCgpIHRvIHNjaGVkdWxlIGluaXRTaGlueSwgc2hpbnk+PTEuNCBjYWxscyBpbml0U2hpbnkKICAvIG9uZSB0aWNrIGxhdGVyIHRoYW4gaXQgZGlkIGJlZm9yZSwgd2hpY2ggbWVhbnMgc3RhdGljUmVuZGVyKCkgaXMKICAvIGNhbGxlZCByZW5kZXJWYWx1ZSgpIGVhcmxpZXIgdGhhbiAoYWR2YW5jZWQpIHdpZGdldCBhdXRob3JzIG1pZ2h0IGJlIGV4cGVjdGluZy4KICAvIGh0dHBzOi8vZ2l0aHViLmNvbS9yc3R1ZGlvL3NoaW55L2lzc3Vlcy8yNjMwCiAgLwogIC8gRm9yIGEgY29uY3JldGUgZXhhbXBsZSwgbGVhZmxldCBoYXMgc29tZSBtZXRob2RzIChlLmcuLCB1cGRhdGVCb3VuZHMpCiAgLyB3aGljaCByZWZlcmVuY2UgU2hpbnkgbWV0aG9kcyByZWdpc3RlcmVkIGluIGluaXRTaGlueSAoZS5nLiwgc2V0SW5wdXRWYWx1ZSkuCiAgLyBTaW5jZSBsZWFmbGV0IGlzIHByaXZ5IHRvIHRoaXMgbGlmZS1jeWNsZSwgaXQga25vd3MgdG8gdXNlIHNldFRpbWVvdXQoKSB0bwogIC8gZGVsYXkgZXhlY3V0aW9uIG9mIHRob3NlIG1ldGhvZHMgKHVudGlsIFNoaW55IG1ldGhvZHMgYXJlIHJlYWR5KQogIC8gaHR0cHM6Ly9naXRodWIuY29tL3JzdHVkaW8vbGVhZmxldC9ibG9iLzE4ZWM5ODEvamF2YXNjcmlwdC9zcmMvaW5kZXguanMjTDI2Ni1MMjY4CiAgLwogIC8gSWRlYWxseSB3aWRnZXQgYXV0aG9ycyB3b3VsZG4ndCBuZWVkIHRvIHVzZSB0aGlzIHNldFRpbWVvdXQoKSBoYWNrIHRoYXQKICAvIGxlYWZsZXQgdXNlcyB0byBjYWxsIFNoaW55IG1ldGhvZHMgb24gYSBzdGF0aWNSZW5kZXIoKS4gSW4gdGhlIGxvbmcgcnVuLAogIC8gdGhlIGxvZ2ljIGluaXRTaGlueSBzaG91bGQgYmUgYnJva2VuIHVwIHNvIHRoYXQgbWV0aG9kIHJlZ2lzdHJhdGlvbiBoYXBwZW5zCiAgLyByaWdodCBhd2F5LCBidXQgYmluZGluZyBoYXBwZW5zIGxhdGVyLgogICovCiAgZnVuY3Rpb24gbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpIHsKICAgIGlmIChzaGlueU1vZGUgJiYgaGFzX2pRdWVyeTMoKSkgewogICAgICB3aW5kb3cualF1ZXJ5KHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgfQogIH0KCiAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbigpIHsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGFyZ3VtZW50cy5jYWxsZWUsIGZhbHNlKTsKICAgICAgbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpOwogICAgfSwgZmFsc2UpOwogIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHsKICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIpIHsKICAgICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgYXJndW1lbnRzLmNhbGxlZSk7CiAgICAgICAgbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpOwogICAgICB9CiAgICB9KTsKICB9CgoKICB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0QXR0YWNobWVudFVybCA9IGZ1bmN0aW9uKGRlcG5hbWUsIGtleSkgewogICAgLy8gSWYgbm8ga2V5LCBkZWZhdWx0IHRvIHRoZSBmaXJzdCBpdGVtCiAgICBpZiAodHlwZW9mKGtleSkgPT09ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSAxOwoKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVwbmFtZSArICItIiArIGtleSArICItYXR0YWNobWVudCIpOwogICAgaWYgKCFsaW5rKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiQXR0YWNobWVudCAiICsgZGVwbmFtZSArICIvIiArIGtleSArICIgbm90IGZvdW5kIGluIGRvY3VtZW50Iik7CiAgICB9CiAgICByZXR1cm4gbGluay5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICB9OwoKICB3aW5kb3cuSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyA9IGZ1bmN0aW9uKGRmKSB7CiAgICB2YXIgbmFtZXMgPSBbXTsKICAgIHZhciBsZW5ndGg7CiAgICBmb3IgKHZhciBuYW1lIGluIGRmKSB7CiAgICAgICAgaWYgKGRmLmhhc093blByb3BlcnR5KG5hbWUpKQogICAgICAgICAgICBuYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIGlmICh0eXBlb2YoZGZbbmFtZV0pICE9PSAib2JqZWN0IiB8fCB0eXBlb2YoZGZbbmFtZV0ubGVuZ3RoKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIik7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YobGVuZ3RoKSAhPT0gInVuZGVmaW5lZCIgJiYgbGVuZ3RoICE9PSBkZltuYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCIpOwogICAgICAgIH0KICAgICAgICBsZW5ndGggPSBkZltuYW1lXS5sZW5ndGg7CiAgICB9CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdmFyIGl0ZW07CiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBsZW5ndGg7IHJvdysrKSB7CiAgICAgICAgaXRlbSA9IHt9OwogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5hbWVzLmxlbmd0aDsgY29sKyspIHsKICAgICAgICAgICAgaXRlbVtuYW1lc1tjb2xdXSA9IGRmW25hbWVzW2NvbF1dW3Jvd107CiAgICAgICAgfQogICAgICAgIHJlc3VsdHMucHVzaChpdGVtKTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIHdpbmRvdy5IVE1MV2lkZ2V0cy50cmFuc3Bvc2VBcnJheTJEID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFycmF5OwogICAgICB2YXIgbmV3QXJyYXkgPSBhcnJheVswXS5tYXAoZnVuY3Rpb24oY29sLCBpKSB7CiAgICAgICAgICByZXR1cm4gYXJyYXkubWFwKGZ1bmN0aW9uKHJvdykgewogICAgICAgICAgICAgIHJldHVybiByb3dbaV0KICAgICAgICAgIH0pCiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3QXJyYXk7CiAgfTsKICAvLyBTcGxpdCB2YWx1ZSBhdCBzcGxpdENoYXIsIGJ1dCBhbGxvdyBzcGxpdENoYXIgdG8gYmUgZXNjYXBlZAogIC8vIHVzaW5nIGVzY2FwZUNoYXIuIEFueSBvdGhlciBjaGFyYWN0ZXJzIGVzY2FwZWQgYnkgZXNjYXBlQ2hhcgogIC8vIHdpbGwgYmUgaW5jbHVkZWQgYXMgdXN1YWwgKGluY2x1ZGluZyBlc2NhcGVDaGFyIGl0c2VsZikuCiAgZnVuY3Rpb24gc3BsaXRXaXRoRXNjYXBlKHZhbHVlLCBzcGxpdENoYXIsIGVzY2FwZUNoYXIpIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICB2YXIgZXNjYXBlTW9kZSA9IGZhbHNlOwogICAgdmFyIGN1cnJlbnRSZXN1bHQgPSAiIjsKICAgIGZvciAodmFyIHBvcyA9IDA7IHBvcyA8IHZhbHVlLmxlbmd0aDsgcG9zKyspIHsKICAgICAgaWYgKCFlc2NhcGVNb2RlKSB7CiAgICAgICAgaWYgKHZhbHVlW3Bvc10gPT09IHNwbGl0Q2hhcikgewogICAgICAgICAgcmVzdWx0cy5wdXNoKGN1cnJlbnRSZXN1bHQpOwogICAgICAgICAgY3VycmVudFJlc3VsdCA9ICIiOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWVbcG9zXSA9PT0gZXNjYXBlQ2hhcikgewogICAgICAgICAgZXNjYXBlTW9kZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1cnJlbnRSZXN1bHQgKz0gdmFsdWVbcG9zXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFJlc3VsdCArPSB2YWx1ZVtwb3NdOwogICAgICAgIGVzY2FwZU1vZGUgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgaWYgKGN1cnJlbnRSZXN1bHQgIT09ICIiKSB7CiAgICAgIHJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0KICAvLyBGdW5jdGlvbiBhdXRob3JlZCBieSBZaWh1aS9KSiBBbGxhaXJlCiAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyID0gZnVuY3Rpb24obywgbWVtYmVyKSB7CiAgICB2YXIgcGFydHMgPSBzcGxpdFdpdGhFc2NhcGUobWVtYmVyLCAnLicsICdcXCcpOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTsKICAgICAgLy8gcGFydCBtYXkgYmUgYSBjaGFyYWN0ZXIgb3IgJ251bWVyaWMnIG1lbWJlciBuYW1lCiAgICAgIGlmIChvICE9PSBudWxsICYmIHR5cGVvZiBvID09PSAib2JqZWN0IiAmJiBwYXJ0IGluIG8pIHsKICAgICAgICBpZiAoaSA9PSAobCAtIDEpKSB7IC8vIGlmIHdlIGFyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIHRoZW4gZXZhbHVsYXRlCiAgICAgICAgICBpZiAodHlwZW9mIG9bcGFydF0gPT09ICJzdHJpbmciKQogICAgICAgICAgICBvW3BhcnRdID0gdHJ5RXZhbChvW3BhcnRdKTsKICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UgY29udGludWUgdG8gbmV4dCBlbWJlZGRlZCBvYmplY3QKICAgICAgICAgIG8gPSBvW3BhcnRdOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIFJldHJpZXZlIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlIChpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgYW4KICAvLyBIVE1MV2lkZ2V0IGJpbmRpbmcncyBpbml0aWFsaXplKCkgb3IgZmFjdG9yeSgpIGZ1bmN0aW9uKQogIC8vIGFzc29jaWF0ZWQgd2l0aCBhbiBlbGVtZW50LCBvciBudWxsIGlmIG5vbmUuCiAgd2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlID0gZnVuY3Rpb24oZWwpIHsKICAgIHJldHVybiBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0Iik7CiAgfTsKCiAgLy8gRmluZHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNjb3BlIHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IsCiAgLy8gYW5kIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2UgKGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZgogIC8vIGFuIEhUTUxXaWRnZXQgYmluZGluZydzIGluaXRpYWxpemUoKSBvciBmYWN0b3J5KCkgZnVuY3Rpb24pCiAgLy8gYXNzb2NpYXRlZCB3aXRoIHRoYXQgZWxlbWVudCwgaWYgYW55LiBJZiBubyBlbGVtZW50IG1hdGNoZXMgdGhlCiAgLy8gc2VsZWN0b3IsIG9yIHRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IGhhcyBubyBIVE1MV2lkZ2V0CiAgLy8gaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIGl0LCB0aGVuIG51bGwgaXMgcmV0dXJuZWQuCiAgLy8KICAvLyBUaGUgc2NvcGUgYXJndW1lbnQgaXMgb3B0aW9uYWwsIGFuZCBkZWZhdWx0cyB0byB3aW5kb3cuZG9jdW1lbnQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmZpbmQgPSBmdW5jdGlvbihzY29wZSwgc2VsZWN0b3IpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgc2VsZWN0b3IgPSBzY29wZTsKICAgICAgc2NvcGUgPSBkb2N1bWVudDsKICAgIH0KCiAgICB2YXIgZWwgPSBzY29wZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIGlmIChlbCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0SW5zdGFuY2UoZWwpOwogICAgfQogIH07CgogIC8vIEZpbmRzIGFsbCBlbGVtZW50cyBpbiB0aGUgc2NvcGUgdGhhdCBtYXRjaCB0aGUgc2VsZWN0b3IsIGFuZAogIC8vIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2VzIChpLmUuIHRoZSByZXR1cm4gdmFsdWVzIG9mCiAgLy8gYW4gSFRNTFdpZGdldCBiaW5kaW5nJ3MgaW5pdGlhbGl6ZSgpIG9yIGZhY3RvcnkoKSBmdW5jdGlvbikKICAvLyBhc3NvY2lhdGVkIHdpdGggdGhlIGVsZW1lbnRzLCBpbiBhbiBhcnJheS4gSWYgZWxlbWVudHMgdGhhdAogIC8vIG1hdGNoIHRoZSBzZWxlY3RvciBkb24ndCBoYXZlIGFuIGFzc29jaWF0ZWQgSFRNTFdpZGdldAogIC8vIGluc3RhbmNlLCB0aGUgcmV0dXJuZWQgYXJyYXkgd2lsbCBjb250YWluIG51bGxzLgogIC8vCiAgLy8gVGhlIHNjb3BlIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBhbmQgZGVmYXVsdHMgdG8gd2luZG93LmRvY3VtZW50LgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5maW5kQWxsID0gZnVuY3Rpb24oc2NvcGUsIHNlbGVjdG9yKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHNlbGVjdG9yID0gc2NvcGU7CiAgICAgIHNjb3BlID0gZG9jdW1lbnQ7CiAgICB9CgogICAgdmFyIG5vZGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICByZXN1bHRzLnB1c2god2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlKG5vZGVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICB2YXIgcG9zdFJlbmRlckhhbmRsZXJzID0gW107CiAgZnVuY3Rpb24gaW52b2tlUG9zdFJlbmRlckhhbmRsZXJzKCkgewogICAgd2hpbGUgKHBvc3RSZW5kZXJIYW5kbGVycy5sZW5ndGgpIHsKICAgICAgdmFyIGhhbmRsZXIgPSBwb3N0UmVuZGVySGFuZGxlcnMuc2hpZnQoKTsKICAgICAgaWYgKGhhbmRsZXIpIHsKICAgICAgICBoYW5kbGVyKCk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJlZ2lzdGVyIHRoZSBnaXZlbiBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIGFmdGVyIHRoZQogIC8vIG5leHQgdGltZSBzdGF0aWMgd2lkZ2V0cyBhcmUgcmVuZGVyZWQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmFkZFBvc3RSZW5kZXJIYW5kbGVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHBvc3RSZW5kZXJIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTsKICB9OwoKICAvLyBUYWtlcyBhIG5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9uLCBhbmQgcmV0dXJucyBhbgogIC8vIG9sZC1zdHlsZSBjbGFzcy1ib3VuZCBkZWZpbml0aW9uLiBUaGlzIHNhdmVzIHVzIGZyb20gaGF2aW5nCiAgLy8gdG8gcmV3cml0ZSBhbGwgdGhlIGxvZ2ljIGluIHRoaXMgZmlsZSB0byBhY2NvbW9kYXRlIGJvdGgKICAvLyB0eXBlcyBvZiBkZWZpbml0aW9ucy4KICBmdW5jdGlvbiBjcmVhdGVMZWdhY3lEZWZpbml0aW9uQWRhcHRlcihkZWZuKSB7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICBuYW1lOiBkZWZuLm5hbWUsCiAgICAgIHR5cGU6IGRlZm4udHlwZSwKICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICByZXR1cm4gZGVmbi5mYWN0b3J5KGVsLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSwKICAgICAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSkgewogICAgICAgIHJldHVybiBpbnN0YW5jZS5yZW5kZXJWYWx1ZSh4KTsKICAgICAgfSwKICAgICAgcmVzaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCwgaW5zdGFuY2UpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVzaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChkZWZuLmZpbmQpCiAgICAgIHJlc3VsdC5maW5kID0gZGVmbi5maW5kOwogICAgaWYgKGRlZm4ucmVuZGVyRXJyb3IpCiAgICAgIHJlc3VsdC5yZW5kZXJFcnJvciA9IGRlZm4ucmVuZGVyRXJyb3I7CiAgICBpZiAoZGVmbi5jbGVhckVycm9yKQogICAgICByZXN1bHQuY2xlYXJFcnJvciA9IGRlZm4uY2xlYXJFcnJvcjsKCiAgICByZXR1cm4gcmVzdWx0OwogIH0KfSkoKTsKCg=="></script>
<link href="data:text/css;charset-utf-8;base64,LnN0cl92aWV3IHVsLCAuc3RyX3ZpZXcgbGkgewogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgcGFkZGluZzogMDsKICBtYXJnaW46IDAuNWVtIDA7CiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKfQoKLnN0cl92aWV3IC5tYXRjaCB7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwp9Cg==" rel="stylesheet">
<script title="str_view-binding" src="data:application/javascript;base64,SFRNTFdpZGdldHMud2lkZ2V0KHsKCiAgbmFtZTogJ3N0cl92aWV3JywKCiAgdHlwZTogJ291dHB1dCcsCgogIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVsLCB3aWR0aCwgaGVpZ2h0KSB7CiAgfSwKCiAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSkgewogICAgZWwuaW5uZXJIVE1MID0geC5odG1sOwogIH0sCgogIHJlc2l6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQsIGluc3RhbmNlKSB7CiAgfQoKfSk7Cg=="></script>
    
    
        <div id="htmlwidget-ea62365776d42e2ff223" style="width:960px;height:30px;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-ea62365776d42e2ff223">{"x":{"html":"<ul>\n  <li>apple<\/li>\n  <li>b<span class='match'>an<\/span>ana<\/li>\n  <li>pear<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
    

</div>
</div>
</section>
<section id="匹配检测" class="level4">
<h4 class="anchored" data-anchor-id="匹配检测">匹配检测</h4>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(x,<span class="st">"an"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>FALSE</li><li>TRUE</li><li>FALSE</li></ol>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(words,<span class="st">"^t"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
65
</div>
</div>
<p>有多少个以t开头的常用单词</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>words</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'a'</li><li>'able'</li><li>'about'</li><li>'absolute'</li><li>'accept'</li><li>'account'</li><li>'achieve'</li><li>'across'</li><li>'act'</li><li>'active'</li><li>'actual'</li><li>'add'</li><li>'address'</li><li>'admit'</li><li>'advertise'</li><li>'affect'</li><li>'afford'</li><li>'after'</li><li>'afternoon'</li><li>'again'</li><li>'against'</li><li>'age'</li><li>'agent'</li><li>'ago'</li><li>'agree'</li><li>'air'</li><li>'all'</li><li>'allow'</li><li>'almost'</li><li>'along'</li><li>'already'</li><li>'alright'</li><li>'also'</li><li>'although'</li><li>'always'</li><li>'america'</li><li>'amount'</li><li>'and'</li><li>'another'</li><li>'answer'</li><li>'any'</li><li>'apart'</li><li>'apparent'</li><li>'appear'</li><li>'apply'</li><li>'appoint'</li><li>'approach'</li><li>'appropriate'</li><li>'area'</li><li>'argue'</li><li>'arm'</li><li>'around'</li><li>'arrange'</li><li>'art'</li><li>'as'</li><li>'ask'</li><li>'associate'</li><li>'assume'</li><li>'at'</li><li>'attend'</li><li>'authority'</li><li>'available'</li><li>'aware'</li><li>'away'</li><li>'awful'</li><li>'baby'</li><li>'back'</li><li>'bad'</li><li>'bag'</li><li>'balance'</li><li>'ball'</li><li>'bank'</li><li>'bar'</li><li>'base'</li><li>'basis'</li><li>'be'</li><li>'bear'</li><li>'beat'</li><li>'beauty'</li><li>'because'</li><li>'become'</li><li>'bed'</li><li>'before'</li><li>'begin'</li><li>'behind'</li><li>'believe'</li><li>'benefit'</li><li>'best'</li><li>'bet'</li><li>'between'</li><li>'big'</li><li>'bill'</li><li>'birth'</li><li>'bit'</li><li>'black'</li><li>'bloke'</li><li>'blood'</li><li>'blow'</li><li>'blue'</li><li>'board'</li><li>'boat'</li><li>'body'</li><li>'book'</li><li>'both'</li><li>'bother'</li><li>'bottle'</li><li>'bottom'</li><li>'box'</li><li>'boy'</li><li>'break'</li><li>'brief'</li><li>'brilliant'</li><li>'bring'</li><li>'britain'</li><li>'brother'</li><li>'budget'</li><li>'build'</li><li>'bus'</li><li>'business'</li><li>'busy'</li><li>'but'</li><li>'buy'</li><li>'by'</li><li>'cake'</li><li>'call'</li><li>'can'</li><li>'car'</li><li>'card'</li><li>'care'</li><li>'carry'</li><li>'case'</li><li>'cat'</li><li>'catch'</li><li>'cause'</li><li>'cent'</li><li>'centre'</li><li>'certain'</li><li>'chair'</li><li>'chairman'</li><li>'chance'</li><li>'change'</li><li>'chap'</li><li>'character'</li><li>'charge'</li><li>'cheap'</li><li>'check'</li><li>'child'</li><li>'choice'</li><li>'choose'</li><li>'Christ'</li><li>'Christmas'</li><li>'church'</li><li>'city'</li><li>'claim'</li><li>'class'</li><li>'clean'</li><li>'clear'</li><li>'client'</li><li>'clock'</li><li>'close'</li><li>'closes'</li><li>'clothe'</li><li>'club'</li><li>'coffee'</li><li>'cold'</li><li>'colleague'</li><li>'collect'</li><li>'college'</li><li>'colour'</li><li>'come'</li><li>'comment'</li><li>'commit'</li><li>'committee'</li><li>'common'</li><li>'community'</li><li>'company'</li><li>'compare'</li><li>'complete'</li><li>'compute'</li><li>'concern'</li><li>'condition'</li><li>'confer'</li><li>'consider'</li><li>'consult'</li><li>'contact'</li><li>'continue'</li><li>'contract'</li><li>'control'</li><li>'converse'</li><li>'cook'</li><li>'copy'</li><li>'corner'</li><li>'correct'</li><li>'cost'</li><li>'could'</li><li>'council'</li><li>'count'</li><li>'country'</li><li>'county'</li><li>'couple'</li><li>⋯</li><li>'society'</li><li>'some'</li><li>'son'</li><li>'soon'</li><li>'sorry'</li><li>'sort'</li><li>'sound'</li><li>'south'</li><li>'space'</li><li>'speak'</li><li>'special'</li><li>'specific'</li><li>'speed'</li><li>'spell'</li><li>'spend'</li><li>'square'</li><li>'staff'</li><li>'stage'</li><li>'stairs'</li><li>'stand'</li><li>'standard'</li><li>'start'</li><li>'state'</li><li>'station'</li><li>'stay'</li><li>'step'</li><li>'stick'</li><li>'still'</li><li>'stop'</li><li>'story'</li><li>'straight'</li><li>'strategy'</li><li>'street'</li><li>'strike'</li><li>'strong'</li><li>'structure'</li><li>'student'</li><li>'study'</li><li>'stuff'</li><li>'stupid'</li><li>'subject'</li><li>'succeed'</li><li>'such'</li><li>'sudden'</li><li>'suggest'</li><li>'suit'</li><li>'summer'</li><li>'sun'</li><li>'sunday'</li><li>'supply'</li><li>'support'</li><li>'suppose'</li><li>'sure'</li><li>'surprise'</li><li>'switch'</li><li>'system'</li><li>'table'</li><li>'take'</li><li>'talk'</li><li>'tape'</li><li>'tax'</li><li>'tea'</li><li>'teach'</li><li>'team'</li><li>'telephone'</li><li>'television'</li><li>'tell'</li><li>'ten'</li><li>'tend'</li><li>'term'</li><li>'terrible'</li><li>'test'</li><li>'than'</li><li>'thank'</li><li>'the'</li><li>'then'</li><li>'there'</li><li>'therefore'</li><li>'they'</li><li>'thing'</li><li>'think'</li><li>'thirteen'</li><li>'thirty'</li><li>'this'</li><li>'thou'</li><li>'though'</li><li>'thousand'</li><li>'three'</li><li>'through'</li><li>'throw'</li><li>'thursday'</li><li>'tie'</li><li>'time'</li><li>'to'</li><li>'today'</li><li>'together'</li><li>'tomorrow'</li><li>'tonight'</li><li>'too'</li><li>'top'</li><li>'total'</li><li>'touch'</li><li>'toward'</li><li>'town'</li><li>'trade'</li><li>'traffic'</li><li>'train'</li><li>'transport'</li><li>'travel'</li><li>'treat'</li><li>'tree'</li><li>'trouble'</li><li>'true'</li><li>'trust'</li><li>'try'</li><li>'tuesday'</li><li>'turn'</li><li>'twelve'</li><li>'twenty'</li><li>'two'</li><li>'type'</li><li>'under'</li><li>'understand'</li><li>'union'</li><li>'unit'</li><li>'unite'</li><li>'university'</li><li>'unless'</li><li>'until'</li><li>'up'</li><li>'upon'</li><li>'use'</li><li>'usual'</li><li>'value'</li><li>'various'</li><li>'very'</li><li>'video'</li><li>'view'</li><li>'village'</li><li>'visit'</li><li>'vote'</li><li>'wage'</li><li>'wait'</li><li>'walk'</li><li>'wall'</li><li>'want'</li><li>'war'</li><li>'warm'</li><li>'wash'</li><li>'waste'</li><li>'watch'</li><li>'water'</li><li>'way'</li><li>'we'</li><li>'wear'</li><li>'wednesday'</li><li>'wee'</li><li>'week'</li><li>'weigh'</li><li>'welcome'</li><li>'well'</li><li>'west'</li><li>'what'</li><li>'when'</li><li>'where'</li><li>'whether'</li><li>'which'</li><li>'while'</li><li>'white'</li><li>'who'</li><li>'whole'</li><li>'why'</li><li>'wide'</li><li>'wife'</li><li>'will'</li><li>'win'</li><li>'wind'</li><li>'window'</li><li>'wish'</li><li>'with'</li><li>'within'</li><li>'without'</li><li>'woman'</li><li>'wonder'</li><li>'wood'</li><li>'word'</li><li>'work'</li><li>'world'</li><li>'worry'</li><li>'worse'</li><li>'worth'</li><li>'would'</li><li>'write'</li><li>'wrong'</li><li>'year'</li><li>'yes'</li><li>'yesterday'</li><li>'yet'</li><li>'you'</li><li>'young'</li></ol>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(sentences)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
720
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentences)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'The birch canoe slid on the smooth planks.'</li><li>'Glue the sheet to the dark blue background.'</li><li>'It\'s easy to tell the depth of a well.'</li><li>'These days a chicken leg is a rare dish.'</li><li>'Rice is often served in round bowls.'</li><li>'The juice of lemons makes fine punch.'</li></ol>
</div>
</div>
</section>
</section>
<section id="用forecast处理因子" class="level3">
<h3 class="anchored" data-anchor-id="用forecast处理因子">用forecast处理因子</h3>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

✔ tibble  3.1.8     ✔ purrr   0.3.4
✔ tidyr   1.2.0     ✔ forcats 0.5.1
✔ readr   2.1.2     

── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ stats::filter() masks dplyr::filter()
✖ stats::lag()    masks dplyr::lag()
</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dec"</span>,<span class="st">"apr"</span>,<span class="st">"jan"</span>,<span class="st">"mar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dec"</span>,<span class="st">"apr"</span>,<span class="st">"jam"</span>,<span class="st">"mar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'apr'</li><li>'dec'</li><li>'jan'</li><li>'mar'</li></ol>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>month_levels <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"jan"</span>, <span class="st">"feb"</span>, <span class="st">"mar"</span>, <span class="st">"apr"</span>, <span class="st">"may"</span>,<span class="st">"jun"</span>,<span class="st">"jul"</span>,<span class="st">"aug"</span>,<span class="st">"sep"</span>,<span class="st">"oct"</span>,<span class="st">"nov"</span>,<span class="st">"dec"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(x1,<span class="at">levels=</span>month_levels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(y1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>jan</li><li>mar</li><li>apr</li><li>dec</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'jan'</li><li>'feb'</li><li>'mar'</li><li>'apr'</li><li>'may'</li><li>'jun'</li><li>'jul'</li><li>'aug'</li><li>'sep'</li><li>'oct'</li><li>'nov'</li><li>'dec'</li></ol>
</details>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>y2<span class="ot">&lt;-</span><span class="fu">factor</span>(x2,<span class="at">levels=</span>month_levels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>y2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>dec</li><li>apr</li><li>&lt;NA&gt;</li><li>mar</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'jan'</li><li>'feb'</li><li>'mar'</li><li>'apr'</li><li>'may'</li><li>'jun'</li><li>'jul'</li><li>'aug'</li><li>'sep'</li><li>'oct'</li><li>'nov'</li><li>'dec'</li></ol>
</details>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>gss_cat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 21483 × 9</caption>
<thead>
<tr class="header">
<th scope="col">year</th>
<th scope="col">marital</th>
<th scope="col">age</th>
<th scope="col">race</th>
<th scope="col">rincome</th>
<th scope="col">partyid</th>
<th scope="col">relig</th>
<th scope="col">denom</th>
<th scope="col">tvhours</th>
</tr>
<tr class="odd">
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;int&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2000</td>
<td>Never married</td>
<td>26</td>
<td>White</td>
<td>$8000 to 9999</td>
<td>Ind,near rep</td>
<td>Protestant</td>
<td>Southern baptist</td>
<td>12</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Divorced</td>
<td>48</td>
<td>White</td>
<td>$8000 to 9999</td>
<td>Not str republican</td>
<td>Protestant</td>
<td>Baptist-dk which</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Widowed</td>
<td>67</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>Protestant</td>
<td>No denomination</td>
<td>2</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Never married</td>
<td>39</td>
<td>White</td>
<td>Not applicable</td>
<td>Ind,near rep</td>
<td>Orthodox-christian</td>
<td>Not applicable</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Divorced</td>
<td>25</td>
<td>White</td>
<td>Not applicable</td>
<td>Not str democrat</td>
<td>None</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>25</td>
<td>White</td>
<td>$20000 - 24999</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Southern baptist</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Never married</td>
<td>36</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str republican</td>
<td>Christian</td>
<td>Not applicable</td>
<td>3</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Divorced</td>
<td>44</td>
<td>White</td>
<td>$7000 to 7999</td>
<td>Ind,near dem</td>
<td>Protestant</td>
<td>Lutheran-mo synod</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Married</td>
<td>44</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>Protestant</td>
<td>Other</td>
<td>0</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>47</td>
<td>White</td>
<td>$25000 or more</td>
<td>Strong republican</td>
<td>Protestant</td>
<td>Southern baptist</td>
<td>3</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Married</td>
<td>53</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>Protestant</td>
<td>Other</td>
<td>2</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>52</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near rep</td>
<td>None</td>
<td>Not applicable</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Married</td>
<td>52</td>
<td>White</td>
<td>$25000 or more</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Southern baptist</td>
<td>1</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>51</td>
<td>White</td>
<td>$25000 or more</td>
<td>Strong republican</td>
<td>Protestant</td>
<td>United methodist</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Divorced</td>
<td>52</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near dem</td>
<td>None</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>40</td>
<td>Black</td>
<td>$25000 or more</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Baptist-dk which</td>
<td>7</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Widowed</td>
<td>77</td>
<td>White</td>
<td>Not applicable</td>
<td>Strong republican</td>
<td>Jewish</td>
<td>Not applicable</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Never married</td>
<td>44</td>
<td>White</td>
<td>$25000 or more</td>
<td>Independent</td>
<td>None</td>
<td>Not applicable</td>
<td>3</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Married</td>
<td>40</td>
<td>White</td>
<td>$10000 - 14999</td>
<td>Not str democrat</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>3</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>45</td>
<td>Black</td>
<td>Not applicable</td>
<td>Independent</td>
<td>Protestant</td>
<td>United methodist</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Married</td>
<td>48</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near dem</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Married</td>
<td>49</td>
<td>White</td>
<td>Refused</td>
<td>Strong republican</td>
<td>Protestant</td>
<td>United methodist</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Never married</td>
<td>19</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>None</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Widowed</td>
<td>54</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near rep</td>
<td>Christian</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Widowed</td>
<td>82</td>
<td>White</td>
<td>Not applicable</td>
<td>Not str democrat</td>
<td>Protestant</td>
<td>Other</td>
<td>3</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Widowed</td>
<td>83</td>
<td>White</td>
<td>Not applicable</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Episcopal</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Widowed</td>
<td>89</td>
<td>White</td>
<td>Not applicable</td>
<td>Not str democrat</td>
<td>Protestant</td>
<td>Other lutheran</td>
<td>4</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Widowed</td>
<td>88</td>
<td>White</td>
<td>Not applicable</td>
<td>Strong republican</td>
<td>Protestant</td>
<td>Afr meth ep zion</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2000</td>
<td>Divorced</td>
<td>72</td>
<td>White</td>
<td>Not applicable</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Southern baptist</td>
<td>7</td>
</tr>
<tr class="even">
<td>2000</td>
<td>Widowed</td>
<td>82</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>Protestant</td>
<td>Am bapt ch in usa</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Divorced</td>
<td>38</td>
<td>White</td>
<td>$3000 to 3999</td>
<td>Not str republican</td>
<td>Protestant</td>
<td>Other</td>
<td>1</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Widowed</td>
<td>46</td>
<td>White</td>
<td>$25000 or more</td>
<td>Strong democrat</td>
<td>None</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>49</td>
<td>White</td>
<td>Not applicable</td>
<td>Ind,near rep</td>
<td>Protestant</td>
<td>Other</td>
<td>6</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Never married</td>
<td>34</td>
<td>White</td>
<td>$25000 or more</td>
<td>Independent</td>
<td>Protestant</td>
<td>United methodist</td>
<td>2</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>54</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>Protestant</td>
<td>Other</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>34</td>
<td>White</td>
<td>$15000 - 19999</td>
<td>Ind,near dem</td>
<td>Buddhism</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>69</td>
<td>White</td>
<td>Not applicable</td>
<td>Ind,near dem</td>
<td>Jewish</td>
<td>Not applicable</td>
<td>3</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Divorced</td>
<td>36</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>None</td>
<td>Not applicable</td>
<td>0</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>65</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>None</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>48</td>
<td>White</td>
<td>$20000 - 24999</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Other</td>
<td>0</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>38</td>
<td>White</td>
<td>$10000 - 14999</td>
<td>Not str democrat</td>
<td>Protestant</td>
<td>No denomination</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Never married</td>
<td>30</td>
<td>White</td>
<td>$4000 to 4999</td>
<td>Ind,near dem</td>
<td>None</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>48</td>
<td>White</td>
<td>$8000 to 9999</td>
<td>Not str republican</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>0</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Divorced</td>
<td>49</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near rep</td>
<td>Other</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>54</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near dem</td>
<td>Protestant</td>
<td>Other</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>49</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str republican</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Married</td>
<td>53</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>None</td>
<td>Not applicable</td>
<td>0</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>52</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>None</td>
<td>Not applicable</td>
<td>1</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Widowed</td>
<td>82</td>
<td>White</td>
<td>Not applicable</td>
<td>Strong democrat</td>
<td>Protestant</td>
<td>Other</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>63</td>
<td>White</td>
<td>Not applicable</td>
<td>Ind,near dem</td>
<td>No answer</td>
<td>No answer</td>
<td>2</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Divorced</td>
<td>54</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near rep</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>3</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>62</td>
<td>White</td>
<td>$25000 or more</td>
<td>Ind,near rep</td>
<td>Protestant</td>
<td>Other</td>
<td>NA</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Never married</td>
<td>40</td>
<td>White</td>
<td>$1000 to 2999</td>
<td>Not str republican</td>
<td>None</td>
<td>Not applicable</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Married</td>
<td>33</td>
<td>White</td>
<td>Not applicable</td>
<td>Independent</td>
<td>Christian</td>
<td>No denomination</td>
<td>0</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Widowed</td>
<td>75</td>
<td>White</td>
<td>Don't know</td>
<td>Strong republican</td>
<td>Protestant</td>
<td>Baptist-dk which</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Widowed</td>
<td>89</td>
<td>White</td>
<td>Not applicable</td>
<td>Not str republican</td>
<td>Protestant</td>
<td>United methodist</td>
<td>3</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Divorced</td>
<td>56</td>
<td>White</td>
<td>$25000 or more</td>
<td>Independent</td>
<td>None</td>
<td>Not applicable</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Never married</td>
<td>24</td>
<td>White</td>
<td>$10000 - 14999</td>
<td>Ind,near dem</td>
<td>None</td>
<td>Not applicable</td>
<td>4</td>
</tr>
<tr class="even">
<td>2014</td>
<td>Never married</td>
<td>27</td>
<td>White</td>
<td>$25000 or more</td>
<td>Not str democrat</td>
<td>Catholic</td>
<td>Not applicable</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>2014</td>
<td>Widowed</td>
<td>71</td>
<td>White</td>
<td>$20000 - 24999</td>
<td>Ind,near rep</td>
<td>Protestant</td>
<td>Other</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>gss_cat<span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 3 × 2</caption>
<thead>
<tr class="header">
<th scope="col">race</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Other</td>
<td>1959</td>
</tr>
<tr class="even">
<td>Black</td>
<td>3129</td>
</tr>
<tr class="odd">
<td>White</td>
<td>16395</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gss_cat,<span class="fu">aes</span>(race))<span class="sc">+</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-134-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="修改因子水平" class="level4">
<h4 class="anchored" data-anchor-id="修改因子水平">修改因子水平</h4>
<p>修改水平可以将图形标签更清晰美观，以满足要求。 最常用的工具是<code>fct_recode()</code>函数，对每个水平进行修改或重新编码</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>gss_cat<span class="sc">%&gt;%</span><span class="fu">count</span>(partyid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 2</caption>
<thead>
<tr class="header">
<th scope="col">partyid</th>
<th scope="col">n</th>
</tr>
<tr class="odd">
<th scope="col">&lt;fct&gt;</th>
<th scope="col">&lt;int&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>No answer</td>
<td>154</td>
</tr>
<tr class="even">
<td>Don't know</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Other party</td>
<td>393</td>
</tr>
<tr class="even">
<td>Strong republican</td>
<td>2314</td>
</tr>
<tr class="odd">
<td>Not str republican</td>
<td>3032</td>
</tr>
<tr class="even">
<td>Ind,near rep</td>
<td>1791</td>
</tr>
<tr class="odd">
<td>Independent</td>
<td>4119</td>
</tr>
<tr class="even">
<td>Ind,near dem</td>
<td>2499</td>
</tr>
<tr class="odd">
<td>Not str democrat</td>
<td>3690</td>
</tr>
<tr class="even">
<td>Strong democrat</td>
<td>3490</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>gss_cat<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">paryid=</span><span class="fu">fct_recode</span>(partyid,</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="st">"                                  ))%&gt;%count(partyid)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="模型" class="level2">
<h2 class="anchored" data-anchor-id="模型">模型</h2>
<p>一个简单的模型</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">na.action=</span>na.warn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim1,<span class="fu">aes</span>(x,y))<span class="sc">+</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-138-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>使用<code>geom_abline()</code>作为接受斜率和截距的参数。</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>models<span class="ot">&lt;-</span><span class="fu">tibble</span>(</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">a1=</span><span class="fu">runif</span>(<span class="dv">250</span>,<span class="sc">-</span><span class="dv">20</span>,<span class="dv">40</span>),</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">a2=</span><span class="fu">runif</span>(<span class="dv">250</span>,<span class="sc">-</span><span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim1,<span class="fu">aes</span>(x,y))<span class="sc">+</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">intercept=</span>a1,<span class="at">slope=</span>a2),</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data=</span>models,<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-140-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>model1<span class="ot">&lt;-</span><span class="cf">function</span>(a,data){</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>    a[<span class="dv">1</span>]<span class="sc">+</span>data<span class="sc">$</span>x<span class="sc">*</span>a[<span class="dv">2</span>]</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="fu">model1</span>(<span class="fu">c</span>(<span class="dv">7</span>,<span class="fl">1.5</span>),sim1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>8.5</li><li>8.5</li><li>8.5</li><li>10</li><li>10</li><li>10</li><li>11.5</li><li>11.5</li><li>11.5</li><li>13</li><li>13</li><li>13</li><li>14.5</li><li>14.5</li><li>14.5</li><li>16</li><li>16</li><li>16</li><li>17.5</li><li>17.5</li><li>17.5</li><li>19</li><li>19</li><li>19</li><li>20.5</li><li>20.5</li><li>20.5</li><li>22</li><li>22</li><li>22</li></ol>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(sim1<span class="sc">$</span>y<span class="sc">~</span>sim1<span class="sc">$</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>
Call:
lm(formula = sim1$y ~ sim1$x)

Coefficients:
(Intercept)       sim1$x  
      4.221        2.052  </code></pre>
</div>
</div>
<p>计算RMSE</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>measure_distance<span class="ot">&lt;-</span><span class="cf">function</span>(mod,data){</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>    diff<span class="ot">&lt;-</span>data<span class="sc">$</span>y<span class="sc">-</span><span class="fu">model1</span>(mod,data)</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>(<span class="fu">mean</span>(diff<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="fu">measure_distance</span>(<span class="fu">c</span>(<span class="dv">7</span>,<span class="fl">1.5</span>),sim1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
2.66521206887029
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim1,<span class="fu">aes</span>(x,y))<span class="sc">+</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">intercept=</span><span class="fl">4.221</span>,<span class="at">slope=</span><span class="fl">2.052</span>),</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data=</span>models,<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-144-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>sim1_dist<span class="ot">&lt;-</span><span class="cf">function</span>(a1,a2){</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">measure_distance</span>(<span class="fu">c</span>(a1,a2),sim1)</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>models<span class="ot">&lt;-</span> models<span class="sc">%&gt;%</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">dist=</span>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(a1,a2,sim1_dist))</span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>models</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<table class="dataframe table table-sm table-striped">
<caption>A tibble: 250 × 3</caption>
<thead>
<tr class="header">
<th scope="col">a1</th>
<th scope="col">a2</th>
<th scope="col">dist</th>
</tr>
<tr class="odd">
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
<th scope="col">&lt;dbl&gt;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>25.8939742</td>
<td>4.12527708</td>
<td>33.678048</td>
</tr>
<tr class="even">
<td>27.2648124</td>
<td>-2.16334729</td>
<td>12.292729</td>
</tr>
<tr class="odd">
<td>16.4143964</td>
<td>2.39385045</td>
<td>14.270203</td>
</tr>
<tr class="even">
<td>-13.9463849</td>
<td>2.67610426</td>
<td>14.992703</td>
</tr>
<tr class="odd">
<td>17.3968330</td>
<td>3.66866673</td>
<td>22.653911</td>
</tr>
<tr class="even">
<td>-13.1896603</td>
<td>3.44623747</td>
<td>10.744162</td>
</tr>
<tr class="odd">
<td>26.5019563</td>
<td>-3.12030982</td>
<td>16.223277</td>
</tr>
<tr class="even">
<td>8.6455384</td>
<td>-3.30895119</td>
<td>29.487148</td>
</tr>
<tr class="odd">
<td>5.4990308</td>
<td>-3.50583991</td>
<td>33.422655</td>
</tr>
<tr class="even">
<td>21.5492480</td>
<td>4.16330328</td>
<td>29.648394</td>
</tr>
<tr class="odd">
<td>18.8202022</td>
<td>3.37972138</td>
<td>22.335762</td>
</tr>
<tr class="even">
<td>-4.3836592</td>
<td>2.46169729</td>
<td>6.798642</td>
</tr>
<tr class="odd">
<td>0.4930800</td>
<td>-2.57624917</td>
<td>32.135936</td>
</tr>
<tr class="even">
<td>23.5192233</td>
<td>2.02614316</td>
<td>19.276733</td>
</tr>
<tr class="odd">
<td>3.7050483</td>
<td>-3.01259516</td>
<td>31.951123</td>
</tr>
<tr class="even">
<td>-13.6400263</td>
<td>-4.65592229</td>
<td>58.081509</td>
</tr>
<tr class="odd">
<td>12.0623313</td>
<td>-1.62711042</td>
<td>16.422826</td>
</tr>
<tr class="even">
<td>-8.6369843</td>
<td>-0.04256578</td>
<td>25.196531</td>
</tr>
<tr class="odd">
<td>5.2793188</td>
<td>1.08157663</td>
<td>5.529676</td>
</tr>
<tr class="even">
<td>0.7286800</td>
<td>0.20832003</td>
<td>14.775987</td>
</tr>
<tr class="odd">
<td>22.7578678</td>
<td>4.63078748</td>
<td>33.618505</td>
</tr>
<tr class="even">
<td>22.4392158</td>
<td>3.28054053</td>
<td>25.315759</td>
</tr>
<tr class="odd">
<td>20.3574835</td>
<td>3.61268840</td>
<td>25.216336</td>
</tr>
<tr class="even">
<td>34.3444000</td>
<td>-4.06730493</td>
<td>18.051918</td>
</tr>
<tr class="odd">
<td>3.6715133</td>
<td>-3.53752878</td>
<td>35.231382</td>
</tr>
<tr class="even">
<td>-2.3516494</td>
<td>-3.74150671</td>
<td>41.935432</td>
</tr>
<tr class="odd">
<td>2.6082739</td>
<td>1.13104592</td>
<td>7.488525</td>
</tr>
<tr class="even">
<td>0.2349872</td>
<td>2.80973265</td>
<td>3.050534</td>
</tr>
<tr class="odd">
<td>-3.7599907</td>
<td>3.65673924</td>
<td>5.148361</td>
</tr>
<tr class="even">
<td>-12.1784598</td>
<td>2.99719831</td>
<td>11.717719</td>
</tr>
<tr class="odd">
<td>⋮</td>
<td>⋮</td>
<td>⋮</td>
</tr>
<tr class="even">
<td>-18.25429630</td>
<td>1.0628285</td>
<td>28.137680</td>
</tr>
<tr class="odd">
<td>28.47720882</td>
<td>-1.4273278</td>
<td>11.428741</td>
</tr>
<tr class="even">
<td>-1.69409033</td>
<td>-2.3813102</td>
<td>32.931184</td>
</tr>
<tr class="odd">
<td>-11.12420415</td>
<td>-1.7351186</td>
<td>37.831324</td>
</tr>
<tr class="even">
<td>-6.89637993</td>
<td>-0.7360245</td>
<td>27.715933</td>
</tr>
<tr class="odd">
<td>14.06403183</td>
<td>-3.1103001</td>
<td>23.839734</td>
</tr>
<tr class="even">
<td>26.15645752</td>
<td>-0.5099415</td>
<td>10.965506</td>
</tr>
<tr class="odd">
<td>30.70797157</td>
<td>-1.9196064</td>
<td>12.498618</td>
</tr>
<tr class="even">
<td>34.76040949</td>
<td>-3.6252376</td>
<td>16.457746</td>
</tr>
<tr class="odd">
<td>2.33044673</td>
<td>-0.1417064</td>
<td>15.456574</td>
</tr>
<tr class="even">
<td>10.33221718</td>
<td>-2.5549683</td>
<td>23.434356</td>
</tr>
<tr class="odd">
<td>7.01245683</td>
<td>0.7628761</td>
<td>6.056801</td>
</tr>
<tr class="even">
<td>-16.02814821</td>
<td>1.9522219</td>
<td>20.905743</td>
</tr>
<tr class="odd">
<td>29.04988048</td>
<td>3.9941010</td>
<td>36.011765</td>
</tr>
<tr class="even">
<td>28.84471810</td>
<td>0.5693023</td>
<td>17.145523</td>
</tr>
<tr class="odd">
<td>12.01410521</td>
<td>3.4039627</td>
<td>15.862597</td>
</tr>
<tr class="even">
<td>-0.01231243</td>
<td>-4.1196387</td>
<td>42.142797</td>
</tr>
<tr class="odd">
<td>-2.27586546</td>
<td>-4.7444047</td>
<td>48.067782</td>
</tr>
<tr class="even">
<td>19.81414753</td>
<td>-2.5600360</td>
<td>16.596301</td>
</tr>
<tr class="odd">
<td>-12.22730105</td>
<td>-0.1983924</td>
<td>29.614875</td>
</tr>
<tr class="even">
<td>2.01877660</td>
<td>2.5634932</td>
<td>2.658604</td>
</tr>
<tr class="odd">
<td>10.00248966</td>
<td>-4.8671421</td>
<td>37.958676</td>
</tr>
<tr class="even">
<td>-1.44763710</td>
<td>3.4218653</td>
<td>4.848906</td>
</tr>
<tr class="odd">
<td>-0.46312617</td>
<td>4.0839558</td>
<td>8.988031</td>
</tr>
<tr class="even">
<td>-10.91154613</td>
<td>-4.8939085</td>
<td>56.981015</td>
</tr>
<tr class="odd">
<td>9.77806405</td>
<td>-3.7767585</td>
<td>31.415544</td>
</tr>
<tr class="even">
<td>26.40300828</td>
<td>1.1381687</td>
<td>17.488052</td>
</tr>
<tr class="odd">
<td>-5.05738873</td>
<td>-1.4701986</td>
<td>30.455595</td>
</tr>
<tr class="even">
<td>-3.32008007</td>
<td>2.4790783</td>
<td>5.741700</td>
</tr>
<tr class="odd">
<td>13.22413116</td>
<td>2.0478461</td>
<td>9.231690</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim1,<span class="fu">aes</span>(x,y))<span class="sc">+</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>,<span class="at">color=</span><span class="st">"grey30"</span>)<span class="sc">+</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">intercept=</span>a1,<span class="at">slope=</span>a2,<span class="at">color=</span><span class="sc">-</span>dist),</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data=</span>dplyr<span class="sc">::</span><span class="fu">filter</span>(models,<span class="fu">rank</span>(dist)<span class="sc">&lt;=</span><span class="dv">10</span>)</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-146-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>best<span class="ot">&lt;-</span><span class="fu">optim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),measure_distance,<span class="at">data=</span>sim1)</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>best<span class="sc">$</span>par</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>4.22224779961462</li><li>2.05120381317836</li></ol>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(sim1<span class="sc">$</span>y<span class="sc">~</span>sim1<span class="sc">$</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>
Call:
lm(formula = sim1$y ~ sim1$x)

Coefficients:
(Intercept)       sim1$x  
      4.221        2.052  </code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim1,<span class="fu">aes</span>(x,y))<span class="sc">+</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_abline</span>(</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">intercept=</span>best<span class="sc">$</span>par[<span class="dv">1</span>],<span class="at">slope=</span>best<span class="sc">$</span>par[<span class="dv">2</span>]),</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data=</span>models,<span class="at">alpha=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="DR2_files/figure-html/cell-149-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="残差" class="level4">
<h4 class="anchored" data-anchor-id="残差">残差</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>m1<span class="ot">&lt;-</span><span class="fu">lm</span>(sim1<span class="sc">$</span>y<span class="sc">~</span>sim1<span class="sc">$</span>x)</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>sim1<span class="ot">&lt;-</span>sim1<span class="sc">%&gt;%</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_residuals</span>(sim1)</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>sim1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>