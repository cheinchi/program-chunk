<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.124">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Blog – python学习笔记0922</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cheinchi" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">



<h1>
Table of Contents<span class="tocSkip"></span>
</h1>
<div class="toc">
<ul class="toc-item">
<li>
<span><a href="#再入门基础" data-toc-modified-id="再入门基础-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>再入门基础</a></span>
<ul class="toc-item">
<li>
<span><a href="#包的引用" data-toc-modified-id="包的引用-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>包的引用</a></span>
</li>
<li>
<span><a href="#整数" data-toc-modified-id="整数-1.2"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>整数</a></span>
</li>
<li>
<span><a href="#字符串" data-toc-modified-id="字符串-1.3"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>字符串</a></span>
</li>
<li>
<span><a href="#行话" data-toc-modified-id="行话-1.4"><span class="toc-item-num">1.4&nbsp;&nbsp;</span>行话</a></span>
</li>
<li>
<span><a href="#自省" data-toc-modified-id="自省-1.5"><span class="toc-item-num">1.5&nbsp;&nbsp;</span>自省</a></span>
</li>
<li>
<span><a href="#%run命令" data-toc-modified-id="%run命令-1.6"><span class="toc-item-num">1.6&nbsp;&nbsp;</span>%run命令</a></span>
</li>
<li>
<span><a href="#jupyter-notebook-中的神奇命令" data-toc-modified-id="jupyter-notebook-中的神奇命令-1.7"><span class="toc-item-num">1.7&nbsp;&nbsp;</span>jupyter notebook 中的神奇命令</a></span>
<ul class="toc-item">
<li>
<span><a href="#编辑模式（按esc进入）" data-toc-modified-id="编辑模式（按esc进入）-1.7.1"><span class="toc-item-num">1.7.1&nbsp;&nbsp;</span>编辑模式（按esc进入）</a></span>
</li>
<li>
<span><a href="#命令模式（按enter进入）" data-toc-modified-id="命令模式（按enter进入）-1.7.2"><span class="toc-item-num">1.7.2&nbsp;&nbsp;</span>命令模式（按enter进入）</a></span>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span><a href="#python数据结构" data-toc-modified-id="python数据结构-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>python数据结构</a></span>
<ul class="toc-item">
<li>
<span><a href="#元组" data-toc-modified-id="元组-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>元组</a></span>
</li>
<li>
<span><a href="#列表" data-toc-modified-id="列表-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>列表</a></span>
</li>
<li>
<span><a href="#集合" data-toc-modified-id="集合-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>集合</a></span>
</li>
<li>
<span><a href="#NumPy" data-toc-modified-id="NumPy-2.4"><span class="toc-item-num">2.4&nbsp;&nbsp;</span>NumPy</a></span>
</li>
<li>
<span><a href="#基本控制流" data-toc-modified-id="基本控制流-2.5"><span class="toc-item-num">2.5&nbsp;&nbsp;</span>基本控制流</a></span>
</li>
<li>
<span><a href="#复杂数据结构" data-toc-modified-id="复杂数据结构-2.6"><span class="toc-item-num">2.6&nbsp;&nbsp;</span>复杂数据结构</a></span>
</li>
<li>
<span><a href="#数组属性" data-toc-modified-id="数组属性-2.7"><span class="toc-item-num">2.7&nbsp;&nbsp;</span>数组属性</a></span>
<ul class="toc-item">
<li>
<span><a href="#NumPy数组索引" data-toc-modified-id="NumPy数组索引-2.7.1"><span class="toc-item-num">2.7.1&nbsp;&nbsp;</span>NumPy数组索引</a></span>
</li>
<li>
<span><a href="#combination" data-toc-modified-id="combination-2.7.2"><span class="toc-item-num">2.7.2&nbsp;&nbsp;</span>combination</a></span>
</li>
<li>
<span><a href="#随机森林" data-toc-modified-id="随机森林-2.7.3"><span class="toc-item-num">2.7.3&nbsp;&nbsp;</span>随机森林</a></span>
</li>
<li>
<span><a href="#处理数据" data-toc-modified-id="处理数据-2.7.4"><span class="toc-item-num">2.7.4&nbsp;&nbsp;</span>处理数据</a></span>
</li>
<li>
<span><a href="#从pandas中提取数据（后面补充）" data-toc-modified-id="从pandas中提取数据（后面补充）-2.7.5"><span class="toc-item-num">2.7.5&nbsp;&nbsp;</span>从pandas中提取数据（后面补充）</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Numpy数组的运算" data-toc-modified-id="Numpy数组的运算-2.8"><span class="toc-item-num">2.8&nbsp;&nbsp;</span>Numpy数组的运算</a></span>
<ul class="toc-item">
<li>
<span><a href="#算术运算" data-toc-modified-id="算术运算-2.8.1"><span class="toc-item-num">2.8.1&nbsp;&nbsp;</span>算术运算</a></span>
</li>
<li>
<span><a href="#逐元素运算与张量点乘运算" data-toc-modified-id="逐元素运算与张量点乘运算-2.8.2"><span class="toc-item-num">2.8.2&nbsp;&nbsp;</span>逐元素运算与张量点乘运算</a></span>
</li>
<li>
<span><a href="#广播机制(broadcasting)" data-toc-modified-id="广播机制(broadcasting)-2.8.3"><span class="toc-item-num">2.8.3&nbsp;&nbsp;</span>广播机制(broadcasting)</a></span>
</li>
<li>
<span><a href="#矩阵运算" data-toc-modified-id="矩阵运算-2.8.4"><span class="toc-item-num">2.8.4&nbsp;&nbsp;</span>矩阵运算</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#爱因斯坦求和约定" data-toc-modified-id="爱因斯坦求和约定-2.9"><span class="toc-item-num">2.9&nbsp;&nbsp;</span>爱因斯坦求和约定</a></span>
</li>
<li>
<span><a href="#NumPy的轴方向" data-toc-modified-id="NumPy的轴方向-2.10"><span class="toc-item-num">2.10&nbsp;&nbsp;</span>NumPy的轴方向</a></span>
</li>
<li>
<span><a href="#NumPy的高级索引" data-toc-modified-id="NumPy的高级索引-2.11"><span class="toc-item-num">2.11&nbsp;&nbsp;</span>NumPy的高级索引</a></span>
</li>
<li>
<span><a href="#数组的堆叠操作" data-toc-modified-id="数组的堆叠操作-2.12"><span class="toc-item-num">2.12&nbsp;&nbsp;</span>数组的堆叠操作</a></span>
</li>
<li>
<span><a href="#数组NumPy的随机数" data-toc-modified-id="数组NumPy的随机数-2.13"><span class="toc-item-num">2.13&nbsp;&nbsp;</span>数组NumPy的随机数</a></span>
</li>
<li>
<span><a href="#EDA-introduction" data-toc-modified-id="EDA-introduction-2.14"><span class="toc-item-num">2.14&nbsp;&nbsp;</span>EDA introduction</a></span>
<ul class="toc-item">
<li>
<span><a href="#异构列表" data-toc-modified-id="异构列表-2.14.1"><span class="toc-item-num">2.14.1&nbsp;&nbsp;</span>异构列表</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#维数化简" data-toc-modified-id="维数化简-2.15"><span class="toc-item-num">2.15&nbsp;&nbsp;</span>维数化简</a></span>
<ul class="toc-item">
<li>
<span><a href="#协方差矩阵" data-toc-modified-id="协方差矩阵-2.15.1"><span class="toc-item-num">2.15.1&nbsp;&nbsp;</span>协方差矩阵</a></span>
</li>
<li>
<span><a href="#主成分分析" data-toc-modified-id="主成分分析-2.15.2"><span class="toc-item-num">2.15.2&nbsp;&nbsp;</span>主成分分析</a></span>
</li>
<li>
<span><a href="#2.2.3处理大数据集" data-toc-modified-id="2.2.3处理大数据集-2.15.3"><span class="toc-item-num">2.15.3&nbsp;&nbsp;</span>2.2.3处理大数据集</a></span>
</li>
<li>
<span><a href="#3.3.3-一种用于大数据的PCA变型——Randomized-PCA" data-toc-modified-id="3.3.3-一种用于大数据的PCA变型——Randomized-PCA-2.15.4"><span class="toc-item-num">2.15.4&nbsp;&nbsp;</span>3.3.3 一种用于大数据的PCA变型——Randomized PCA</a></span>
</li>
<li>
<span><a href="#3.3.4-潜在因素分析" data-toc-modified-id="3.3.4-潜在因素分析-2.15.5"><span class="toc-item-num">2.15.5&nbsp;&nbsp;</span>3.3.4 潜在因素分析</a></span>
</li>
<li>
<span><a href="#3.3.5-线性判别分析" data-toc-modified-id="3.3.5-线性判别分析-2.15.6"><span class="toc-item-num">2.15.6&nbsp;&nbsp;</span>3.3.5 线性判别分析</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#3.4-异常检测和处理" data-toc-modified-id="3.4-异常检测和处理-2.16"><span class="toc-item-num">2.16&nbsp;&nbsp;</span>3.4 异常检测和处理</a></span>
<ul class="toc-item">
<li>
<span><a href="#3.4.1-单变量异常检测" data-toc-modified-id="3.4.1-单变量异常检测-2.16.1"><span class="toc-item-num">2.16.1&nbsp;&nbsp;</span>3.4.1 单变量异常检测</a></span>
</li>
<li>
<span><a href="#3.4.2-EllipticEnvelope" data-toc-modified-id="3.4.2-EllipticEnvelope-2.16.2"><span class="toc-item-num">2.16.2&nbsp;&nbsp;</span>3.4.2 EllipticEnvelope</a></span>
</li>
<li>
<span><a href="#3.4.3-oneclassSVM" data-toc-modified-id="3.4.3-oneclassSVM-2.16.3"><span class="toc-item-num">2.16.3&nbsp;&nbsp;</span>3.4.3 oneclassSVM</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#3.5-评分函数" data-toc-modified-id="3.5-评分函数-2.17"><span class="toc-item-num">2.17&nbsp;&nbsp;</span>3.5 评分函数</a></span>
<ul class="toc-item">
<li>
<span><a href="#3.5.1多标号分类" data-toc-modified-id="3.5.1多标号分类-2.17.1"><span class="toc-item-num">2.17.1&nbsp;&nbsp;</span>3.5.1多标号分类</a></span>
</li>
<li>
<span><a href="#二值分类" data-toc-modified-id="二值分类-2.17.2"><span class="toc-item-num">2.17.2&nbsp;&nbsp;</span>二值分类</a></span>
</li>
<li>
<span><a href="#回归" data-toc-modified-id="回归-2.17.3"><span class="toc-item-num">2.17.3&nbsp;&nbsp;</span>回归</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#交叉和验证" data-toc-modified-id="交叉和验证-2.18"><span class="toc-item-num">2.18&nbsp;&nbsp;</span>交叉和验证</a></span>
</li>
<li>
<span><a href="#交叉验证" data-toc-modified-id="交叉验证-2.19"><span class="toc-item-num">2.19&nbsp;&nbsp;</span>交叉验证</a></span>
<ul class="toc-item">
<li>
<span><a href="#3.7.1-使用交叉验证迭代器" data-toc-modified-id="3.7.1-使用交叉验证迭代器-2.19.1"><span class="toc-item-num">2.19.1&nbsp;&nbsp;</span>3.7.1 使用交叉验证迭代器</a></span>
<ul class="toc-item">
<li>
<span><a href="#KFold" data-toc-modified-id="KFold-2.19.1.1"><span class="toc-item-num">2.19.1.1&nbsp;&nbsp;</span>KFold</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#3.7.2-采样和自举方法" data-toc-modified-id="3.7.2-采样和自举方法-2.19.2"><span class="toc-item-num">2.19.2&nbsp;&nbsp;</span>3.7.2 采样和自举方法</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#超参数优化" data-toc-modified-id="超参数优化-2.20"><span class="toc-item-num">2.20&nbsp;&nbsp;</span>超参数优化</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Pandas" data-toc-modified-id="Pandas-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Pandas</a></span>
<ul class="toc-item">
<li>
<span><a href="#Series数据" data-toc-modified-id="Series数据-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Series数据</a></span>
<ul class="toc-item">
<li>
<span><a href="#Series创建" data-toc-modified-id="Series创建-3.1.1"><span class="toc-item-num">3.1.1&nbsp;&nbsp;</span>Series创建</a></span>
</li>
<li>
<span><a href="#数据访问" data-toc-modified-id="数据访问-3.1.2"><span class="toc-item-num">3.1.2&nbsp;&nbsp;</span>数据访问</a></span>
</li>
<li>
<span><a href="#Series中的向量化操作与布尔索引" data-toc-modified-id="Series中的向量化操作与布尔索引-3.1.3"><span class="toc-item-num">3.1.3&nbsp;&nbsp;</span>Series中的向量化操作与布尔索引</a></span>
</li>
<li>
<span><a href="#切片操作" data-toc-modified-id="切片操作-3.1.4"><span class="toc-item-num">3.1.4&nbsp;&nbsp;</span>切片操作</a></span>
</li>
<li>
<span><a href="#删除和添加" data-toc-modified-id="删除和添加-3.1.5"><span class="toc-item-num">3.1.5&nbsp;&nbsp;</span>删除和添加</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#DataFrame" data-toc-modified-id="DataFrame-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>DataFrame</a></span>
<ul class="toc-item">
<li>
<span><a href="#访问DataFrame中的列和行" data-toc-modified-id="访问DataFrame中的列和行-3.2.1"><span class="toc-item-num">3.2.1&nbsp;&nbsp;</span>访问DataFrame中的列和行</a></span>
</li>
<li>
<span><a href="#DataFrame中的删除操作" data-toc-modified-id="DataFrame中的删除操作-3.2.2"><span class="toc-item-num">3.2.2&nbsp;&nbsp;</span>DataFrame中的删除操作</a></span>
</li>
<li>
<span><a href="#Dataframe的轴方向" data-toc-modified-id="Dataframe的轴方向-3.2.3"><span class="toc-item-num">3.2.3&nbsp;&nbsp;</span>Dataframe的轴方向</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#基于Pandas的文件读取与分析" data-toc-modified-id="基于Pandas的文件读取与分析-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>基于Pandas的文件读取与分析</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Matplotlib-与Seaborn可视化分析" data-toc-modified-id="Matplotlib-与Seaborn可视化分析-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Matplotlib 与Seaborn可视化分析</a></span>
<ul class="toc-item">
<li>
<span><a href="#Matplotlib与图形绘制" data-toc-modified-id="Matplotlib与图形绘制-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Matplotlib与图形绘制</a></span>
</li>
<li>
<span><a href="#pyplot的高级功能" data-toc-modified-id="pyplot的高级功能-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>pyplot的高级功能</a></span>
<ul class="toc-item">
<li>
<span><a href="#添加图例和注释" data-toc-modified-id="添加图例和注释-4.2.1"><span class="toc-item-num">4.2.1&nbsp;&nbsp;</span>添加图例和注释</a></span>
</li>
<li>
<span><a href="#设置图形标题及坐标轴" data-toc-modified-id="设置图形标题及坐标轴-4.2.2"><span class="toc-item-num">4.2.2&nbsp;&nbsp;</span>设置图形标题及坐标轴</a></span>
</li>
<li>
<span><a href="#添加网格线" data-toc-modified-id="添加网格线-4.2.3"><span class="toc-item-num">4.2.3&nbsp;&nbsp;</span>添加网格线</a></span>
</li>
<li>
<span><a href="#绘制多个子图" data-toc-modified-id="绘制多个子图-4.2.4"><span class="toc-item-num">4.2.4&nbsp;&nbsp;</span>绘制多个子图</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#散点图" data-toc-modified-id="散点图-4.3"><span class="toc-item-num">4.3&nbsp;&nbsp;</span>散点图</a></span>
</li>
<li>
<span><a href="#条形图和直方图" data-toc-modified-id="条形图和直方图-4.4"><span class="toc-item-num">4.4&nbsp;&nbsp;</span>条形图和直方图</a></span>
<ul class="toc-item">
<li>
<span><a href="#并列条形图" data-toc-modified-id="并列条形图-4.4.1"><span class="toc-item-num">4.4.1&nbsp;&nbsp;</span>并列条形图</a></span>
</li>
<li>
<span><a href="#叠加条形图" data-toc-modified-id="叠加条形图-4.4.2"><span class="toc-item-num">4.4.2&nbsp;&nbsp;</span>叠加条形图</a></span>
</li>
<li>
<span><a href="#直方图" data-toc-modified-id="直方图-4.4.3"><span class="toc-item-num">4.4.3&nbsp;&nbsp;</span>直方图</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#饼图" data-toc-modified-id="饼图-4.5"><span class="toc-item-num">4.5&nbsp;&nbsp;</span>饼图</a></span>
</li>
<li>
<span><a href="#箱形图" data-toc-modified-id="箱形图-4.6"><span class="toc-item-num">4.6&nbsp;&nbsp;</span>箱形图</a></span>
</li>
<li>
<span><a href="#误差条" data-toc-modified-id="误差条-4.7"><span class="toc-item-num">4.7&nbsp;&nbsp;</span>误差条</a></span>
</li>
<li>
<span><a href="#绘制三维图形" data-toc-modified-id="绘制三维图形-4.8"><span class="toc-item-num">4.8&nbsp;&nbsp;</span>绘制三维图形</a></span>
</li>
<li>
<span><a href="#惊艳的Seaborn" data-toc-modified-id="惊艳的Seaborn-4.9"><span class="toc-item-num">4.9&nbsp;&nbsp;</span>惊艳的Seaborn</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#机器学习" data-toc-modified-id="机器学习-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>机器学习</a></span>
</li>
</ul>
</div>
<section id="python再入门" class="level1">
<h1>python再入门</h1>
<section id="再入门基础" class="level2">
<h2 class="anchored" data-anchor-id="再入门基础">再入门基础</h2>
<p>由于之前的python课没能将一些基础的操作学得透彻，只能再回炉重造一下。</p>
<section id="包的引用" class="level3">
<h3 class="anchored" data-anchor-id="包的引用">包的引用</h3>
<pre class="{python}"><code>import numpy as np
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns
import statsmodels as sm</code></pre>
</section>
<section id="整数" class="level3">
<h3 class="anchored" data-anchor-id="整数">整数</h3>
<p>conda install nb_conda ### 字符串</p>
</section>
<section id="行话" class="level3">
<h3 class="anchored" data-anchor-id="行话">行话</h3>
<p>由于你可能不太熟悉书中使用的一些有关编程和数据科学方面的常用术语，所以我在这里先给出其简单定义：</p>
<p>数据规整（Munge/Munging/Wrangling） 指的是将非结构化和（或）散乱数据处理为结构化或整洁形式的整个过程。这几个词已经悄悄成为当今数据黑客们的行话了。Munge这个词跟Lunge押韵。</p>
<p>伪码（Pseudocode） 算法或过程的“代码式”描述，而这些代码本身并不是实际有效的源代码。</p>
<p><strong>语法糖（Syntactic sugar）</strong> 这是一种编程语法，它并不会带来新的特性，但却能使代码更易读、更易写。</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {i : np.random.randn() <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>)}</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>{0: -0.7763105348145894,
 1: -1.1424814378794312,
 2: -2.2016967242006165,
 3: -0.07880407264786263,
 4: -0.013002507622730114,
 5: -0.7229686670281192,
 6: 0.38113581672081925}</code></pre>
</div>
</div>
<p>通过输入代码并按下 <code>return</code> 运行任意Python语句。当只是输入一个变量，会显示代表的对象：</p>
<p>http://localhost:8888/ 手动打开notebook</p>
</section>
<section id="自省" class="level3">
<h3 class="anchored" data-anchor-id="自省">自省</h3>
<p>在变量前后使用问号，可以显示对象的信息： 这可以作为对象的自省： 若对象是一个函数或实例方法，定义过的文档都可显示出信息；</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>b?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="run命令" class="level3">
<h3 class="anchored" data-anchor-id="run命令">%run命令</h3>
<p>可以使用<code>%run</code>命令运行所有python程序。假设有一个文件：</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x, y, z):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (x <span class="op">+</span> y) <span class="op">/</span> z</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="fl">7.5</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> f(a, b, c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#%run ipython_script_test.py</p>
</section>
<section id="jupyter-notebook-中的神奇命令" class="level3">
<h3 class="anchored" data-anchor-id="jupyter-notebook-中的神奇命令">jupyter notebook 中的神奇命令</h3>
<section id="编辑模式按esc进入" class="level4">
<h4 class="anchored" data-anchor-id="编辑模式按esc进入">编辑模式（按esc进入）</h4>
<p>Enter : 转入编辑模式</p>
<p>Shift-Enter : 运行本单元，选中下个单元</p>
<p>Ctrl-Enter : 运行本单元</p>
<p>Alt-Enter : 运行本单元，在其下插入新单元</p>
<p>Y : 单元转入代码状态</p>
<p>M :单元转入markdown状态</p>
<p>R : 单元转入raw状态</p>
</section>
<section id="命令模式按enter进入" class="level4">
<h4 class="anchored" data-anchor-id="命令模式按enter进入">命令模式（按enter进入）</h4>
<p>Tab : 代码补全或缩进</p>
<p>Shift-Tab : 提示</p>
<p>Ctrl-] : 缩进</p>
<p>Ctrl-[ : 解除缩进</p>
<p>Ctrl-A : 全选</p>
<p>Ctrl-Z : 复原</p>
<p>Ctrl-Shift-Z : 再做</p>
<p>Ctrl-Y : 再做</p>
<p>Ctrl-Home : 跳到单元开头</p>
<p>Ctrl-Up : 跳到单元开头</p>
<p>Ctrl-End : 跳到单元末尾</p>
<p>Ctrl-Down : 跳到单元末尾</p>
<p>Ctrl-Left : 跳到左边一个字首</p>
<p>Ctrl-Right : 跳到右边一个字首</p>
<p>Ctrl-Backspace : 删除前面一个字</p>
<p>Ctrl-Delete : 删除后面一个字</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="python学习笔记0922_files/figure-html/255d7a65-1-image.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">image.png</figcaption><p></p>
</figure>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span>a</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>[1, 2, 3]</code></pre>
</div>
</div>
<p>笔记：赋值也被称作绑定，我们是把一个名字绑定给一个对象。变量名有时可能被称为绑定变量。</p>
</section>
</section>
</section>
<section id="python数据结构" class="level2">
<h2 class="anchored" data-anchor-id="python数据结构">python数据结构</h2>
<section id="元组" class="level3">
<h3 class="anchored" data-anchor-id="元组">元组</h3>
<p>最为简单的创建方式——通过逗号隔开即可</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>(1, 2, 3)</code></pre>
</div>
</div>
<p>用<code>turble</code>可以将任意序列转换为元组</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">tuple</span>([<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">2</span>])</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> <span class="bu">tuple</span>([<span class="st">'foo'</span>, [<span class="dv">1</span>, <span class="dv">2</span>], <span class="va">True</span>])</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>tup</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>('foo', [1, 2], True)</code></pre>
</div>
</div>
<p>元组内创建的东西一旦创建就不可以改变了；因为元组的大小和内容不能修改，它的实例方法都很轻量。其中一个很有用的就是count（也适用于列表），它可以统计某个值得出现频率：</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tup.count([<span class="dv">1</span>,<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="列表" class="level3">
<h3 class="anchored" data-anchor-id="列表">列表</h3>
<p>与元组对比，列表的长度可变、内容可以被修改。你可以用方括号定义，或用<code>list</code>函数：</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a_list <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="va">None</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>a_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>[2, 3, 7, None]</code></pre>
</div>
</div>
<p>append可以用于添加元素,insert可以用于在特定位置插入元素（在指定位置的末尾）</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>a_list.append(<span class="dv">4</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>a_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>[2, 3, 7, None, 4]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>a_list.insert(<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>a_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>[2, 10, 3, 7, None, 4]</code></pre>
</div>
</div>
</section>
<section id="集合" class="level3">
<h3 class="anchored" data-anchor-id="集合">集合</h3>
<p>集合和字典差不多</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>([<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>{1, 2, 3}</code></pre>
</div>
</div>
<p>与字典类似，集合元素通常都是不可变的。要获得类似列表的元素，必须转换成元组：</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>my_data <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>my_set <span class="op">=</span> {<span class="bu">tuple</span>(my_data)}</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>my_set</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>{(1, 2, 3, 4)}</code></pre>
</div>
</div>
</section>
<section id="numpy" class="level3">
<h3 class="anchored" data-anchor-id="numpy">NumPy</h3>
<p>NumPy最重要的一个特点就是其支持N维数组对象（即ndarray），该对象是一个快速而灵活的大数据集容器。你可以利用这种数组对整块数据执行一些数学运算，其语法跟标量元素之间的运算一样。numpy的数组与列表有点相似，但仍然不同的是要纯洁一点，只能是一个数组类型。</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.random.randn(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>array([[ 0.46515646,  1.89109622, -1.13701716],
       [-0.78530201,  1.12068646, -1.47508807]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>data[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array([-0.78530201,  1.12068646, -1.47508807])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>array([[-0.78530201,  1.12068646, -1.47508807]])</code></pre>
</div>
</div>
<p>因为data2是列表的列表，NumPy数组arr2的两个维度的shape是从data2引入的。可以用属性ndim和shape验证：</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>arr2 <span class="op">=</span> np.array(data2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>arr2.ndim</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>arr2.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>(2, 4)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>np.zeros(<span class="dv">10</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>np.zeros((<span class="dv">3</span>,<span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>array([[0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.]])</code></pre>
</div>
</div>
<p>每一个数组都有一个dtype属性，用于描述数组的数据类型。 np.array会自动推断数据类型。数据类型被存储在一个特殊的元数据dtype中。</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>data1 <span class="op">=</span> [<span class="dv">6</span>,<span class="fl">8.5</span>,<span class="dv">9</span>,<span class="dv">0</span>]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>arr1 <span class="op">=</span> np.array(data1)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>arr1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>array([6. , 8.5, 9. , 0. ])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>arr1.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>dtype('float64')</code></pre>
</div>
</div>
<p><code>arrage</code>方法根据start与stop指定的范围及step设定的步长来生成一个ndarray对象，start为起时值。</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>arange(start,stop,step,dtype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>arange()</code>根据start与stop指定的范围设定的步长范围，生成一个ndarray对象。</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>arr3 <span class="op">=</span> np.arange(<span class="dv">10</span>)<span class="co"># generating 0-9 ndarray array</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0 1 2 3 4 5 6 7 8 9]</code></pre>
</div>
</div>
<p><code>print</code>的时候的样子是不同于直接输出的</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>arr3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</code></pre>
</div>
</div>
<ul>
<li><p>与<code>range()</code>函数较为相像，但<code>range()</code>生成的只能用于迭代。（属于一个迭代器）</p></li>
<li><p><code>np.range()</code>的数据是左开右闭的，最后一个数取不到。当然可以在设置option中指定<code>endpoint=False</code></p></li>
</ul>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>np.ones_like(arr3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>np.empty_like(arr3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>position <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>walk <span class="op">=</span> [position]</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>steps <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(steps):</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="dv">1</span> <span class="cf">if</span> random.randint(<span class="dv">0</span>, <span class="dv">1</span>) <span class="cf">else</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    position <span class="op">+=</span> step</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    walk.append(position)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-scrolled="true" data-execution_count="52">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>plt.plot(walk[:<span class="dv">100</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">abs</span>(<span class="op">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>2</code></pre>
</div>
</div>
</section>
<section id="基本控制流" class="level3">
<h3 class="anchored" data-anchor-id="基本控制流">基本控制流</h3>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>grade <span class="op">=</span> <span class="dv">95</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">90</span>:</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'A'</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">80</span>:</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'B'</span>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">70</span>:</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'C'</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> grade <span class="op">&gt;</span><span class="dv">60</span>:</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">'D'</span>)</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">'F'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A</code></pre>
</div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>grade <span class="op">=</span> <span class="dv">95</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">90</span>:</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'A'</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">80</span>:</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'B'</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> grade <span class="op">&gt;</span> <span class="dv">70</span>:</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'C'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A
B
C</code></pre>
</div>
</div>
</section>
<section id="复杂数据结构" class="level3">
<h3 class="anchored" data-anchor-id="复杂数据结构">复杂数据结构</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#### 1.5.1 list列表</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>l_1<span class="op">=</span>[]</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>l_2<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="va">True</span>]</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(l_1)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(l_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[]
[1, 2, 0, 'a', 'b', True]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>ar1<span class="op">=</span>np.array([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>ar2<span class="op">=</span>np.array([<span class="dv">0</span>,<span class="dv">1</span>,<span class="st">'2'</span>,<span class="dv">3</span>])</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>ar3<span class="op">=</span>np.array([<span class="fl">1.</span>,<span class="fl">2.</span>,<span class="fl">3.</span>,<span class="fl">4.</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>ar1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>array([0, 1, 2, 3])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>ar2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>array(['0', '1', '2', '3'], dtype='&lt;U21')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar3.dtype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>float64</code></pre>
</div>
</div>
<p>精度的不同，n.rate会进行转换，复杂性增大</p>
<ul>
<li>全是浮点数，全让他为整型；仍然是向下取整</li>
<li>numpy的储存方式，是object对象，元素都是一个list</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>ts1 tensorflow 深度学习框架，推出一个以tensorprosing</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>n层的数组，tensor一维是一个list，二维就是一个矩阵；</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>这个方法就可生成</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>ar0<span class="op">=</span>np.zeros(<span class="dv">10</span>,dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>ar1<span class="op">=</span>np.empty(<span class="dv">10</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>ar2<span class="op">=</span>np.ones((<span class="dv">2</span>,<span class="dv">3</span>),dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>ar3<span class="op">=</span>np.full((<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,),<span class="fl">2.33</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>ar4<span class="op">=</span>np.indentity(<span class="dv">5</span>)<span class="co">#只要一个维度参数，生成单位矩</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>i1<span class="op">=</span>np.eye(<span class="dv">5</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>i2<span class="op">=</span>np.eye(<span class="dv">5</span>,<span class="dv">7</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>i3<span class="op">=</span>np.eye(<span class="dv">5</span>,<span class="dv">7</span>,k<span class="op">=</span><span class="dv">2</span>)<span class="co">#k的值，表示值的移动方向</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>i1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>array([[1., 0., 0., 0., 0.],
       [0., 1., 0., 0., 0.],
       [0., 0., 1., 0., 0.],
       [0., 0., 0., 1., 0.],
       [0., 0., 0., 0., 1.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>i2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>array([[1., 0., 0., 0., 0., 0., 0.],
       [0., 1., 0., 0., 0., 0., 0.],
       [0., 0., 1., 0., 0., 0., 0.],
       [0., 0., 0., 1., 0., 0., 0.],
       [0., 0., 0., 0., 1., 0., 0.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>i3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>array([[0., 0., 1., 0., 0., 0., 0.],
       [0., 0., 0., 1., 0., 0., 0.],
       [0., 0., 0., 0., 1., 0., 0.],
       [0., 0., 0., 0., 0., 1., 0.],
       [0., 0., 0., 0., 0., 0., 1.]])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">#### 区间生成</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>ar5<span class="op">=</span>np.arange(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">3</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>ar6<span class="op">=</span>np.linspace(<span class="dv">10</span>,<span class="dv">30</span>,<span class="dv">7</span>)<span class="co">#划分为7个区间</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>ar5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>array([ 0,  3,  6,  9, 12, 15, 18])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>ar6 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>array([10.        , 13.33333333, 16.66666667, 20.        , 23.33333333,
       26.66666667, 30.        ])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">#### randomization</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>ar7<span class="op">=</span>np.random.random((<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>ar8<span class="op">=</span>np.random.normal(<span class="dv">0</span>,<span class="dv">1</span>,(<span class="dv">4</span>,<span class="dv">4</span>))</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>ar9<span class="op">=</span>np.random.randint(<span class="dv">0</span>,<span class="dv">9</span>,(<span class="dv">3</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>ar7,ar8,ar9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>(array([[0.32451575, 0.86099969, 0.00883096],
        [0.29874319, 0.38364274, 0.37974496],
        [0.74177402, 0.00796406, 0.53902434],
        [0.47040058, 0.84744851, 0.64012516]]),
 array([[ 0.44292104, -0.41489517,  1.53924554, -0.66693073],
        [ 0.10580937, -0.5669722 ,  1.54713063, -1.03933949],
        [-0.09471968,  0.53762742,  0.38224316, -0.90496893],
        [ 0.56564553,  1.65940541, -0.38884517,  0.67499766]]),
 array([[7, 8, 6],
        [3, 4, 5],
        [2, 6, 6]]))</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">0</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>ra1<span class="op">=</span>np.random.random((<span class="dv">3</span>,<span class="dv">4</span>))</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># real random and fake random(模拟出来的)seed is what we from</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co"># seed(x),x is the number that random number is repitable </span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 在另外一行，连续的两个矩阵，是不同的；保证了代码的可复制性</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="数组属性" class="level3">
<h3 class="anchored" data-anchor-id="数组属性">数组属性</h3>
<p>维度(dimension)都是由ndim属性来描述的。</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>ar1<span class="op">=</span>np.ones((<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"the ar1's dim is"</span>,ar1.ndim,<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>,ar1.shape,<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>,ar1.size)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(ar1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>the ar1's dim is 3 
 (3, 4, 5) 
 60
3</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar2.dtype <span class="op">==</span> ar3.dtype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
</div>
<p>64bit 8byte\ 100M byte 10M bit</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar1.size)<span class="co"># 可以知道哪找bug</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>60</code></pre>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#function:astype</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co">#ar1=ar1.astype(np.float)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>对于N维数组而言，还有一个重要的属性是shape（数组形状），形状主要用于表征数组每个维度的数量，一维数组的形状就是它的长度一维也称为1D张量(1D tensor)</p>
<section id="numpy数组索引" class="level4">
<h4 class="anchored" data-anchor-id="numpy数组索引">NumPy数组索引</h4>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>ar1 <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>ar1[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>ar <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>],[<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>ar  <span class="co">#python的索引都是从(0,0)开始。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">0</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>3</code></pre>
</div>
</div>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">0</span>,:]<span class="co">#choose whole raw</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ‘：’将所有数选下来</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'ar' is not defined</code></pre>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>array([1, 2, 3, 4])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">#改数据类型必须符合原来的数据类型</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">0</span>,<span class="dv">2</span>]<span class="op">=</span><span class="fl">5.14</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>array([[ 1,  2,  5,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">#切片/花式索引</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">3</span>::<span class="dv">3</span>] <span class="co">#第一个为开始，第二个为步长</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>array([], shape=(0, 4), dtype=int64)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">5</span>:<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>array([], shape=(0, 4), dtype=int64)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>ar[:<span class="dv">10</span>:<span class="op">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array([], shape=(0, 4), dtype=int64)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>ar[:<span class="dv">2</span>,<span class="dv">1</span>:<span class="dv">2</span>]</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co">#表示行全取</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>array([[2],
       [6]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>ar[::<span class="op">-</span><span class="dv">1</span>,::<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>array([[ 9, 11],
       [ 5,  7],
       [ 1,  5]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>ar[[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>],[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]]</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="co">#按照对应索引来取之后仍然放在一个array之中</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([ 2,  7, 12])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">#[start=0:end=length:slice step]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>ar,ar[<span class="dv">1</span>::],ar[<span class="dv">1</span>::<span class="dv">2</span>],ar[::<span class="dv">2</span>],ar[:<span class="dv">1</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>(array([[ 1,  2,  5,  4],
        [ 5,  6,  7,  8],
        [ 9, 10, 11, 12]]),
 array([[ 5,  6,  7,  8],
        [ 9, 10, 11, 12]]),
 array([[5, 6, 7, 8]]),
 array([[ 1,  2,  5,  4],
        [ 9, 10, 11, 12]]),
 array([[1, 2, 5, 4]]))</code></pre>
</div>
</div>
<p>取出一列，当最终出来的结果和一行类似； 其实这本身就是函数的概念；</p>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>sub_ar<span class="op">=</span>ar[<span class="dv">1</span>:,:<span class="dv">2</span>]</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>sub_ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>array([[ 5,  6],
       [ 9, 10]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>sub_ar_c<span class="op">=</span>ar[<span class="dv">1</span>:,:<span class="dv">2</span>].copy() <span class="co">#father doesnot be effected</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>sub_ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>array([[ 5,  6],
       [ 9, 10]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>ar <span class="op">&gt;</span> <span class="dv">0</span> <span class="co">#return bool matrix</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>ar <span class="op">%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span> <span class="co">#可将布尔值用于索引上</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>array([[False,  True, False,  True],
       [False,  True, False,  True],
       [False,  True, False,  True]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>ar2<span class="op">=</span>ar.reshape((<span class="dv">1</span>,<span class="dv">12</span>))</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>ar3<span class="op">=</span>ar.reshape((<span class="dv">12</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>ar2,ar3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>(array([[ 1,  2,  5,  4,  5,  6,  7,  8,  9, 10, 11, 12]]),
 array([[ 1],
        [ 2],
        [ 5],
        [ 4],
        [ 5],
        [ 6],
        [ 7],
        [ 8],
        [ 9],
        [10],
        [11],
        [12]]))</code></pre>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(ar2))</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(ar1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1
3</code></pre>
</div>
</div>
</section>
<section id="combination" class="level4">
<h4 class="anchored" data-anchor-id="combination">combination</h4>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>ar_c1<span class="op">=</span>np.concatenate([ar2,ar3.reshape(<span class="dv">1</span>,<span class="dv">12</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>ar_c1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>array([[ 1,  2,  5,  4,  5,  6,  7,  8,  9, 10, 11, 12],
       [ 1,  2,  5,  4,  5,  6,  7,  8,  9, 10, 11, 12]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>ll<span class="op">=</span><span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">10000</span>))</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>time ll<span class="op">=</span><span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x:x<span class="op">*</span><span class="dv">2</span>,ll))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 1.08 ms, sys: 899 µs, total: 1.98 ms
Wall time: 3.92 ms</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="bu">map</span>(<span class="kw">lambda</span> x:x<span class="op">*</span><span class="dv">2</span>,ll)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>&lt;map at 0x7fa151002c70&gt;</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="bu">range</span>(<span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>range(0, 1000)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">100</span>))</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a> <span class="co">#range 到只有99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>[1,
 2,
 3,
 4,
 5,
 6,
 7,
 8,
 9,
 10,
 11,
 12,
 13,
 14,
 15,
 16,
 17,
 18,
 19,
 20,
 21,
 22,
 23,
 24,
 25,
 26,
 27,
 28,
 29,
 30,
 31,
 32,
 33,
 34,
 35,
 36,
 37,
 38,
 39,
 40,
 41,
 42,
 43,
 44,
 45,
 46,
 47,
 48,
 49,
 50,
 51,
 52,
 53,
 54,
 55,
 56,
 57,
 58,
 59,
 60,
 61,
 62,
 63,
 64,
 65,
 66,
 67,
 68,
 69,
 70,
 71,
 72,
 73,
 74,
 75,
 76,
 77,
 78,
 79,
 80,
 81,
 82,
 83,
 84,
 85,
 86,
 87,
 88,
 89,
 90,
 91,
 92,
 93,
 94,
 95,
 96,
 97,
 98,
 99]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>ar <span class="op">=</span> np.array(<span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">13</span>)).reshape((<span class="dv">3</span>,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">3</span>,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(3, 4)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>ar<span class="op">*</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([[ 2,  4,  6,  8],
       [10, 12, 14, 16],
       [18, 20, 22, 24]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>obj1<span class="op">=</span><span class="bu">range</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>obj1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>range(0, 10)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>obj1[<span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>9</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>obj1?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>timeit(obj1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>28.4 ns ± 0.0223 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random </span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>random.randint(<span class="dv">0</span>,<span class="dv">100</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>71</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> datasets</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_selection <span class="im">import</span> SelectKBest,f_regression</span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVR</span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>boston_dataset<span class="op">=</span>datasets.load_boston()</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>x_full<span class="op">=</span>boston_dataset.data</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>boston_dataset.target</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x_full.shape)</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(506, 13)
(506,)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/a182501/opt/anaconda3/lib/python3.8/site-packages/sklearn/utils/deprecation.py:87: FutureWarning: Function load_boston is deprecated; `load_boston` is deprecated in 1.0 and will be removed in 1.2.

    The Boston housing prices dataset has an ethical problem. You can refer to
    the documentation of this function for further details.

    The scikit-learn maintainers therefore strongly discourage the use of this
    dataset unless the purpose of the code is to study and educate about
    ethical issues in data science and machine learning.

    In this special case, you can fetch the dataset from the original
    source::

        import pandas as pd
        import numpy as np


        data_url = "http://lib.stat.cmu.edu/datasets/boston"
        raw_df = pd.read_csv(data_url, sep="\s+", skiprows=22, header=None)
        data = np.hstack([raw_df.values[::2, :], raw_df.values[1::2, :2]])
        target = raw_df.values[1::2, 2]

    Alternative datasets include the California housing dataset (i.e.
    :func:`~sklearn.datasets.fetch_california_housing`) and the Ames housing
    dataset. You can load the datasets as follows::

        from sklearn.datasets import fetch_california_housing
        housing = fetch_california_housing()

    for the California housing dataset and::

        from sklearn.datasets import fetch_openml
        housing = fetch_openml(name="house_prices", as_frame=True)

    for the Ames housing dataset.
    
  warnings.warn(msg, category=FutureWarning)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>selector <span class="op">=</span> SelectKBest(f_regression, k<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>selector.fit(x_full,y)</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>X<span class="op">=</span>x_full[:,selector.get_support()]</span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(X.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(506, 1)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,y,color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-114-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>iris<span class="op">=</span>datasets.load_iris()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(iris.data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[5.1 3.5 1.4 0.2]
 [4.9 3.  1.4 0.2]
 [4.7 3.2 1.3 0.2]
 [4.6 3.1 1.5 0.2]
 [5.  3.6 1.4 0.2]
 [5.4 3.9 1.7 0.4]
 [4.6 3.4 1.4 0.3]
 [5.  3.4 1.5 0.2]
 [4.4 2.9 1.4 0.2]
 [4.9 3.1 1.5 0.1]
 [5.4 3.7 1.5 0.2]
 [4.8 3.4 1.6 0.2]
 [4.8 3.  1.4 0.1]
 [4.3 3.  1.1 0.1]
 [5.8 4.  1.2 0.2]
 [5.7 4.4 1.5 0.4]
 [5.4 3.9 1.3 0.4]
 [5.1 3.5 1.4 0.3]
 [5.7 3.8 1.7 0.3]
 [5.1 3.8 1.5 0.3]
 [5.4 3.4 1.7 0.2]
 [5.1 3.7 1.5 0.4]
 [4.6 3.6 1.  0.2]
 [5.1 3.3 1.7 0.5]
 [4.8 3.4 1.9 0.2]
 [5.  3.  1.6 0.2]
 [5.  3.4 1.6 0.4]
 [5.2 3.5 1.5 0.2]
 [5.2 3.4 1.4 0.2]
 [4.7 3.2 1.6 0.2]
 [4.8 3.1 1.6 0.2]
 [5.4 3.4 1.5 0.4]
 [5.2 4.1 1.5 0.1]
 [5.5 4.2 1.4 0.2]
 [4.9 3.1 1.5 0.2]
 [5.  3.2 1.2 0.2]
 [5.5 3.5 1.3 0.2]
 [4.9 3.6 1.4 0.1]
 [4.4 3.  1.3 0.2]
 [5.1 3.4 1.5 0.2]
 [5.  3.5 1.3 0.3]
 [4.5 2.3 1.3 0.3]
 [4.4 3.2 1.3 0.2]
 [5.  3.5 1.6 0.6]
 [5.1 3.8 1.9 0.4]
 [4.8 3.  1.4 0.3]
 [5.1 3.8 1.6 0.2]
 [4.6 3.2 1.4 0.2]
 [5.3 3.7 1.5 0.2]
 [5.  3.3 1.4 0.2]
 [7.  3.2 4.7 1.4]
 [6.4 3.2 4.5 1.5]
 [6.9 3.1 4.9 1.5]
 [5.5 2.3 4.  1.3]
 [6.5 2.8 4.6 1.5]
 [5.7 2.8 4.5 1.3]
 [6.3 3.3 4.7 1.6]
 [4.9 2.4 3.3 1. ]
 [6.6 2.9 4.6 1.3]
 [5.2 2.7 3.9 1.4]
 [5.  2.  3.5 1. ]
 [5.9 3.  4.2 1.5]
 [6.  2.2 4.  1. ]
 [6.1 2.9 4.7 1.4]
 [5.6 2.9 3.6 1.3]
 [6.7 3.1 4.4 1.4]
 [5.6 3.  4.5 1.5]
 [5.8 2.7 4.1 1. ]
 [6.2 2.2 4.5 1.5]
 [5.6 2.5 3.9 1.1]
 [5.9 3.2 4.8 1.8]
 [6.1 2.8 4.  1.3]
 [6.3 2.5 4.9 1.5]
 [6.1 2.8 4.7 1.2]
 [6.4 2.9 4.3 1.3]
 [6.6 3.  4.4 1.4]
 [6.8 2.8 4.8 1.4]
 [6.7 3.  5.  1.7]
 [6.  2.9 4.5 1.5]
 [5.7 2.6 3.5 1. ]
 [5.5 2.4 3.8 1.1]
 [5.5 2.4 3.7 1. ]
 [5.8 2.7 3.9 1.2]
 [6.  2.7 5.1 1.6]
 [5.4 3.  4.5 1.5]
 [6.  3.4 4.5 1.6]
 [6.7 3.1 4.7 1.5]
 [6.3 2.3 4.4 1.3]
 [5.6 3.  4.1 1.3]
 [5.5 2.5 4.  1.3]
 [5.5 2.6 4.4 1.2]
 [6.1 3.  4.6 1.4]
 [5.8 2.6 4.  1.2]
 [5.  2.3 3.3 1. ]
 [5.6 2.7 4.2 1.3]
 [5.7 3.  4.2 1.2]
 [5.7 2.9 4.2 1.3]
 [6.2 2.9 4.3 1.3]
 [5.1 2.5 3.  1.1]
 [5.7 2.8 4.1 1.3]
 [6.3 3.3 6.  2.5]
 [5.8 2.7 5.1 1.9]
 [7.1 3.  5.9 2.1]
 [6.3 2.9 5.6 1.8]
 [6.5 3.  5.8 2.2]
 [7.6 3.  6.6 2.1]
 [4.9 2.5 4.5 1.7]
 [7.3 2.9 6.3 1.8]
 [6.7 2.5 5.8 1.8]
 [7.2 3.6 6.1 2.5]
 [6.5 3.2 5.1 2. ]
 [6.4 2.7 5.3 1.9]
 [6.8 3.  5.5 2.1]
 [5.7 2.5 5.  2. ]
 [5.8 2.8 5.1 2.4]
 [6.4 3.2 5.3 2.3]
 [6.5 3.  5.5 1.8]
 [7.7 3.8 6.7 2.2]
 [7.7 2.6 6.9 2.3]
 [6.  2.2 5.  1.5]
 [6.9 3.2 5.7 2.3]
 [5.6 2.8 4.9 2. ]
 [7.7 2.8 6.7 2. ]
 [6.3 2.7 4.9 1.8]
 [6.7 3.3 5.7 2.1]
 [7.2 3.2 6.  1.8]
 [6.2 2.8 4.8 1.8]
 [6.1 3.  4.9 1.8]
 [6.4 2.8 5.6 2.1]
 [7.2 3.  5.8 1.6]
 [7.4 2.8 6.1 1.9]
 [7.9 3.8 6.4 2. ]
 [6.4 2.8 5.6 2.2]
 [6.3 2.8 5.1 1.5]
 [6.1 2.6 5.6 1.4]
 [7.7 3.  6.1 2.3]
 [6.3 3.4 5.6 2.4]
 [6.4 3.1 5.5 1.8]
 [6.  3.  4.8 1.8]
 [6.9 3.1 5.4 2.1]
 [6.7 3.1 5.6 2.4]
 [6.9 3.1 5.1 2.3]
 [5.8 2.7 5.1 1.9]
 [6.8 3.2 5.9 2.3]
 [6.7 3.3 5.7 2.5]
 [6.7 3.  5.2 2.3]
 [6.3 2.5 5.  1.9]
 [6.5 3.  5.2 2. ]
 [6.2 3.4 5.4 2.3]
 [5.9 3.  5.1 1.8]]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib2</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>url<span class="op">=</span> <span class="st">"http://aima.cs.berkeley.edu/data/iris.csv"</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>set1<span class="op">=</span>urllib2.Request(url)</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>iris_p<span class="op">=</span>urllib2.urlopen(set1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>ModuleNotFoundError: No module named 'urllib2'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,y)</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-119-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> make_pipeline</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>regressor<span class="op">=</span>LinearRegression(normalize<span class="op">=</span><span class="va">True</span>)<span class="co">#线性最小二乘估计来做，normalize</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>regressor.fit(X,y)</span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,y,color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>plt.plot(X,regressor.predict(X),color<span class="op">=</span><span class="st">'blue'</span>,linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/a182501/opt/anaconda3/lib/python3.8/site-packages/sklearn/linear_model/_base.py:141: FutureWarning: 'normalize' was deprecated in version 1.0 and will be removed in 1.2.
If you wish to scale the data, use Pipeline with a StandardScaler in a preprocessing stage. To reproduce the previous behavior:

from sklearn.pipeline import make_pipeline

model = make_pipeline(StandardScaler(with_mean=False), LinearRegression())

If you wish to pass a sample_weight parameter, you need to pass it as a fit parameter to each step of the pipeline as follows:

kwargs = {s[0] + '__sample_weight': sample_weight for s in model.steps}
model.fit(X, y, **kwargs)


  warnings.warn(</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-120-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>regressor<span class="op">=</span>SVR() <span class="co">#SVR是指支持向量机的方式来实现</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>regressor.fit(X,y)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,y,color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,regressor.predict(X),color<span class="op">=</span><span class="st">'blue'</span>,linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-121-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="随机森林" class="level4">
<h4 class="anchored" data-anchor-id="随机森林">随机森林</h4>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>regressor<span class="op">=</span>RandomForestRegressor()</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>regressor.fit(X,y)</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,y,color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(X,regressor.predict(X),color<span class="op">=</span><span class="st">'blue'</span>,linewidth<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>&lt;matplotlib.collections.PathCollection at 0x7fd0bc78ffd0&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-122-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>?RandomForestRegressor</p>
<p>A random forest is a meta estimator that fits a number of classifying decision trees on various sub-samples of the dataset and uses averaging to improve the predictive accuracy and control over-fitting. The sub-sample size is controlled with the <code>max_samples</code> parameter if <code>bootstrap=True</code> (default), otherwise the whole dataset is used to build each tree.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(regressor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>sklearn.svm._classes.SVR</code></pre>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="数据改写" class="level1">
<h1>数据改写</h1>
<section id="处理数据" class="level4">
<h4 class="anchored" data-anchor-id="处理数据">处理数据</h4>
<p>利用<code>numpy</code>函数生成数组</p>
<p>需要由一个特定数字序列（0、1、序数和特定统计分布）组成的向量或矩阵，<code>Numpy</code>函数提供了很多的选择。</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>ordinal_values <span class="op">=</span> np.arange(<span class="dv">9</span>).reshape(<span class="dv">3</span>,<span class="dv">3</span>)<span class="co">#函数的一重重叠加</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>ordinal_values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">9</span>)[::<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>array([8, 7, 6, 5, 4, 3, 2, 1, 0])</code></pre>
</div>
</div>
<p>从列表到数组</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>list_of_ints<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>array_1<span class="op">=</span>np.array(list_of_ints)</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>array_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>array([1, 2, 3])</code></pre>
</div>
</div>
<p>生成随机整数的数组（数组无序且可能重复），可以使用下面命令：</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>np.random.randint(low<span class="op">=</span><span class="dv">1</span>,high<span class="op">=</span><span class="dv">10</span>,size<span class="op">=</span>(<span class="dv">3</span>,<span class="dv">3</span>)).reshape(<span class="dv">3</span>,<span class="dv">3</span>) <span class="co">#low和high确定的是上下界</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([[8, 8, 7],
       [7, 7, 8],
       [8, 3, 4]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>np.zeros((<span class="dv">3</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>array([[0., 0., 0.],
       [0., 0., 0.],
       [0., 0., 0.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>np.ones((<span class="dv">3</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>array([[1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>np.eye(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>array([[1., 0., 0.],
       [0., 1., 0.],
       [0., 0., 1.]])</code></pre>
</div>
</div>
</section>
<section id="从pandas中提取数据后面补充" class="level4">
<h4 class="anchored" data-anchor-id="从pandas中提取数据后面补充">从pandas中提取数据（后面补充）</h4>
<p>与<code>pandas</code>交互是可以很方便的，事实上，<code>pandas</code>是建立在Numpy上；</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="numpy数组的运算" class="level3">
<h3 class="anchored" data-anchor-id="numpy数组的运算">Numpy数组的运算</h3>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>list1 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>list2 <span class="op">=</span> [<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>list3 <span class="op">=</span> [i<span class="op">+</span>j <span class="cf">for</span> i <span class="kw">in</span> list1 <span class="cf">for</span> j <span class="kw">in</span> list2] <span class="co">#这个做法是错误的，只会形成两个嵌套循环，形成的数据维度就是1*（i*j）</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>list3 <span class="op">=</span> [i<span class="op">+</span>j <span class="cf">for</span> i,j <span class="kw">in</span> <span class="bu">zip</span>(list1,list2)] </span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(list3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[12, 14, 16, 18, 20, 22, 24, 26, 28]</code></pre>
</div>
</div>
<p>而对于numpy，先需要将列表转化为数组，而这个就直接可以用加号(<code>+</code>)</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="op">=</span> np.array(list1)</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>l2 <span class="op">=</span> np.array(list2)</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>list_sum <span class="op">=</span> l1<span class="op">+</span>l2</span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(list_sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[12 14 16 18 20 22 24 26 28]</code></pre>
</div>
</div>
<section id="算术运算" class="level4">
<h4 class="anchored" data-anchor-id="算术运算">算术运算</h4>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">5</span>).reshape(<span class="dv">1</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>array([[4, 5, 6, 7, 8]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>array([[16, 25, 36, 49, 64]])</code></pre>
</div>
</div>
<p>还有很多的统计函数: - <code>sum()</code> - <code>min()</code> - <code>max()</code> - <code>mean()</code> - <code>std()</code></p>
<p>同时还有一些数学函数: - <code>sin()</code> - <code>cos()</code></p>
</section>
<section id="逐元素运算与张量点乘运算" class="level4">
<h4 class="anchored" data-anchor-id="逐元素运算与张量点乘运算">逐元素运算与张量点乘运算</h4>
<p>Numpy都是一个类矩阵的形式，因此NumPy中的数组在进行运算时候，都是基于基础算法库BLAS实现的。</p>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>],[<span class="dv">3</span>,<span class="dv">4</span>]])</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>array([[1, 2],
       [3, 4]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">0</span>][<span class="dv">0</span>]<span class="co">#数组元素的提取,a[0]=array([1,2])，进一步提取a[0][0]=1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>1</code></pre>
</div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.ones([<span class="dv">2</span>,<span class="dv">2</span>])</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>array([[1., 1.],
       [1., 1.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>array([[2., 3.],
       [4., 5.]])</code></pre>
</div>
</div>
<p>这时元素对元素原则，即数组的元素与元素位置对应相加。</p>
<p>数学意义上的矩阵乘法并非如此，不同形状的矩阵可以进行乘法运算。只要满足第一个矩阵的列与第二个矩阵的行数相同。</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">9</span>).reshape(<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.ones(shape<span class="op">=</span>(<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([[1., 1.],
       [1., 1.],
       [1., 1.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>np.dot(a,b) <span class="co">#a在前，b在后形成矩阵乘法。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>array([[ 3.,  3.],
       [12., 12.],
       [21., 21.]])</code></pre>
</div>
</div>
<p>转化为矩阵</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>np.mat(a)</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>matrix([[0, 1, 2],
        [3, 4, 5],
        [6, 7, 8]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span>np.mat(b)</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>matrix([[1., 1.],
        [1., 1.],
        [1., 1.]])</code></pre>
</div>
</div>
<p><code>np.mat()</code> 将非矩阵的数据类型转换为矩阵输出</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span>b  <span class="co">#satisfy multiplying directly</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>matrix([[ 3.,  3.],
        [12., 12.],
        [21., 21.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.mat( np.random.random((<span class="dv">3</span>,<span class="dv">3</span>)) )  <span class="co">#(3,3) is the dimentions of data, always using tuple to describ</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>a  <span class="co">#we also use set.seed(n) to control the random rescult</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>matrix([[0.44066736, 0.3240484 , 0.49600288],
        [0.80720248, 0.17436192, 0.26832685],
        [0.70573986, 0.99544159, 0.35662974]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>a.I  <span class="co">#返回矩阵a的逆矩阵</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>matrix([[-9.51826028e-01,  1.75657071e+00,  2.16854548e-03],
        [-4.57533034e-01, -8.95961859e-01,  1.31045809e+00],
        [ 3.16067017e+00, -9.75253143e-01, -8.58074563e-01]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>a.T   <span class="co">#这些都是基于matrix的函数的一些操作</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>matrix([[0.44066736, 0.80720248, 0.70573986],
        [0.3240484 , 0.17436192, 0.99544159],
        [0.49600288, 0.26832685, 0.35662974]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>a.A  <span class="co">#返回对应的二维数组</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([[0.44066736, 0.3240484 , 0.49600288],
       [0.80720248, 0.17436192, 0.26832685],
       [0.70573986, 0.99544159, 0.35662974]])</code></pre>
</div>
</div>
</section>
<section id="广播机制broadcasting" class="level4">
<h4 class="anchored" data-anchor-id="广播机制broadcasting">广播机制(broadcasting)</h4>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>np.arange(<span class="dv">5</span>).reshape(<span class="dv">1</span>,<span class="dv">5</span>)<span class="op">+</span><span class="dv">1</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span>np.arange(<span class="dv">5</span>).reshape(<span class="dv">5</span>,<span class="dv">1</span>)<span class="op">+</span><span class="dv">1</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>array([[ 1,  2,  3,  4,  5],
       [ 2,  4,  6,  8, 10],
       [ 3,  6,  9, 12, 15],
       [ 4,  8, 12, 16, 20],
       [ 5, 10, 15, 20, 25]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co">#above is equviliant</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>a2<span class="op">=</span>np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]<span class="op">*</span><span class="dv">5</span>).reshape(<span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>b2<span class="op">=</span>a2.T</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>a2<span class="op">*</span>b2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>array([[ 1,  2,  3,  4,  5],
       [ 2,  4,  6,  8, 10],
       [ 3,  6,  9, 12, 15],
       [ 4,  8, 12, 16, 20],
       [ 5, 10, 15, 20, 25]])</code></pre>
</div>
</div>
</section>
<section id="矩阵运算" class="level4">
<h4 class="anchored" data-anchor-id="矩阵运算">矩阵运算</h4>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>M<span class="op">=</span>np.arange(<span class="dv">5</span><span class="op">*</span><span class="dv">5</span>,dtype<span class="op">=</span><span class="bu">float</span>).reshape(<span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>M</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array([[ 0.,  1.,  2.,  3.,  4.],
       [ 5.,  6.,  7.,  8.,  9.],
       [10., 11., 12., 13., 14.],
       [15., 16., 17., 18., 19.],
       [20., 21., 22., 23., 24.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>coefs<span class="op">=</span>np.array([<span class="fl">1.</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>])</span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>coefs_matrix <span class="op">=</span>np.column_stack((coefs,coefs[::<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(coefs_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1.  0.5]
 [0.5 0.5]
 [0.5 0.5]
 [0.5 0.5]
 [0.5 1. ]]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>np.dot(M,coefs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>array([ 5., 20., 35., 50., 65.])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>np.dot(coefs,M)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>array([25., 28., 31., 34., 37.])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>np.dot(M,coefs_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>array([[ 5.,  7.],
       [20., 22.],
       [35., 37.],
       [50., 52.],
       [65., 67.]])</code></pre>
</div>
</div>
</section>
</section>
<section id="爱因斯坦求和约定" class="level3">
<h3 class="anchored" data-anchor-id="爱因斯坦求和约定">爱因斯坦求和约定</h3>
<p><code>einsum()</code>不是一个简单的求和运算，而是一个高效的符号计算规则。</p>
<p>一个例子：点乘公式 <span class="math display">\[
s=\sum_iv_iw_i
\]</span> 但小爱认为这个太繁琐，因此重新发明了一个符号计算公式： <span class="math display">\[
s=v_iw^i
\]</span></p>
<p>仅仅用一个<code>einsum()</code>就可以实现求和、求外积、矩阵乘法等过程。 <code>sum()</code>和<code>mat()</code>以及<code>trace()</code>就会显得非常繁琐</p>
<p><code>einsum()</code>理论上可支持任意多的参数。 - 不同的输入变量之间的格式要用逗号隔开； - 输入格式字符和输出格式字符要用箭头分隔开；</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>rescult <span class="op">=</span> np.einsum(<span class="st">'ijk,ijl-&gt;kl'</span>,a,b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>其中张量（数组）a就是一个三维矩阵，ijk是由三个字符构成，类似的输入张量b也是一个三维矩阵。</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.arange(<span class="dv">10</span>)</span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a>arr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>sum1 <span class="op">=</span> np.einsum(<span class="st">'i-&gt;'</span>,arr)</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>sum1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>45</code></pre>
</div>
</div>
<p><code>einsum()</code>通过求和，将一条线转化为一个点，也就是’i-&gt;’的含义。</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>arr2 <span class="op">=</span> np.arange(<span class="dv">20</span>).reshape(<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>arr2</span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a>sum_col <span class="op">=</span> np.einsum(<span class="st">'ij-&gt;j'</span>,arr2)</span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a>sum_col</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>array([30, 34, 38, 42, 46])</code></pre>
</div>
</div>
</section>
<section id="numpy的轴方向" class="level3">
<h3 class="anchored" data-anchor-id="numpy的轴方向">NumPy的轴方向</h3>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.ones((<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>array([[1., 1., 1.],
       [1., 1., 1.]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>6.0</code></pre>
</div>
</div>
<p>元素的约简：实现在数量上的减少来反映数据，该原理同样适用于<code>mean</code>和<code>max</code>等</p>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">sum</span>(axis <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>array([3., 3.])</code></pre>
</div>
</div>
</section>
<section id="numpy的高级索引" class="level3">
<h3 class="anchored" data-anchor-id="numpy的高级索引">NumPy的高级索引</h3>
<p>索引要么是一个，要么是一片值，自然只能访问一个数组元素。</p>
<p>花式索引是指将多个访问的元素索引汇集起来，构成一个整型数组，然后将这个内含索引的数组，整体作为一个目标数组的索引，一次能够读取多个重复的数组的元素。</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>normal_array <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">34</span>,<span class="dv">44</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>normal_array</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([ 1,  2,  3,  2,  1, 34, 44,  1,  2])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>fancy_index_array <span class="op">=</span> normal_array[[<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">1</span>]] <span class="co">#这样的形式可以提取多个</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a>fancy_index_array</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>array([1, 1, 2, 2])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>normal_array[[<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">1</span>]][<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="数组的堆叠操作" class="level3">
<h3 class="anchored" data-anchor-id="数组的堆叠操作">数组的堆叠操作</h3>
<p>将不同的数组需要堆叠stack操作，拼接为一个较大的数组，堆叠方式大致可以分为水平方向堆叠和垂直方向堆叠。</p>
</section>
<section id="数组numpy的随机数" class="level3">
<h3 class="anchored" data-anchor-id="数组numpy的随机数">数组NumPy的随机数</h3>
</section>
</section>
<section id="datascience-process" class="level1">
<h1>datascience process</h1>
<section id="eda-introduction" class="level3">
<h3 class="anchored" data-anchor-id="eda-introduction">EDA introduction</h3>
<p>探索性科学(exploratory Data Analysis,EDA)是数据科学的第一步。EDA是John Tukey在1977年提出。</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> datasets</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>iris<span class="op">=</span>pd.read_csv(<span class="st">'data/iris.csv'</span>,header<span class="op">=</span><span class="va">None</span>,names<span class="op">=</span>[<span class="st">'sepal_length'</span>,<span class="st">'sepal_width'</span>,<span class="st">'petal_length'</span>,<span class="st">'petal_width'</span>,<span class="st">'target'</span>])</span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>iris.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>iris.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>Index(['sepal_length', 'sepal_width', 'petal_length', 'petal_width', 'target'], dtype='object')</code></pre>
</div>
</div>
<p>取出数据列表中的一些东西</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a>Y<span class="op">=</span>iris.target</span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>Y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>0         setosa
1         setosa
2         setosa
3         setosa
4         setosa
         ...    
145    virginica
146    virginica
147    virginica
148    virginica
149    virginica
Name: target, Length: 150, dtype: object</code></pre>
</div>
</div>
<section id="异构列表" class="level4">
<h4 class="anchored" data-anchor-id="异构列表">异构列表</h4>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>complex_list<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]<span class="op">+</span>[<span class="fl">1.</span>,<span class="fl">2.</span>,<span class="fl">3.</span>]<span class="op">+</span>[<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>]</span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>array_2<span class="op">=</span>np.array(complex_list[:<span class="dv">3</span>])</span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'complex_list[:3]'</span>,array_2.dtype)  <span class="co">#dtype=data_type</span></span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>array_2<span class="op">=</span>np.array(complex_list[:<span class="dv">6</span>])</span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'complex_list[:6]'</span>,array_2.dtype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>complex_list[:3] int64
complex_list[:6] float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>iris.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<table class="dataframe table table-sm table-striped" data-border="1">
<thead>
<tr class="header">
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th>count</th>
<td>150.000000</td>
<td>150.000000</td>
<td>150.000000</td>
<td>150.000000</td>
</tr>
<tr class="even">
<th>mean</th>
<td>5.843333</td>
<td>3.054000</td>
<td>3.758667</td>
<td>1.198667</td>
</tr>
<tr class="odd">
<th>std</th>
<td>0.828066</td>
<td>0.433594</td>
<td>1.764420</td>
<td>0.763161</td>
</tr>
<tr class="even">
<th>min</th>
<td>4.300000</td>
<td>2.000000</td>
<td>1.000000</td>
<td>0.100000</td>
</tr>
<tr class="odd">
<th>25%</th>
<td>5.100000</td>
<td>2.800000</td>
<td>1.600000</td>
<td>0.300000</td>
</tr>
<tr class="even">
<th>50%</th>
<td>5.800000</td>
<td>3.000000</td>
<td>4.350000</td>
<td>1.300000</td>
</tr>
<tr class="odd">
<th>75%</th>
<td>6.400000</td>
<td>3.300000</td>
<td>5.100000</td>
<td>1.800000</td>
</tr>
<tr class="even">
<th>max</th>
<td>7.900000</td>
<td>4.400000</td>
<td>6.900000</td>
<td>2.500000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a>iris.boxplot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-184-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-scrolled="true" data-execution_count="40">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>df1<span class="op">=</span>iris.quantile([<span class="fl">0.1</span>,<span class="fl">0.9</span>])</span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a>df1.to_csv(<span class="vs">r"导出5.csv"</span>,index<span class="op">=</span><span class="va">False</span>,header<span class="op">=</span><span class="va">True</span>) <span class="co">#index和header默认为True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(os.path.abspath(<span class="st">'.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/a182501</code></pre>
</div>
</div>
<p>use the data to plot</p>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(iris[<span class="st">'petal_width'</span>],iris[<span class="st">'petal_length'</span>],alpha<span class="op">=</span><span class="fl">1.0</span>,color<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb288-3"><a href="#cb288-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"petal width"</span>)</span>
<span id="cb288-4"><a href="#cb288-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"petal length"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>Text(0, 0.5, 'petal length')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-187-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>plt.hist(iris.petal_width,bins<span class="op">=</span><span class="dv">20</span>)<span class="co">#bins是那分箱</span></span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"petal width distribution"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>Text(0.5, 0, 'petal width distribution')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-188-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>分相值需要不断修正得到，一般来说是所有观测值的平方根。len(iris)=150 sqrt(150)=14</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(iris)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>150</code></pre>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> datasets</span>
<span id="cb294-2"><a href="#cb294-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cross_validation <span class="im">import</span> train_test_split</span>
<span id="cb294-3"><a href="#cb294-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error</span>
<span id="cb294-4"><a href="#cb294-4" aria-hidden="true" tabindex="-1"></a>cali<span class="op">=</span>datasets.california_housing.fetch_california_housing(</span>
<span id="cb294-5"><a href="#cb294-5" aria-hidden="true" tabindex="-1"></a>X<span class="op">=</span>cali.data</span>
<span id="cb294-6"><a href="#cb294-6" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>cali.target</span>
<span id="cb294-7"><a href="#cb294-7" aria-hidden="true" tabindex="-1"></a>X_train,X_test,y_train,y_test<span class="op">=</span>train_test_split(X,y,train_size<span class="op">=</span><span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>ModuleNotFoundError: No module named 'sklearn.cross_validation'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> datasets</span>
<span id="cb296-6"><a href="#cb296-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-7"><a href="#cb296-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> svm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="维数化简" class="level3">
<h3 class="anchored" data-anchor-id="维数化简">维数化简</h3>
<p>不得不将一些包含大量特征的数据集，其中有很多特征不必要的，有些特征包含丰富的信息，有些特征与预测相关。有些事完全不相关的。只是包含噪声或不相关信息。 维数化简，消除输入数据集的某些特征。创建一个有限的特征数据集，这些特征包含所有需要的信息。从而更有效的预测目标变量。减少特征数意味着减少输出的变化性和复杂性（以及时间）。 许多维数化简算法主要假设：数据包含加性高数白噪声（additive white gaussian Noise,AWGN),一种独立的高斯噪声。</p>
<section id="协方差矩阵" class="level4">
<h4 class="anchored" data-anchor-id="协方差矩阵">协方差矩阵</h4>
<p>协方差矩阵给出了所有不同的特征对之间的相关性。 Iris中有四个特征，通过简单的图形显示容易计算。</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a>iris<span class="op">=</span>datasets.load_iris()</span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a>cov_data<span class="op">=</span>np.corrcoef(iris.data.T)<span class="co">#计算不同变量间的相关系数，以矩阵的形式表示。</span></span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(iris.feature_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)']</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a>cov_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([[ 1.        , -0.11756978,  0.87175378,  0.81794113],
       [-0.11756978,  1.        , -0.4284401 , -0.36612593],
       [ 0.87175378, -0.4284401 ,  1.        ,  0.96286543],
       [ 0.81794113, -0.36612593,  0.96286543,  1.        ]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>img<span class="op">=</span>plt.matshow(cov_data,cmap<span class="op">=</span>plt.cm.winter)</span>
<span id="cb301-3"><a href="#cb301-3" aria-hidden="true" tabindex="-1"></a>plt.colorbar(img,ticks<span class="op">=</span>[<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>&lt;matplotlib.colorbar.Colorbar at 0x7fac3a2afa90&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-194-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="主成分分析" class="level4">
<h4 class="anchored" data-anchor-id="主成分分析">主成分分析</h4>
<p>主成分分析(principal component analysis,PCA)帮助于定义更小的、更相关特征集合的技术。新的特征就是现有特征的线性组合/旋转（按道理不算新特征） 第二个向量与第一个向量正交，包含剩余能量的大部分。 理想的加性高斯白噪声下。</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>pca_2c<span class="op">=</span>PCA(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a>x_pca_2c<span class="op">=</span>pca_2c.fit_transform(iris.data)</span>
<span id="cb303-4"><a href="#cb303-4" aria-hidden="true" tabindex="-1"></a>x_pca_2c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>array([[-2.68412563,  0.31939725],
       [-2.71414169, -0.17700123],
       [-2.88899057, -0.14494943],
       [-2.74534286, -0.31829898],
       [-2.72871654,  0.32675451],
       [-2.28085963,  0.74133045],
       [-2.82053775, -0.08946138],
       [-2.62614497,  0.16338496],
       [-2.88638273, -0.57831175],
       [-2.6727558 , -0.11377425],
       [-2.50694709,  0.6450689 ],
       [-2.61275523,  0.01472994],
       [-2.78610927, -0.235112  ],
       [-3.22380374, -0.51139459],
       [-2.64475039,  1.17876464],
       [-2.38603903,  1.33806233],
       [-2.62352788,  0.81067951],
       [-2.64829671,  0.31184914],
       [-2.19982032,  0.87283904],
       [-2.5879864 ,  0.51356031],
       [-2.31025622,  0.39134594],
       [-2.54370523,  0.43299606],
       [-3.21593942,  0.13346807],
       [-2.30273318,  0.09870885],
       [-2.35575405, -0.03728186],
       [-2.50666891, -0.14601688],
       [-2.46882007,  0.13095149],
       [-2.56231991,  0.36771886],
       [-2.63953472,  0.31203998],
       [-2.63198939, -0.19696122],
       [-2.58739848, -0.20431849],
       [-2.4099325 ,  0.41092426],
       [-2.64886233,  0.81336382],
       [-2.59873675,  1.09314576],
       [-2.63692688, -0.12132235],
       [-2.86624165,  0.06936447],
       [-2.62523805,  0.59937002],
       [-2.80068412,  0.26864374],
       [-2.98050204, -0.48795834],
       [-2.59000631,  0.22904384],
       [-2.77010243,  0.26352753],
       [-2.84936871, -0.94096057],
       [-2.99740655, -0.34192606],
       [-2.40561449,  0.18887143],
       [-2.20948924,  0.43666314],
       [-2.71445143, -0.2502082 ],
       [-2.53814826,  0.50377114],
       [-2.83946217, -0.22794557],
       [-2.54308575,  0.57941002],
       [-2.70335978,  0.10770608],
       [ 1.28482569,  0.68516047],
       [ 0.93248853,  0.31833364],
       [ 1.46430232,  0.50426282],
       [ 0.18331772, -0.82795901],
       [ 1.08810326,  0.07459068],
       [ 0.64166908, -0.41824687],
       [ 1.09506066,  0.28346827],
       [-0.74912267, -1.00489096],
       [ 1.04413183,  0.2283619 ],
       [-0.0087454 , -0.72308191],
       [-0.50784088, -1.26597119],
       [ 0.51169856, -0.10398124],
       [ 0.26497651, -0.55003646],
       [ 0.98493451, -0.12481785],
       [-0.17392537, -0.25485421],
       [ 0.92786078,  0.46717949],
       [ 0.66028376, -0.35296967],
       [ 0.23610499, -0.33361077],
       [ 0.94473373, -0.54314555],
       [ 0.04522698, -0.58383438],
       [ 1.11628318, -0.08461685],
       [ 0.35788842, -0.06892503],
       [ 1.29818388, -0.32778731],
       [ 0.92172892, -0.18273779],
       [ 0.71485333,  0.14905594],
       [ 0.90017437,  0.32850447],
       [ 1.33202444,  0.24444088],
       [ 1.55780216,  0.26749545],
       [ 0.81329065, -0.1633503 ],
       [-0.30558378, -0.36826219],
       [-0.06812649, -0.70517213],
       [-0.18962247, -0.68028676],
       [ 0.13642871, -0.31403244],
       [ 1.38002644, -0.42095429],
       [ 0.58800644, -0.48428742],
       [ 0.80685831,  0.19418231],
       [ 1.22069088,  0.40761959],
       [ 0.81509524, -0.37203706],
       [ 0.24595768, -0.2685244 ],
       [ 0.16641322, -0.68192672],
       [ 0.46480029, -0.67071154],
       [ 0.8908152 , -0.03446444],
       [ 0.23054802, -0.40438585],
       [-0.70453176, -1.01224823],
       [ 0.35698149, -0.50491009],
       [ 0.33193448, -0.21265468],
       [ 0.37621565, -0.29321893],
       [ 0.64257601,  0.01773819],
       [-0.90646986, -0.75609337],
       [ 0.29900084, -0.34889781],
       [ 2.53119273, -0.00984911],
       [ 1.41523588, -0.57491635],
       [ 2.61667602,  0.34390315],
       [ 1.97153105, -0.1797279 ],
       [ 2.35000592, -0.04026095],
       [ 3.39703874,  0.55083667],
       [ 0.52123224, -1.19275873],
       [ 2.93258707,  0.3555    ],
       [ 2.32122882, -0.2438315 ],
       [ 2.91675097,  0.78279195],
       [ 1.66177415,  0.24222841],
       [ 1.80340195, -0.21563762],
       [ 2.1655918 ,  0.21627559],
       [ 1.34616358, -0.77681835],
       [ 1.58592822, -0.53964071],
       [ 1.90445637,  0.11925069],
       [ 1.94968906,  0.04194326],
       [ 3.48705536,  1.17573933],
       [ 3.79564542,  0.25732297],
       [ 1.30079171, -0.76114964],
       [ 2.42781791,  0.37819601],
       [ 1.19900111, -0.60609153],
       [ 3.49992004,  0.4606741 ],
       [ 1.38876613, -0.20439933],
       [ 2.2754305 ,  0.33499061],
       [ 2.61409047,  0.56090136],
       [ 1.25850816, -0.17970479],
       [ 1.29113206, -0.11666865],
       [ 2.12360872, -0.20972948],
       [ 2.38800302,  0.4646398 ],
       [ 2.84167278,  0.37526917],
       [ 3.23067366,  1.37416509],
       [ 2.15943764, -0.21727758],
       [ 1.44416124, -0.14341341],
       [ 1.78129481, -0.49990168],
       [ 3.07649993,  0.68808568],
       [ 2.14424331,  0.1400642 ],
       [ 1.90509815,  0.04930053],
       [ 1.16932634, -0.16499026],
       [ 2.10761114,  0.37228787],
       [ 2.31415471,  0.18365128],
       [ 1.9222678 ,  0.40920347],
       [ 1.41523588, -0.57491635],
       [ 2.56301338,  0.2778626 ],
       [ 2.41874618,  0.3047982 ],
       [ 1.94410979,  0.1875323 ],
       [ 1.52716661, -0.37531698],
       [ 1.76434572,  0.07885885],
       [ 1.90094161,  0.11662796],
       [ 1.39018886, -0.28266094]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(x_pca_2c[:,<span class="dv">0</span>],x_pca_2c[:,<span class="dv">1</span>], c<span class="op">=</span>iris.target,alpha<span class="op">=</span><span class="fl">0.8</span>,edgecolors<span class="op">=</span><span class="st">'none'</span>)</span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-196-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a>pca_2c<span class="op">=</span>PCA(n_components<span class="op">=</span><span class="dv">1</span>,whiten<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a>x_pca_2c<span class="op">=</span>pca_2c.fit_transform(iris.data)</span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(x_pca_2c[:,<span class="dv">0</span>],np.zeros(x_pca_2c.shape), c<span class="op">=</span>iris.target,alpha<span class="op">=</span><span class="fl">0.8</span>,edgecolors<span class="op">=</span><span class="st">'none'</span>)</span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-197-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="处理大数据集" class="level4">
<h4 class="anchored" data-anchor-id="处理大数据集">2.2.3处理大数据集</h4>
<p>要加载的数据集过大，而与采用的内存不适应，需要使用统一的机器学习方法。使用python可以加载数据到区块。该操作也称为数据流。 数据集以连续流的形式流入数据框或其他的数据结构中。</p>
</section>
<section id="一种用于大数据的pca变型randomized-pca" class="level4">
<h4 class="anchored" data-anchor-id="一种用于大数据的pca变型randomized-pca">3.3.3 一种用于大数据的PCA变型——Randomized PCA</h4>
<p>PCA的主要问题在于它所采用的奇异值分解的复杂性。Scikit-learn提供了一种基于随机SVD(randomiezd SVD)的算法。 另一方面，随机SVD比经典SVD更为快速。</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA <span class="im">as</span> RandomizedPCA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>rpca_2c<span class="op">=</span>RandomizedPCA(n_components<span class="op">=</span><span class="dv">2</span>,svd_solver<span class="op">=</span><span class="st">'randomized'</span>)</span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a>x_rpca_2c<span class="op">=</span>rpca_2c.fit_transform(iris.data)</span>
<span id="cb308-3"><a href="#cb308-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(x_rpca_2c[:,<span class="dv">0</span>],x_rpca_2c[:,<span class="dv">1</span>],c<span class="op">=</span>iris.target,alpha<span class="op">=</span><span class="fl">0.8</span>,edgecolors<span class="op">=</span><span class="st">'none'</span>)</span>
<span id="cb308-4"><a href="#cb308-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb308-5"><a href="#cb308-5" aria-hidden="true" tabindex="-1"></a>rpca_2c.explained_variance_ratio_.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-199-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>0.9776852063187955</code></pre>
</div>
</div>
<p>目前来看的结果是与经典是接近的，但到大数据集中就显著会差异的。</p>
</section>
<section id="潜在因素分析" class="level4">
<h4 class="anchored" data-anchor-id="潜在因素分析">3.3.4 潜在因素分析</h4>
<p>LFA是另一种实现数据集降维分析的技术。总体思路与PCA方法相近。不需要度输入信号进行正交分解，因此没有输出基。 applied：主要在系统中有一个潜在因素或结构的情形。所有的特征是潜在因素经过线性变化后观测到的，具有任意波形发生器(AWG)的噪声。 一般会认为，潜在因素符号高斯分布，具有归一化的协方差。</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> FactorAnalysis</span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>fact_2c<span class="op">=</span>FactorAnalysis(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb310-3"><a href="#cb310-3" aria-hidden="true" tabindex="-1"></a>x_factor<span class="op">=</span>fact_2c.fit_transform(iris.data)</span>
<span id="cb310-4"><a href="#cb310-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(x_factor[:,<span class="dv">0</span>],x_factor[:,<span class="dv">1</span>],c<span class="op">=</span>iris.target,alpha<span class="op">=</span><span class="fl">0.8</span>,edgecolors<span class="op">=</span><span class="st">'none'</span>)</span>
<span id="cb310-5"><a href="#cb310-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-200-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="线性判别分析" class="level4">
<h4 class="anchored" data-anchor-id="线性判别分析">3.3.5 线性判别分析</h4>
<p>LDA是一种分类器，经常用于维数约简。LDA是一种监督的方法。需要标签集来优化维数化简的步骤。LDA产生输入特征的线性组合，试图建立最能区分不同类别的模型 与PCA相比，LDA方法获得的输出数据集能够清晰地分出各个类别。</p>
</section>
</section>
<section id="异常检测和处理" class="level3">
<h3 class="anchored" data-anchor-id="异常检测和处理">3.4 异常检测和处理</h3>
<p>样本是数据科学核心。变量中出现异常高的值，不仅会改变变量的均值和方差等描述性的测量还会影响到很多从数据中学习到的算法。 从而使得这些算法暴露给异常值。 数据点成为异常值的原因： - 数据点表示极少发生的事件，但仍然是一个可能的数据； - 数据点表示经常发生的另一种分布。 - 数据点明显是有某种类型的错误；</p>
<section id="单变量异常检测" class="level4">
<h4 class="anchored" data-anchor-id="单变量异常检测">3.4.1 单变量异常检测</h4>
<p>数据点的异常如何去说明，单变量的问题通常用EDA分析和箱线图等可视化方式实现。 极端值可以被当作异常值。若使用z-scores，得分绝对值高于3的观测值必需当作可疑异常值。 观测量是用数据描述</p>
<p>加载波士顿房价数据集，数据集中索引为3的变量CHAS是二进制（dummy variable）的，因此不使用该变量做。</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> load_boston</span>
<span id="cb311-3"><a href="#cb311-3" aria-hidden="true" tabindex="-1"></a>boston <span class="op">=</span> load_boston()</span>
<span id="cb311-4"><a href="#cb311-4" aria-hidden="true" tabindex="-1"></a>continuous_variables<span class="op">=</span>[n <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(np.shape(boston.data)[<span class="dv">1</span>])<span class="cf">if</span> n<span class="op">!=</span><span class="dv">3</span>]</span>
<span id="cb311-5"><a href="#cb311-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 取出所有非3的变量</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a>np.shape(boston.data)[<span class="dv">1</span>]</span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="co"># shape use to check the dimention of array or matrix</span></span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 means the column 0 means the rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>13</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a>boston.data[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>array([2.7310e-02, 0.0000e+00, 7.0700e+00, 0.0000e+00, 4.6900e-01,
       6.4210e+00, 7.8900e+01, 4.9671e+00, 2.0000e+00, 2.4200e+02,
       1.7800e+01, 3.9690e+02, 9.1400e+00])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing </span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a>normalized_data <span class="op">=</span> preprocessing.StandardScaler().fit_transform(boston.data[:,continuous_variables])</span>
<span id="cb316-3"><a href="#cb316-3" aria-hidden="true" tabindex="-1"></a>outliers_rows,outliers_columns <span class="op">=</span> np.where(np.<span class="bu">abs</span>(normalized_data)<span class="op">&gt;</span><span class="dv">3</span>)</span>
<span id="cb316-4"><a href="#cb316-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> (outliers_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[ 55  56  57 102 141 199 200 201 202 203 204 225 256 257 262 283 284 347
 351 352 353 353 354 355 364 365 367 373 374 374 380 398 404 405 406 410
 410 411 412 412 414 414 415 416 418 418 419 423 424 425 426 427 427 429
 431 436 437 438 445 450 454 455 456 457 466]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(<span class="bu">zip</span>(outliers_rows,outliers_columns)))</span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="co"># zip() 将对象压缩成一个新的元组。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[(55, 1), (56, 1), (57, 1), (102, 10), (141, 11), (199, 1), (200, 1), (201, 1), (202, 1), (203, 1), (204, 1), (225, 4), (256, 1), (257, 4), (262, 4), (283, 1), (284, 1), (347, 1), (351, 6), (352, 6), (353, 1), (353, 6), (354, 6), (355, 6), (364, 4), (365, 4), (367, 4), (373, 11), (374, 4), (374, 11), (380, 0), (398, 0), (404, 0), (405, 0), (406, 4), (410, 0), (410, 10), (411, 10), (412, 10), (412, 11), (414, 0), (414, 11), (415, 10), (416, 10), (418, 0), (418, 10), (419, 10), (423, 10), (424, 10), (425, 10), (426, 10), (427, 0), (427, 10), (429, 10), (431, 10), (436, 10), (437, 10), (438, 10), (445, 10), (450, 10), (454, 10), (455, 10), (456, 10), (457, 10), (466, 10)]</code></pre>
</div>
</div>
<p>由此，单变量方法可以检测出很多的异常值，但不能检测出那些不是极端值的异常值。若他可以发现两个或两个以上的变量组合出现非正常值。仍然会发现这个异常值。 所涉及的变量可能不是极端值，因此这个异常值就可能会漏选。</p>
</section>
<section id="ellipticenvelope" class="level4">
<h4 class="anchored" data-anchor-id="ellipticenvelope">3.4.2 EllipticEnvelope</h4>
<p>EllipticEnvelope是用于找出数据总体分布的关键参数的函数。 总体均值要考虑数据集中的所有变量。能够发现单变量和多变量的异常值。</p>
</section>
<section id="oneclasssvm" class="level4">
<h4 class="anchored" data-anchor-id="oneclasssvm">3.4.3 oneclassSVM</h4>
<p>EllipticEnvelope适用于有控制参数的高斯分布假设，而OneClassSVM适用于一种通过学习来得知分布。 - Kernel和Degree：这个两个变量是相关的。 - Gamma：是一个与rbf核相关的参数。 - nu ：是一个选择参数，决定模型是否必须符合一个精确的分布，还是应该尽量保持</p>
</section>
</section>
<section id="评分函数" class="level3">
<h3 class="anchored" data-anchor-id="评分函数">3.5 评分函数</h3>
<p>评估系统的性能并检查与目标距离，需要使用一个能对于结果进行评分的函数。通常有不同的评分函数分别处理二分类、多标号分类、回归或聚类问题。 #### 3.5.1多标号分类 对一个进行预测时候，需要多标号分类。</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> datasets</span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a>iris <span class="op">=</span> datasets.load_iris()</span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb320-4"><a href="#cb320-4" aria-hidden="true" tabindex="-1"></a>x_train,x_test,y_train,y_test<span class="op">=</span>train_test_split(iris.data,iris.target,test_size<span class="op">=</span><span class="fl">.50</span>,random_state<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb320-5"><a href="#cb320-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb320-6"><a href="#cb320-6" aria-hidden="true" tabindex="-1"></a>classifier <span class="op">=</span> DecisionTreeClassifier(max_depth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb320-7"><a href="#cb320-7" aria-hidden="true" tabindex="-1"></a>classifier.fit(x_train,y_train)</span>
<span id="cb320-8"><a href="#cb320-8" aria-hidden="true" tabindex="-1"></a><span class="co">#用训练数据进行拟合</span></span>
<span id="cb320-9"><a href="#cb320-9" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> classifier.predict(x_test)</span>
<span id="cb320-10"><a href="#cb320-10" aria-hidden="true" tabindex="-1"></a><span class="co">#用测试数据做预测</span></span>
<span id="cb320-11"><a href="#cb320-11" aria-hidden="true" tabindex="-1"></a>iris.target_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array(['setosa', 'versicolor', 'virginica'], dtype='&lt;U10')</code></pre>
</div>
</div>
<ul>
<li>混淆矩阵(confusion matrix):又称可能性表格错误矩阵，其每一列代表预测值，每一行代表的是实际的类别。一个完美的分类，其混淆矩阵所有非对角线元素的都应0。</li>
</ul>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> metrics</span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(y_test,y_pred)</span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cm)</span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y_pred)</span>
<span id="cb322-6"><a href="#cb322-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[30  0  0]
 [ 0 19  3]
 [ 0  2 21]]
[2 0 2 2 2 1 2 0 0 1 0 0 0 1 2 0 1 0 0 2 0 2 1 0 0 0 0 0 0 2 1 0 2 0 1 2 2
 1 1 0 2 0 1 0 2 0 0 1 1 2 0 1 2 2 1 1 0 1 1 1 0 1 0 1 2 2 2 2 0 2 2 0 1 2
 0]
[2 0 2 2 2 1 1 0 0 2 0 0 0 1 2 0 1 0 0 2 0 2 1 0 0 0 0 0 0 2 1 0 2 0 1 2 2
 1 1 0 2 0 1 0 2 0 0 1 1 2 0 1 2 2 1 1 0 1 2 1 0 1 0 1 2 1 2 1 0 2 2 0 1 2
 0]</code></pre>
</div>
</div>
<p>准确率(accuracy):准确率表示的是预测标号也是实际标号的比例。</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Accuracy:"</span>,metrics.accuracy_score(y_test,y_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 0.9333333333333333</code></pre>
</div>
</div>
<section id="二值分类" class="level4">
<h4 class="anchored" data-anchor-id="二值分类">二值分类</h4>
<p>最常用的指标是ROC曲线或AUC曲线。ROC曲线是一种图形化方法，用于表示分类器性能是如何随可能的分类阀值改变的。</p>
</section>
<section id="回归" class="level4">
<h4 class="anchored" data-anchor-id="回归">回归</h4>
<p>MAE（L1 norm）<code>mean_absolute_error</code></p>
<p>MSE（L2 norm）<code>mean_squared_error</code></p>
<p>R2，决定了预测器与目标变量之间的线性拟合的好坏，取值在0-1之间。取值越高表示模型越好。<code>sklearn.metrics.r2_score</code></p>
</section>
</section>
<section id="交叉和验证" class="level3">
<h3 class="anchored" data-anchor-id="交叉和验证">交叉和验证</h3>
<p>加载数据之后，经过预处理、创建新的特征、检查异常值和其他不一致的数据点等过程，完成了机器学习的算法准备。 机器学习通过观测一系列样本，使样本与它们的结果相匹配，从而抽取一系列能够成功泛化到新样本的规则。一种有监督的学习方法。 首先加载一个数据集：</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> load_digits</span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>digits<span class="op">=</span>load_digits()</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(digits.DESCR)</span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span>digits.data</span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>digits.target</span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.. _digits_dataset:

Optical recognition of handwritten digits dataset
--------------------------------------------------

**Data Set Characteristics:**

    :Number of Instances: 1797
    :Number of Attributes: 64
    :Attribute Information: 8x8 image of integer pixels in the range 0..16.
    :Missing Attribute Values: None
    :Creator: E. Alpaydin (alpaydin '@' boun.edu.tr)
    :Date: July; 1998

This is a copy of the test set of the UCI ML hand-written digits datasets
https://archive.ics.uci.edu/ml/datasets/Optical+Recognition+of+Handwritten+Digits

The data set contains images of hand-written digits: 10 classes where
each class refers to a digit.

Preprocessing programs made available by NIST were used to extract
normalized bitmaps of handwritten digits from a preprinted form. From a
total of 43 people, 30 contributed to the training set and different 13
to the test set. 32x32 bitmaps are divided into nonoverlapping blocks of
4x4 and the number of on pixels are counted in each block. This generates
an input matrix of 8x8 where each element is an integer in the range
0..16. This reduces dimensionality and gives invariance to small
distortions.

For info on NIST preprocessing routines, see M. D. Garris, J. L. Blue, G.
T. Candela, D. L. Dimmick, J. Geist, P. J. Grother, S. A. Janet, and C.
L. Wilson, NIST Form-Based Handprint Recognition System, NISTIR 5469,
1994.

.. topic:: References

  - C. Kaynak (1995) Methods of Combining Multiple Classifiers and Their
    Applications to Handwritten Digit Recognition, MSc Thesis, Institute of
    Graduate Studies in Science and Engineering, Bogazici University.
  - E. Alpaydin, C. Kaynak (1998) Cascading Classifiers, Kybernetika.
  - Ken Tang and Ponnuthurai N. Suganthan and Xi Yao and A. Kai Qin.
    Linear dimensionalityreduction using relevance weighted LDA. School of
    Electrical and Electronic Engineering Nanyang Technological University.
    2005.
  - Claudio Gentile. A New Approximate Maximal Margin Classification
    Algorithm. NIPS. 2000.
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([0, 1, 2, ..., 8, 9, 8])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([ 0.,  0.,  5., 13.,  9.,  1.,  0.,  0.,  0.,  0., 13., 15., 10.,
       15.,  5.,  0.,  0.,  3., 15.,  2.,  0., 11.,  8.,  0.,  0.,  4.,
       12.,  0.,  0.,  8.,  8.,  0.,  0.,  5.,  8.,  0.,  0.,  9.,  8.,
        0.,  0.,  4., 11.,  0.,  1., 12.,  7.,  0.,  0.,  2., 14.,  5.,
       10., 12.,  0.,  0.,  0.,  0.,  6., 13., 10.,  0.,  0.,  0.])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> svm</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>h1<span class="op">=</span>svm.LinearSVC(C<span class="op">=</span><span class="dv">1</span>)<span class="co">#linear SVC means use the svm </span></span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>h2 <span class="op">=</span> svm.SVC(kernel<span class="op">=</span><span class="st">'rbf'</span>,degree<span class="op">=</span><span class="dv">3</span>,gamma<span class="op">=</span><span class="fl">0.001</span>,C<span class="op">=</span><span class="fl">1.0</span>)</span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>h3<span class="op">=</span>svm.SVC(kernel<span class="op">=</span><span class="st">'poly'</span>,degree<span class="op">=</span><span class="dv">3</span>,gamma<span class="op">=</span><span class="fl">0.001</span>,C<span class="op">=</span><span class="fl">1.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>第一个实验我们对数据进行SVC拟合，并对结果进行检验。</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>h1.fit(x,y)</span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(h1.score(x,y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.989983305509182</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/a182501/opt/anaconda3/lib/python3.8/site-packages/sklearn/svm/_base.py:1206: ConvergenceWarning: Liblinear failed to converge, increase the number of iterations.
  warnings.warn(</code></pre>
</div>
</div>
<p>这个方法使用数组x拟合一个模型，以正确预测出向量中十个类别。然后调用<code>.score()</code>的方法，指定同一个预测器，用向量真值y进行评价模型性能。 这个得分表示的是样本内(in-sample)性能，也是学习算法的性能。</p>
</section>
<section id="交叉验证" class="level3">
<h3 class="anchored" data-anchor-id="交叉验证">交叉验证</h3>
<p>当样本不同时候，验证和测试的结果也会有所不同； 所选择的假设往往是最好的，但并非总是如此； 可行方案：交叉验证。SL:sklearn.cross_validation</p>
<p>交叉验证，主要思想是在于将训练数据分为K组（折）训练模型k次，每次保留一个不同分组的不参与训练。 十折是一个常见的设置。每次模型训练结束以后都会使用剩下的进行训练。 标准差用于均值表示模型总体性能的公正估计。使用不同的模型交叉验证结果的均值。</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> cross_validation</span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true" tabindex="-1"></a>choosen_random_state<span class="op">=</span><span class="dv">1</span></span>
<span id="cb336-3"><a href="#cb336-3" aria-hidden="true" tabindex="-1"></a>cv_folds<span class="op">=</span><span class="dv">10</span></span>
<span id="cb336-4"><a href="#cb336-4" aria-hidden="true" tabindex="-1"></a>eval_scoring<span class="op">=</span><span class="st">'accuracy'</span></span>
<span id="cb336-5"><a href="#cb336-5" aria-hidden="true" tabindex="-1"></a>workers<span class="op">=-</span><span class="dv">1</span></span>
<span id="cb336-6"><a href="#cb336-6" aria-hidden="true" tabindex="-1"></a>x_train,x_test,y_train,y_test<span class="op">=</span>cross_validation.train_test_split(X,y,test_size<span class="op">=</span><span class="fl">0.30</span>,random_state<span class="op">=</span>choosen_random_state)</span>
<span id="cb336-7"><a href="#cb336-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> hypothesis <span class="kw">in</span> [h1,h2,h3]:</span>
<span id="cb336-8"><a href="#cb336-8" aria-hidden="true" tabindex="-1"></a>    scores <span class="op">=</span> cross_validation.cross_val_score(hypothesis,x_train,y_train,cv<span class="op">=</span>cv_folds,scoring<span class="op">=</span>eval_scoring,n_jobs<span class="op">=</span>workers)</span>
<span id="cb336-9"><a href="#cb336-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="sc">%s</span><span class="st"> -&gt; cross validation accuracy:mean =</span><span class="sc">%0.3f</span><span class="st"> std=</span><span class="sc">%0.3f</span><span class="st">"</span><span class="op">%</span>(hypothesis,np.mean(scores),np.std(scores)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>ImportError: cannot import name 'cross_validation' from 'sklearn' (/Users/a182501/opt/anaconda3/lib/python3.8/site-packages/sklearn/__init__.py)</code></pre>
</div>
</div>
<section id="使用交叉验证迭代器" class="level4">
<h4 class="anchored" data-anchor-id="使用交叉验证迭代器">3.7.1 使用交叉验证迭代器</h4>
<p>需要自己建立自己的交叉验证迭代器，<code>cross_validation</code>提供了一个较好的迭代器选择。 ##### KFold 折数n变量已知，根据训练集的索引进行n次迭代，每次都在剩下都验证集上测试。</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a>kfolding <span class="op">=</span> cross_validation.KFold(n<span class="op">=</span><span class="dv">100</span>,n_folds<span class="op">=</span><span class="dv">10</span>,shuffle<span class="op">=</span><span class="va">True</span>,random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> train_idx,validation_idx <span class="kw">in</span> kfolding:</span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(train_idx,validation_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'cross_validation' is not defined</code></pre>
</div>
</div>
</section>
<section id="采样和自举方法" class="level4">
<h4 class="anchored" data-anchor-id="采样和自举方法">3.7.2 采样和自举方法</h4>
<p>采样方法和之前的方法不同，不分割训练集，对训练集进行二次抽样(resample)或(mbootstrap) - 需要去选择一部分可以使用的数据，就需要二次抽样 - 二次抽样可以让你广泛的测试假设而又不用非常小的测试集中验证</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> model_selection</span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> </span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a>subsampling <span class="op">=</span> cross_validation.ShuffleSplit(n<span class="op">=</span><span class="dv">100</span>,n_iter<span class="op">=</span><span class="dv">10</span>,test_size<span class="op">=</span><span class="fl">0.1</span>,random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> train_idx,validation_idx <span class="kw">in</span> subsampling:</span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(train_idx,validation_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'cross_validation' is not defined</code></pre>
</div>
</div>
</section>
</section>
<section id="超参数优化" class="level3">
<h3 class="anchored" data-anchor-id="超参数优化">超参数优化</h3>
<p>机器学习不仅取决于学习算法，还会受到超参数和变量选择的影响。其中超参数是算法事先确定的，无法在训练过程中学习得到。 变量选择能够帮助假设获得最佳的参数。</p>
</section>
<section id="pandas" class="level2">
<h2 class="anchored" data-anchor-id="pandas">Pandas</h2>
<section id="series数据" class="level3">
<h3 class="anchored" data-anchor-id="series数据">Series数据</h3>
<p>Series数据是Pandas的核心数据结构之一。</p>
<section id="series创建" class="level4">
<h4 class="anchored" data-anchor-id="series创建">Series创建</h4>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> pd.Series([<span class="dv">2</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">4</span>,<span class="dv">12</span>])</span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>0     2
1     0
2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<p>Series 的数据源用列表来填充，两者有相似之处，都是相同的类型，也可以是不同的类型。 series 增加对应的标签(label)作为索引，若没有，就默认是0～n-1内的索引值。</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a>a.values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>array([ 2,  0, -4, 12])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>a.index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>RangeIndex(start=0, stop=4, step=1)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a>a.index<span class="op">=</span>[<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>]</span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>a     2
b     0
c    -4
d    12
dtype: int64</code></pre>
</div>
</div>
<p>因为这种对应关系，因此对于Series可以使用字典的方式来实现对应的dict的key,series中的value相对应。</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a>Dict <span class="op">=</span> {<span class="st">'a'</span>:<span class="dv">1</span>,<span class="st">'b'</span>:<span class="dv">2</span>,<span class="st">'c'</span>:<span class="dv">3</span>,<span class="st">'d'</span>:<span class="dv">4</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a>temp <span class="op">=</span> pd.Series(Dict)</span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true" tabindex="-1"></a>temp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>a    1
b    2
c    3
d    4
dtype: int64</code></pre>
</div>
</div>
<p>Series中的数据是有序的，同时index和value是相互独立的，两者的索引也存在区别，Series和value是可变的。而字典的是不可变的。</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>temp.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>count    4.000000
mean     2.500000
std      1.290994
min      1.000000
25%      1.750000
50%      2.500000
75%      3.250000
max      4.000000
dtype: float64</code></pre>
</div>
</div>
<p>一些指标的含义： - <code>count</code> 一列数据的个数 - <code>mean</code> 一列数据的均值 - <code>25%</code>:一列数据中前25的分位数</p>
</section>
<section id="数据访问" class="level4">
<h4 class="anchored" data-anchor-id="数据访问">数据访问</h4>
<p>可以通过特定索引值来访问、修改索引位置对应的数值，series对象再本质上就是一个带有Numpy数组，因此Numpy可直接运用于Series中。</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> {<span class="st">"beijing"</span>:<span class="dv">55000</span>,<span class="st">"shanghai"</span>:<span class="dv">40000</span>,<span class="st">"shenzhen"</span>:<span class="dv">10000</span>,<span class="st">"hangzhou"</span>:<span class="dv">20000</span>,<span class="st">"guangzhou"</span>:<span class="dv">30000</span>}</span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a>apts <span class="op">=</span> pd.Series(cities,name<span class="op">=</span><span class="st">"prices"</span>)</span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>apts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>beijing      55000
shanghai     40000
shenzhen     10000
hangzhou     20000
guangzhou    30000
Name: prices, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a>apts[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>55000</code></pre>
</div>
</div>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a>apts[<span class="st">'beijing'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>55000</code></pre>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a>apts[<span class="st">'beijing'</span>]<span class="op">=</span><span class="dv">60000</span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a>apts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>beijing      60000
shanghai     40000
shenzhen     10000
hangzhou     20000
guangzhou    30000
Name: prices, dtype: int64</code></pre>
</div>
</div>
<p>堆叠操作:<code>append()</code></p>
<div class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> pd.Series([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> pd.Series([<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a>s1.append(s2,ignore_index<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/sn/g01cvq2j72j6tbq2pmmm074h0000gq/T/ipykernel_51186/1461221517.py:1: FutureWarning: The series.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  s1.append(s2,ignore_index=True)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="105">
<pre><code>0    1
1    2
2    3
3    2
4    3
5    4
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="series中的向量化操作与布尔索引" class="level4">
<h4 class="anchored" data-anchor-id="series中的向量化操作与布尔索引">Series中的向量化操作与布尔索引</h4>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a>apts<span class="op">*</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<pre><code>beijing      180000
shanghai     120000
shenzhen      30000
hangzhou      60000
guangzhou     90000
Name: prices, dtype: int64</code></pre>
</div>
</div>
<p>任何NaN(Not a Number)参与的计算，返回的结果依然是NaN。</p>
<p>向量化加法：</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a>apts<span class="op">+</span>apts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>beijing      110000
shanghai      80000
shenzhen      20000
hangzhou      40000
guangzhou     60000
Name: prices, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a>apts <span class="op">&gt;</span> apts.median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>beijing       True
shanghai      True
shenzhen     False
hangzhou     False
guangzhou    False
Name: prices, dtype: bool</code></pre>
</div>
</div>
<p>会产生一个与原矩阵维度类似的bool矩阵。这个布尔矩阵也可以作为Series对象对应下标，用于获得值为True的位置的对应的数值。从而达到抽取特定样本的目的。</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a>apts[apts <span class="op">&gt;</span> apts.median()]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>beijing     55000
shanghai    40000
Name: prices, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="切片操作" class="level4">
<h4 class="anchored" data-anchor-id="切片操作">切片操作</h4>
<p>通过索引切片或处理Series中的一个或多个值，返回的结果依然是Series对象。</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a>apts[<span class="dv">1</span>:<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>shanghai    40000
shenzhen    10000
Name: prices, dtype: int64</code></pre>
</div>
</div>
<p>提取的是第一和第二个元素，第三个元素访问不到。</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,np.nan])</span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true" tabindex="-1"></a>temp <span class="op">=</span> pd.Series(arr,index<span class="op">=</span>[<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>])</span>
<span id="cb377-4"><a href="#cb377-4" aria-hidden="true" tabindex="-1"></a>temp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>a    1.0
b    2.0
c    3.0
d    NaN
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a>temp.isnull()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>a    False
b    False
c    False
d     True
dtype: bool</code></pre>
</div>
</div>
<p><code>isnull()</code>还可以把Series对象作为参数</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a>pd.isnull(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>a    False
b    False
c    False
d     True
dtype: bool</code></pre>
</div>
</div>
<p>数据量庞大时候，缺失值可能处于正常数据中，这时候可以用布尔表达式形式，将这些数据筛选出来。</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a>temp[temp.isnull()<span class="op">==</span><span class="va">True</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>d   NaN
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="删除和添加" class="level4">
<h4 class="anchored" data-anchor-id="删除和添加">删除和添加</h4>
<p>利用Pandas中的<code>drop()</code></p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> pd.Series([<span class="dv">2</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">4</span>,<span class="dv">12</span>])</span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>0     2
1     0
2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>a.drop(<span class="dv">0</span>)  <span class="co">#这里的0指代原Series中的索引位置,而并非会影响原数据</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>1     0
2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>a.drop([<span class="dv">0</span>,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0     2
1     0
2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb393"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a>a.drop(<span class="dv">0</span>,inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>1     0
2    -4
3    12
dtype: int64</code></pre>
</div>
</div>
<p>添加元素</p>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span>pd.Series([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb397"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span>pd.Series(np.random.rand(<span class="dv">3</span>))  <span class="co">#np.random.rand(3) 生成0-1的随机数</span></span>
<span id="cb397-2"><a href="#cb397-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>0    0.461400
1    0.838999
2    0.442281
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a>a.append(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/sn/g01cvq2j72j6tbq2pmmm074h0000gq/T/ipykernel_17033/2735396570.py:1: FutureWarning: The series.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  a.append(b)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>0    1.000000
1    2.000000
2    3.000000
0    0.461400
1    0.838999
2    0.442281
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a>a.append(b,ignore_index<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/sn/g01cvq2j72j6tbq2pmmm074h0000gq/T/ipykernel_17033/3422773070.py:1: FutureWarning: The series.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  a.append(b,ignore_index=True)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>0    1.000000
1    2.000000
2    3.000000
3    0.461400
4    0.838999
5    0.442281
dtype: float64</code></pre>
</div>
</div>
</section>
</section>
<section id="dataframe" class="level3">
<h3 class="anchored" data-anchor-id="dataframe">DataFrame</h3>
<p>若将Series看作Excel的一列，则DataFrame就是一张表</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb405-2"><a href="#cb405-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb405-3"><a href="#cb405-3" aria-hidden="true" tabindex="-1"></a>data1 <span class="op">=</span> np.random.randint(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">9</span>).reshape(<span class="dv">3</span>,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a>data1 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>array([[5, 6, 2],
       [8, 7, 4],
       [1, 5, 9]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a>np.random.randint(<span class="dv">1</span>,<span class="dv">9</span>)  <span class="co">#生成在1-9的整数随机数</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>7</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame(data1)</span>
<span id="cb410-2"><a href="#cb410-2" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<table class="dataframe table table-sm table-striped" data-border="1">
<thead>
<tr class="header">
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th>0</th>
<td>5</td>
<td>6</td>
<td>2</td>
</tr>
<tr class="even">
<th>1</th>
<td>8</td>
<td>7</td>
<td>4</td>
</tr>
<tr class="odd">
<th>2</th>
<td>1</td>
<td>5</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>改变index行名，显示指定列名</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame(data1,columns<span class="op">=</span>[<span class="st">'one'</span>,<span class="st">'two'</span>,<span class="st">'three'</span>],index<span class="op">=</span>[<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>])</span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<table class="dataframe table table-sm table-striped" data-border="1">
<thead>
<tr class="header">
<th></th>
<th>one</th>
<th>two</th>
<th>three</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th>a</th>
<td>5</td>
<td>6</td>
<td>2</td>
</tr>
<tr class="even">
<th>b</th>
<td>8</td>
<td>7</td>
<td>4</td>
</tr>
<tr class="odd">
<th>c</th>
<td>1</td>
<td>5</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a>df2.T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<table class="dataframe table table-sm table-striped" data-border="1">
<thead>
<tr class="header">
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th>one</th>
<td>5</td>
<td>8</td>
<td>1</td>
</tr>
<tr class="even">
<th>two</th>
<td>6</td>
<td>7</td>
<td>5</td>
</tr>
<tr class="odd">
<th>three</th>
<td>2</td>
<td>4</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="访问dataframe中的列和行" class="level4">
<h4 class="anchored" data-anchor-id="访问dataframe中的列和行">访问DataFrame中的列和行</h4>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a>df2.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Index(['one', 'two', 'three'], dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a>df2.columns.values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>array(['one', 'two', 'three'], dtype=object)</code></pre>
</div>
</div>
<p>在pandas，Dataframe可以将列的名称作为DataFrame对象的属性来访问数据。</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a>df2.one</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>a    5
b    8
c    1
Name: one, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'one'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>a    5
b    8
c    1
Name: one, dtype: int64</code></pre>
</div>
</div>
<p>上述两者是等价的</p>
</section>
<section id="dataframe中的删除操作" class="level4">
<h4 class="anchored" data-anchor-id="dataframe中的删除操作">DataFrame中的删除操作</h4>
<p>类似于Series，可以同样使用<code>drop</code>来删除一行或一列</p>
</section>
<section id="dataframe的轴方向" class="level4">
<h4 class="anchored" data-anchor-id="dataframe的轴方向">Dataframe的轴方向</h4>
</section>
</section>
<section id="基于pandas的文件读取与分析" class="level3">
<h3 class="anchored" data-anchor-id="基于pandas的文件读取与分析">基于Pandas的文件读取与分析</h3>
</section>
</section>
<section id="matplotlib-与seaborn可视化分析" class="level2">
<h2 class="anchored" data-anchor-id="matplotlib-与seaborn可视化分析">Matplotlib 与Seaborn可视化分析</h2>
<section id="matplotlib与图形绘制" class="level3">
<h3 class="anchored" data-anchor-id="matplotlib与图形绘制">Matplotlib与图形绘制</h3>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb421-2"><a href="#cb421-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a>nbsample <span class="op">=</span> <span class="dv">256</span></span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="bu">xrange</span> <span class="op">=</span> [<span class="op">-</span>math.pi,math.pi]</span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a>x ,y <span class="op">=</span> [],[] <span class="co">#create the void list</span></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(nbsample):</span>
<span id="cb422-5"><a href="#cb422-5" aria-hidden="true" tabindex="-1"></a>    ratio <span class="op">=</span> (i <span class="op">+</span> <span class="fl">0.5</span>)<span class="op">/</span>nbsample</span>
<span id="cb422-6"><a href="#cb422-6" aria-hidden="true" tabindex="-1"></a>    x.append(<span class="bu">xrange</span>[<span class="dv">0</span>]<span class="op">+</span>(<span class="bu">xrange</span>[<span class="dv">1</span>]<span class="op">-</span><span class="bu">xrange</span>[<span class="dv">0</span>])<span class="op">*</span>ratio)</span>
<span id="cb422-7"><a href="#cb422-7" aria-hidden="true" tabindex="-1"></a>    y.append(math.sin(x[<span class="op">-</span><span class="dv">1</span>]))  <span class="co">#反向操作，将列表中的最后一个元素带入函数，再append in y</span></span>
<span id="cb422-8"><a href="#cb422-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb422-9"><a href="#cb422-9" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y)</span>
<span id="cb422-10"><a href="#cb422-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb422-11"><a href="#cb422-11" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-270-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>上述做法可以用numpy来得到简化</p>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb423"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span>math.pi,math.pi,num<span class="op">=</span><span class="dv">256</span>)</span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>np.sin(x)</span>
<span id="cb423-3"><a href="#cb423-3" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y)</span>
<span id="cb423-4"><a href="#cb423-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-271-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><code>linspace(linspace(start,stop,num=50))</code>能够批量生产指定区间内的数量为num的均匀间隔的数组向量。</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb424-3"><a href="#cb424-3" aria-hidden="true" tabindex="-1"></a>nbsample <span class="op">=</span> <span class="dv">128</span></span>
<span id="cb424-4"><a href="#cb424-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-5"><a href="#cb424-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span>np.pi,np.pi,nbsample)</span>
<span id="cb424-6"><a href="#cb424-6" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> np.sin(x)</span>
<span id="cb424-7"><a href="#cb424-7" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> np.cos(x)</span>
<span id="cb424-8"><a href="#cb424-8" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y1,color<span class="op">=</span><span class="st">'g'</span>,linewidth<span class="op">=</span><span class="dv">4</span>,linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb424-9"><a href="#cb424-9" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y2,markersize<span class="op">=</span><span class="dv">9</span>,markerfacecolor<span class="op">=</span><span class="st">'r'</span>,markeredgecolor<span class="op">=</span><span class="st">'k'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-272-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="pyplot的高级功能" class="level3">
<h3 class="anchored" data-anchor-id="pyplot的高级功能">pyplot的高级功能</h3>
<section id="添加图例和注释" class="level4">
<h4 class="anchored" data-anchor-id="添加图例和注释">添加图例和注释</h4>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb425-3"><a href="#cb425-3" aria-hidden="true" tabindex="-1"></a>nbsample <span class="op">=</span> <span class="dv">128</span></span>
<span id="cb425-4"><a href="#cb425-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-5"><a href="#cb425-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span>np.pi,np.pi,nbsample)</span>
<span id="cb425-6"><a href="#cb425-6" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> np.sin(x)</span>
<span id="cb425-7"><a href="#cb425-7" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> np.cos(x)</span>
<span id="cb425-8"><a href="#cb425-8" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y1,color<span class="op">=</span><span class="st">'g'</span>,linewidth<span class="op">=</span><span class="dv">4</span>,linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb425-9"><a href="#cb425-9" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y2,markersize<span class="op">=</span><span class="dv">9</span>,markerfacecolor<span class="op">=</span><span class="st">'r'</span>,markeredgecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb425-10"><a href="#cb425-10" aria-hidden="true" tabindex="-1"></a>plt.legend(<span class="st">"loc=best"</span>)</span>
<span id="cb425-11"><a href="#cb425-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-274-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="设置图形标题及坐标轴" class="level4">
<h4 class="anchored" data-anchor-id="设置图形标题及坐标轴">设置图形标题及坐标轴</h4>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a>nbsample <span class="op">=</span> <span class="dv">128</span></span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-5"><a href="#cb426-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span>np.pi,np.pi,nbsample)</span>
<span id="cb426-6"><a href="#cb426-6" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> np.sin(x)</span>
<span id="cb426-7"><a href="#cb426-7" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> np.cos(x)</span>
<span id="cb426-8"><a href="#cb426-8" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y1,color<span class="op">=</span><span class="st">'g'</span>,linewidth<span class="op">=</span><span class="dv">4</span>,linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb426-9"><a href="#cb426-9" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y2,markersize<span class="op">=</span><span class="dv">9</span>,markerfacecolor<span class="op">=</span><span class="st">'r'</span>,markeredgecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb426-10"><a href="#cb426-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"tangle function plot"</span>)</span>
<span id="cb426-11"><a href="#cb426-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"x"</span>)</span>
<span id="cb426-12"><a href="#cb426-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"y"</span>)</span>
<span id="cb426-13"><a href="#cb426-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-275-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="添加网格线" class="level4">
<h4 class="anchored" data-anchor-id="添加网格线">添加网格线</h4>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb427"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.arange(<span class="dv">0</span>,<span class="dv">4</span>,<span class="fl">0.2</span>)</span>
<span id="cb427-2"><a href="#cb427-2" aria-hidden="true" tabindex="-1"></a>plt.plot(data,data,<span class="st">'r-.'</span>,data,data<span class="op">**</span><span class="dv">2</span>,<span class="st">'bs'</span>,data,data<span class="op">**</span><span class="dv">3</span>,<span class="st">'g^'</span>)</span>
<span id="cb427-3"><a href="#cb427-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-4"><a href="#cb427-4" aria-hidden="true" tabindex="-1"></a>plt.grid(b<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb427-5"><a href="#cb427-5" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">'mult_lines-grid.png'</span>,dpi<span class="op">=</span><span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/sn/g01cvq2j72j6tbq2pmmm074h0000gq/T/ipykernel_23829/2338610709.py:4: MatplotlibDeprecationWarning: The 'b' parameter of grid() has been renamed 'visible' since Matplotlib 3.5; support for the old name will be dropped two minor releases later.
  plt.grid(b=True)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-277-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="绘制多个子图" class="level4">
<h4 class="anchored" data-anchor-id="绘制多个子图">绘制多个子图</h4>
<p>实际上有时候需要多个子图，使用<code>subplot()</code></p>
</section>
</section>
<section id="散点图" class="level3">
<h3 class="anchored" data-anchor-id="散点图">散点图</h3>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb429-2"><a href="#cb429-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb429-3"><a href="#cb429-3" aria-hidden="true" tabindex="-1"></a>nbpoint<span class="op">=</span><span class="dv">50</span></span>
<span id="cb429-4"><a href="#cb429-4" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">100</span>)</span>
<span id="cb429-5"><a href="#cb429-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.standard_normal(nbpoint)</span>
<span id="cb429-6"><a href="#cb429-6" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>array([-1.74976547,  0.3426804 ,  1.1530358 , -0.25243604,  0.98132079,
        0.51421884,  0.22117967, -1.07004333, -0.18949583,  0.25500144,
       -0.45802699,  0.43516349, -0.58359505,  0.81684707,  0.67272081,
       -0.10441114, -0.53128038,  1.02973269, -0.43813562, -1.11831825,
        1.61898166,  1.54160517, -0.25187914, -0.84243574,  0.18451869,
        0.9370822 ,  0.73100034,  1.36155613, -0.32623806,  0.05567601,
        0.22239961, -1.443217  , -0.75635231,  0.81645401,  0.75044476,
       -0.45594693,  1.18962227, -1.69061683, -1.35639905, -1.23243451,
       -0.54443916, -0.66817174,  0.00731456, -0.61293874,  1.29974807,
       -1.73309562, -0.9833101 ,  0.35750775, -1.6135785 ,  1.47071387])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.random.standard_normal(nbpoint)</span>
<span id="cb431-2"><a href="#cb431-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">1000</span>)</span>
<span id="cb431-3"><a href="#cb431-3" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> np.random.rand(nbpoint)</span>
<span id="cb431-4"><a href="#cb431-4" aria-hidden="true" tabindex="-1"></a>area <span class="op">=</span> (<span class="dv">30</span><span class="op">*</span>np.random.rand(nbpoint))<span class="op">**</span><span class="dv">2</span></span>
<span id="cb431-5"><a href="#cb431-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span>area,c<span class="op">=</span>colors,alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb431-6"><a href="#cb431-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="python学习笔记0922_files/figure-html/cell-280-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>其中参数<code>alpha</code>表示透明度，s就是<code>plot()</code>中的markersize参数。</p>
</section>
<section id="条形图和直方图" class="level3">
<h3 class="anchored" data-anchor-id="条形图和直方图">条形图和直方图</h3>
<section id="并列条形图" class="level4">
<h4 class="anchored" data-anchor-id="并列条形图">并列条形图</h4>
</section>
<section id="叠加条形图" class="level4">
<h4 class="anchored" data-anchor-id="叠加条形图">叠加条形图</h4>
</section>
<section id="直方图" class="level4">
<h4 class="anchored" data-anchor-id="直方图">直方图</h4>
</section>
</section>
<section id="饼图" class="level3">
<h3 class="anchored" data-anchor-id="饼图">饼图</h3>
</section>
<section id="箱形图" class="level3">
<h3 class="anchored" data-anchor-id="箱形图">箱形图</h3>
</section>
<section id="误差条" class="level3">
<h3 class="anchored" data-anchor-id="误差条">误差条</h3>
</section>
<section id="绘制三维图形" class="level3">
<h3 class="anchored" data-anchor-id="绘制三维图形">绘制三维图形</h3>
</section>
<section id="惊艳的seaborn" class="level3">
<h3 class="anchored" data-anchor-id="惊艳的seaborn">惊艳的Seaborn</h3>
<p>Seaborn基于Matplotlib的数据可视化库，在Matplotlib的基础上实现了一些好用的功能，在代码形式上会更加像R语言上的ggplot。</p>
</section>
</section>
<section id="机器学习" class="level2">
<h2 class="anchored" data-anchor-id="机器学习">机器学习</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>